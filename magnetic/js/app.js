!function(n){function t(n){var t=document.getElementsByTagName("head")[0],B=document.createElement("script");B.type="text/javascript",B.charset="utf-8",B.src=a.p+""+n+"."+u+".hot-update.js",t.appendChild(B)}function B(){return new Promise(function(n,t){if("undefined"==typeof XMLHttpRequest)return t(new Error("No browser support"));try{var B=new XMLHttpRequest,e=a.p+""+u+".hot-update.json";B.open("GET",e,!0),B.timeout=1e4,B.send(null)}catch(s){return t(s)}B.onreadystatechange=function(){if(4===B.readyState)if(0===B.status)t(new Error("Manifest request to "+e+" timed out."));else if(404===B.status)n();else if(200!==B.status&&304!==B.status)t(new Error("Manifest request to "+e+" failed."));else{try{var s=JSON.parse(B.responseText)}catch(I){return void t(I)}n(s)}}})}function e(n){var t=W[n];if(!t)return a;var B=function(B){return t.hot.active?(W[B]?W[B].parents.indexOf(n)<0&&W[B].parents.push(n):X=[n],t.children.indexOf(B)<0&&t.children.push(B)):(console.warn("[HMR] unexpected require("+B+") from disposed module "+n),X=[]),r=!1,a(B)};for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&Object.defineProperty(B,e,function(n){return{configurable:!0,enumerable:!0,get:function(){return a[n]},set:function(t){a[n]=t}}}(e));return Object.defineProperty(B,"e",{enumerable:!0,value:function(n){function t(){L--,"prepare"===m&&(y[n]||Q(n),0===L&&0===h&&l())}return"ready"===m&&I("prepare"),L++,a.e(n).then(t,function(n){throw t(),n})}}),B}function s(n){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:r,active:!0,accept:function(n,B){if("undefined"==typeof n)t._selfAccepted=!0;else if("function"==typeof n)t._selfAccepted=n;else if("object"==typeof n)for(var e=0;e<n.length;e++)t._acceptedDependencies[n[e]]=B;else t._acceptedDependencies[n]=B},decline:function(n){if("undefined"==typeof n)t._selfDeclined=!0;else if("object"==typeof n)for(var B=0;B<n.length;B++)t._declinedDependencies[n[B]]=!0;else t._declinedDependencies[n]=!0},dispose:function(n){t._disposeHandlers.push(n)},addDisposeHandler:function(n){t._disposeHandlers.push(n)},removeDisposeHandler:function(n){var B=t._disposeHandlers.indexOf(n);B>=0&&t._disposeHandlers.splice(B,1)},check:F,apply:g,status:function(n){return n?void Z.push(n):m},addStatusHandler:function(n){Z.push(n)},removeStatusHandler:function(n){var t=Z.indexOf(n);t>=0&&Z.splice(t,1)},data:G[n]};return r=!0,t}function I(n){m=n;for(var t=0;t<Z.length;t++)Z[t].call(null,n)}function c(n){var t=+n+""===n;return t?+n:n}function F(n){if("idle"!==m)throw new Error("check() is only allowed in idle status");return C=n,I("check"),B().then(function(n){if(!n)return I("idle"),null;p={},V={},y={};for(var t=0;t<n.c.length;t++)V[n.c[t]]=!0;o=n.h,I("prepare");var B=new Promise(function(n,t){d={resolve:n,reject:t}});U={};var e=0;return Q(e),"prepare"===m&&0===L&&0===h&&l(),B})}function i(n,t){if(V[n]&&p[n]){p[n]=!1;for(var B in t)Object.prototype.hasOwnProperty.call(t,B)&&(U[B]=t[B]);0===--h&&0===L&&l()}}function Q(n){V[n]?(p[n]=!0,h++,t(n)):y[n]=!0}function l(){I("ready");var n=d;if(d=null,n)if(C)g(C).then(function(t){n.resolve(t)},function(t){n.reject(t)});else{var t=[];for(var B in U)Object.prototype.hasOwnProperty.call(U,B)&&t.push(c(B));n.resolve(t)}}function g(t){function B(n){for(var t=[n],B={},s=t.slice().map(function(n){return{chain:[n],id:n}});s.length>0;){var I=s.pop(),c=I.id,F=I.chain;if(n=W[c],n&&!n.hot._selfAccepted){if(n.hot._selfDeclined)return{type:"self-declined",chain:F,moduleId:c};if(n.hot._main)return{type:"unaccepted",chain:F,moduleId:c};for(var i=0;i<n.parents.length;i++){var Q=n.parents[i],l=W[Q];if(l){if(l.hot._declinedDependencies[c])return{type:"declined",chain:F.concat([Q]),moduleId:c,parentId:Q};t.indexOf(Q)>=0||(l.hot._acceptedDependencies[c]?(B[Q]||(B[Q]=[]),e(B[Q],[c])):(delete B[Q],t.push(Q),s.push({chain:F.concat([Q]),id:Q})))}}}}return{type:"accepted",outdatedModules:t,outdatedDependencies:B}}function e(n,t){for(var B=0;B<t.length;B++){var e=t[B];n.indexOf(e)<0&&n.push(e)}}if("ready"!==m)throw new Error("apply() is only allowed in ready status");t=t||{};var s,F,i,Q,l,g={},b=[],d={};for(var C in U)if(Object.prototype.hasOwnProperty.call(U,C)){l=c(C);var r=B(l),x=!1,Z=!1,h="";switch(r.chain&&(h="\nUpdate propagation: "+r.chain.join(" -> ")),r.type){case"self-declined":t.onDeclined&&t.onDeclined(r),t.ignoreDeclined||(x=new Error("Aborted because of self decline: "+r.moduleId+h));break;case"declined":t.onDeclined&&t.onDeclined(r),t.ignoreDeclined||(x=new Error("Aborted because of declined dependency: "+r.moduleId+" in "+r.parentId+h));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(r),t.ignoreUnaccepted||(x=new Error("Aborted because "+l+" is not accepted"+h));break;case"accepted":t.onAccepted&&t.onAccepted(r),Z=!0;break;default:throw new Error("Unexception type "+r.type)}if(x)return I("abort"),Promise.reject(x);if(Z){d[l]=U[l],e(b,r.outdatedModules);for(l in r.outdatedDependencies)Object.prototype.hasOwnProperty.call(r.outdatedDependencies,l)&&(g[l]||(g[l]=[]),e(g[l],r.outdatedDependencies[l]))}}var L=[];for(F=0;F<b.length;F++)l=b[F],W[l]&&W[l].hot._selfAccepted&&L.push({module:l,errorHandler:W[l].hot._selfAccepted});I("dispose");for(var y,p=b.slice();p.length>0;)if(l=p.pop(),Q=W[l]){var V={},A=Q.hot._disposeHandlers;for(i=0;i<A.length;i++)(s=A[i])(V);for(G[l]=V,Q.hot.active=!1,delete W[l],i=0;i<Q.children.length;i++){var R=W[Q.children[i]];R&&(y=R.parents.indexOf(l),y>=0&&R.parents.splice(y,1))}}var N,S;for(l in g)if(Object.prototype.hasOwnProperty.call(g,l))for(Q=W[l],S=g[l],i=0;i<S.length;i++)N=S[i],y=Q.children.indexOf(N),y>=0&&Q.children.splice(y,1);I("apply"),u=o;for(l in d)Object.prototype.hasOwnProperty.call(d,l)&&(n[l]=d[l]);var E=null;for(l in g)if(Object.prototype.hasOwnProperty.call(g,l)){Q=W[l],S=g[l];var v=[];for(F=0;F<S.length;F++)N=S[F],s=Q.hot._acceptedDependencies[N],v.indexOf(s)>=0||v.push(s);for(F=0;F<v.length;F++){s=v[F];try{s(g)}catch(H){E||(E=H)}}}for(F=0;F<L.length;F++){var Y=L[F];l=Y.module,X=[l];try{a(l)}catch(H){if("function"==typeof Y.errorHandler)try{Y.errorHandler(H)}catch(H){E||(E=H)}else E||(E=H)}}return E?(I("fail"),Promise.reject(E)):(I("idle"),Promise.resolve(b))}function a(t){if(W[t])return W[t].exports;var B=W[t]={i:t,l:!1,exports:{},hot:s(t),parents:(x=X,X=[],x),children:[]};return n[t].call(B.exports,B,B.exports,e(t)),B.l=!0,B.exports}var b=this.webpackHotUpdate;this.webpackHotUpdate=function(n,t){i(n,t),b&&b(n,t)};var d,U,o,C=!0,u="598700e3ce1fca69d712",G={},r=!0,X=[],x=[],Z=[],m="idle",h=0,L=0,y={},p={},V={},W={};return a.m=n,a.c=W,a.i=function(n){return n},a.d=function(n,t,B){Object.defineProperty(n,t,{configurable:!1,enumerable:!0,get:B})},a.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},a.p="",a.h=function(){return u},e(23)(a.s=23)}([function(module,exports,__webpack_require__){"use strict";eval('var configs = {};\n\nif (false) {\n  configs.SEMPRE_URL = "http://localhost:8400";\n} else {\n  configs.SEMPRE_URL = "http://jonsson.stanford.edu:8401";\n}\n\nconfigs.loggerServer = "ws://hydrogen.samginn.com:4000/socket";\nconfigs.loggerOn = false;\n\nconfigs.debugMode = false;\n\nconfigs.defaultSessionId = "deadbeef";\n\nconfigs.emptyStruct = [];\nconfigs.defaultStruct = [{ x: 0, y: 1, z: 0, color: "Red", names: ["s"] }];\n\nconfigs.mainCanvas = "main_canvas";\nconfigs.targetCanvas = "target_canvas";\nconfigs.consoleElemId = "console";\nconfigs.historyElemId = "command_history";\nconfigs.statusElemId = "status";\nconfigs.currentCmdElemId = "currentcmd";\nconfigs.possStepsElemId = "possible_steps";\nconfigs.maxStepsElemId = "max_steps";\nconfigs.currStepsElemId = "curr_steps";\nconfigs.reactionElemId = "reaction";\nconfigs.defineElemId = "definetextarea";\nconfigs.defineButton = "define_phrase_button";\nconfigs.definePromptElemId = "show_define_status";\nconfigs.randomElemId = "random";\nconfigs.referenceElemId = "reference";\n\nconfigs.elems = {\n  helpMe: "helpme",\n  keyboard: "keyboard_shortcuts",\n  currSteps: "curr_steps",\n  consoleGroup: "console_group",\n  defineInterface: "define_interface",\n  console: "console",\n  defineConsole: "definetextarea",\n  defineStatus: "define_status",\n  defineHeader: "define_header",\n  definePrompt: "define_prompt"\n};\n\nconfigs.buttons = {\n  do: "dobutton",\n  accept: "flyingaccept",\n  prev: "prevbutton",\n  next: "nextbutton",\n  clear: "clearbutton",\n  paraphrase: "paraphrase",\n  define: "define_phrase_button",\n  close_define: "close_define_interface",\n  define_instead: "define_instead",\n  skip: "skip_button",\n  reset: "reset_all_progress",\n  toggleDefine: "toggledefine",\n  putBack: "putbackbutton",\n  tryDefine: "try_define",\n  rotateIcons: "rotate-icons"\n};\n\nconfigs.difficulty = 3;\nconfigs.defaultSkips = 2;\n\n// configs.targets = [\n//   [7, "[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[0,0,0,0,0,2],[9,9,9,9,9,2],[9,9,9,9,9,2],[0,0,0,0,0,2,2,2,2,2,2],[],[],[],[],[9,9,9,9,9,2],[9,9,9,9,9,2],[9,9,9,9,9,2],[9,9,9,9,9,2,2,2,2,2,2],[],[],[],[],[9,9,9,9,9,2],[9,9,9,9,9,2],[9,9,9,9,9,2],[9,9,9,9,9,2,2,2,2,2,2],[],[],[],[],[0,0,0,0,0,2],[9,9,9,9,9,2],[9,9,9,9,9,2],[0,0,0,0,0,2,2,2,2,2,2],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]]"],\n//   [5, "[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[0,0],[9,0,0],[9,9,0,0],[9,9,9,0,0],[9,9,9,0,0],[9,9,9,0,0],[9,9,9,0,0],[9,9,9,0,0],[2],[9],[9,9,2],[9,9,9],[9,9,9,2],[9,9,9],[9,9,9,2],[9,9,9],[2],[9],[9,9,2],[9,9,9],[9,9,9,2],[9,9,9],[9,9,9,2],[9,9,9],[0,0],[9,0,0],[9,9,0,0],[9,9,9,0,0],[9,9,9,0,0],[9,9,9,0,0],[9,9,9,0,0],[9,9,9,0,0],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]]"],\n//   [5, "[[],[],[],[],[],[],[],[],[],[],[],[0,0,0,2],[],[],[],[],[],[],[],[9,9,9,2,6],[],[],[],[],[],[],[],[9,9,9,2,6,6,10],[],[],[],[],[],[],[],[9,9,9,2,6],[],[],[],[],[],[],[],[0,0,0,2],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]]"],\n//   [3, "[[2],[],[],[4],[],[],[1],[],[2,2],[],[],[4,4],[],[],[1,1],[],[2,2,2],[],[],[4,4,4],[],[],[1,1,1],[],[2,2,2,2],[],[],[4,4,4,4],[],[],[1,1,1,1],[],[2,2,2,2],[],[],[4,4,4,4],[],[],[1,1,1,1],[],[2,2,2],[],[],[4,4,4],[],[],[1,1,1],[],[2,2],[],[],[4,4],[],[],[1,1],[],[2],[],[],[4],[],[],[1],[]]"],\n//   [4, "[[3],[2],[0],[],[],[0],[2],[3],[2],[3],[2],[0],[0],[2],[3],[2],[0],[2],[3],[2],[2],[3],[2],[0],[],[0],[2],[3],[3],[2],[0],[],[],[0],[2],[3],[3],[2],[0],[],[0],[2],[3],[2],[2],[3],[2],[0],[2],[3],[2],[0],[0],[2],[3],[2],[3],[2],[0],[],[],[0],[2],[3]]"],\n//   [5, "[[],[],[],[4,1,3,3,3,3,3,3,3],[],[],[],[],[],[],[],[2,2,0,3,3,3,3,3,3],[],[],[],[],[],[],[],[4,4,4,1,3,3,3,3,3],[],[],[],[],[],[],[],[2,2,2,2,0,3,3,3,3],[],[],[],[],[],[],[],[4,4,4,4,4,1,3,3,3],[],[],[],[],[],[],[],[2,2,2,2,2,2,0,3,3],[],[],[],[],[],[],[],[4,4,4,4,4,4,4,1,3],[],[],[],[],[],[],[],[2,2,2,2,2,2,2,2,0],[],[],[],[]]"],\n//   [3, "[[0,0,0,0],[],[],[],[],[],[],[0,0,0,0],[1,1,1,1,4,4],[],[],[],[],[],[],[1,1,1,1,4,4],[0,0,0,0],[],[],[],[],[],[],[0,0,0,0],[],[],[],[],[],[],[],[],[],[],[],[],[0,0,0,0],[],[],[],[],[],[],[],[1,1,1,1,4,4],[],[],[],[],[],[],[],[0,0,0,0],[],[],[],[],[],[],[],[],[],[],[]]"],\n//   [4, "[[],[],[],[1],[1],[],[],[],[4],[4],[4],[4,1],[4,1],[4],[4],[4],[4,2],[4,2],[4,2],[4,2,1],[4,2,1],[4,2],[4,2],[4,2],[4,2,0],[4,2,0],[4,2,0],[4,2,0,1],[4,2,0,1],[4,2,0],[4,2,0],[4,2,0],[4,2,0],[4,2,0],[4,2,0],[4,2,0,1],[4,2,0,1],[4,2,0],[4,2,0],[4,2,0],[4,2],[4,2],[4,2],[4,2,1],[4,2,1],[4,2],[4,2],[4,2],[4],[4],[4],[4,1],[4,1],[4],[4],[4],[],[],[],[1],[1],[],[],[]]"],\n//   [4, "[[2],[2,0],[2,0,4],[2,0,4,3],[2,0,4,3],[2,0,4],[2,0],[2],[2],[2,0],[2,0,4],[2,0,4,3],[2,0,4,3],[2,0,4],[2,0],[2],[2],[2,0],[2,0,4],[2,0,4,3],[2,0,4,3],[2,0,4],[2,0],[2],[2],[2,0],[2,0,4],[2,0,4,3],[2,0,4,3],[2,0,4],[2,0],[2],[2],[2,0],[2,0,4],[2,0,4,3],[2,0,4,3],[2,0,4],[2,0],[2],[2],[2,0],[2,0,4],[2,0,4,3],[2,0,4,3],[2,0,4],[2,0],[2],[2],[2,0],[2,0,4],[2,0,4,3],[2,0,4,3],[2,0,4],[2,0],[2],[2],[2,0],[2,0,4],[2,0,4,3],[2,0,4,3],[2,0,4],[2,0],[2]]"],\n//   [2, "[[0],[0],[0],[2,0],[2,2,0],[2,2,2,0],[2,2,2,2,0],[2,2,2,2,2,0],[],[],[],[2],[2,2],[2,2,2],[2,2,2,2],[2,2,2,2,2],[0],[0],[0],[2,0],[2,2,0],[2,2,2,0],[2,2,2,2,0],[2,2,2,2,2,0],[],[],[],[2],[2,2],[2,2,2],[2,2,2,2],[2,2,2,2,2],[0],[0],[0],[2,0],[2,2,0],[2,2,2,0],[2,2,2,2,0],[2,2,2,2,2,0],[],[],[],[2],[2,2],[2,2,2],[2,2,2,2],[2,2,2,2,2],[0],[0],[0],[2,0],[2,2,0],[2,2,2,0],[2,2,2,2,0],[2,2,2,2,2,0],[],[],[],[2],[2,2],[2,2,2],[2,2,2,2],[2,2,2,2,2]]"],\n//   [2, "[[2,2,2],[],[],[],[2,2,2],[],[],[],[2,2,2,0],[],[],[],[2,2,2,0],[],[],[],[2,2,2],[],[],[],[2,2,2],[],[],[],[2,2,2,0],[],[],[],[2,2,2,0],[],[],[],[2,2,2],[],[],[],[2,2,2],[],[],[],[2,2,2,0],[],[],[],[2,2,2,0],[],[],[],[2,2,2],[],[],[],[2,2,2],[],[],[],[2,2,2,0],[],[],[],[2,2,2,0],[],[],[]]"],\n//   [3, "[[4],[4],[4],[4],[4],[4],[4],[4],[2],[0],[2],[0],[2],[0],[2],[0],[2],[0],[2],[0],[2],[0],[2],[0],[2],[0],[2],[0],[2],[0],[2],[0],[2],[0],[2],[0],[2],[0],[2],[0],[2],[0],[2],[0],[2],[0],[2],[0],[2],[0],[2],[0],[2],[0],[2],[0],[4],[4],[4],[4],[4],[4],[4],[4]]"],\n//   [5, "[[2,2,2],[2,2,2,0],[2,2,2],[2,2,2,0],[2,2,2],[2,2,2,0],[2,2,2],[2,2,2,0],[],[],[],[],[],[],[],[],[1,1,1],[1,1,1,0],[1,1,1],[1,1,1,0],[1,1,1],[1,1,1,0],[1,1,1],[1,1,1,0],[],[],[],[],[],[],[],[],[4,4,4],[4,4,4,0],[4,4,4],[4,4,4,0],[4,4,4],[4,4,4,0],[4,4,4],[4,4,4,0],[],[],[],[],[],[],[],[],[3,3,3],[3,3,3,0],[3,3,3],[3,3,3,0],[3,3,3],[3,3,3,0],[3,3,3],[3,3,3,0],[],[],[],[],[],[],[],[]]"],\n//   [5, "[[2,2,2],[2,2,2,0],[2,2,2],[2,2,2,0],[2,2,2],[2,2,2,0],[2,2,2],[2,2,2,0],[4,4,4],[1],[1],[1],[1],[1],[1],[1,3],[4,4,4],[1],[1],[1],[1],[1],[1],[1,3],[4,4,4],[1],[1],[1],[1],[1],[1],[1,3],[4,4,4],[1],[1],[1],[1],[1],[1],[1,3],[4,4,4],[1],[1],[1],[1],[1],[1],[1,3],[4,4,4],[1],[1],[1],[1],[1],[1],[1,3],[2,2,2],[2,2,2,0],[2,2,2],[2,2,2,0],[2,2,2],[2,2,2,0],[2,2,2],[2,2,2,0]]"],\n//   [4, "[[4],[4],[4],[4],[4],[4],[4],[4],[4],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4],[4],[4,3],[4,3,2],[4,3,2],[4,3,2],[4,3,2],[4,3],[4],[4],[4,3],[4,3,2],[4,3,2,0],[4,3,2,0],[4,3,2],[4,3],[4],[4],[4,3],[4,3,2],[4,3,2,0],[4,3,2,0],[4,3,2],[4,3],[4],[4],[4,3],[4,3,2],[4,3,2],[4,3,2],[4,3,2],[4,3],[4],[4],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4],[4],[4],[4],[4],[4],[4],[4],[4]]"],\n//    [4, "[[1,1],[1,1],[],[],[],[],[1,1],[1,1],[1,1],[1,1],[2,2,4],[2,2,4,0],[2,2,4,0],[2,2,4],[1,1],[1,1],[],[],[2,2,4],[2,2,4,0],[2,2,4,0],[2,2,4],[],[],[],[],[2,2,4],[2,2,4,0],[2,2,4,0],[2,2,4],[],[],[],[],[2,2,4],[2,2,4,0],[2,2,4,0],[2,2,4],[],[],[],[],[2,2,4],[2,2,4,0],[2,2,4,0],[2,2,4],[],[],[1,1],[1,1],[2,2,4],[2,2,4,0],[2,2,4,0],[2,2,4],[1,1],[1,1],[1,1],[1,1],[],[],[],[],[1,1],[1,1]]"],\n//   [2, "[[2,2,2,2],[2,2,2,2],[2,2,2,2],[2,2,2,2],[2,2,2,2],[2,2,2,2],[2,2,2,2],[2,2,2,2],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[4],[4],[4],[4],[4],[4],[4],[4],[3],[3],[3],[3],[3],[3],[3],[3],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[1,1,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]"],\n//   [4, "[[2,2],[2,2],[],[],[],[],[1,1],[1,1],[2,2],[2,2],[],[],[],[],[1,1],[1,1],[],[],[2,2],[2,2],[1,1],[1,1],[],[],[],[],[2,2],[2,2],[1,1],[1,1],[],[],[],[],[1,1],[1,1],[2,2],[2,2],[],[],[],[],[1,1],[1,1],[2,2],[2,2],[],[],[1,1],[1,1],[],[],[],[],[2,2],[2,2],[1,1],[1,1],[],[],[],[],[2,2],[2,2]]"],\n//     [4, "[[2],[2],[2],[2],[2],[2],[2],[2],[2],[3],[3],[3],[3],[3],[3],[2],[2],[3],[0],[0],[0],[0],[3],[2],[2],[3],[0],[4],[4],[0],[3],[2],[2],[3],[0],[4],[4],[0],[3],[2],[2],[3],[0],[0],[0],[0],[3],[2],[2],[3],[3],[3],[3],[3],[3],[2],[2],[2],[2],[2],[2],[2],[2],[2]]"],\n//   [6, "[[0],[4],[],[],[],[],[],[],[3],[0,2],[4],[],[],[],[0,2],[],[],[3],[0],[4],[],[],[],[],[],[],[3],[0,2],[4],[],[],[],[],[],[],[3],[0],[4],[],[],[],[],[],[],[3],[0,2],[4],[],[],[0,2],[],[],[],[3],[0],[4],[],[],[],[],[],[],[3],[0]]"],\n//   [6, "[[1,2],[1,2],[1,2],[1,2],[0,2],[],[],[4,2],[4,2],[],[],[],[0,2],[],[],[4,2],[4,2],[],[],[],[0,2],[],[],[4,2],[4,2],[],[],[],[0,2],[],[],[4,2],[4,2],[],[],[],[0,2],[],[],[4,2],[4,2],[],[],[],[0,2],[],[],[4,2],[4,2],[],[],[],[0,2],[],[],[4,2],[4,2],[],[],[],[3,2],[3,2],[3,2],[4,2]]"],\n//   [8, "[[1,1,1],[],[],[],[],[],[],[1,1,1],[],[2],[],[],[],[],[2],[],[],[],[2],[],[],[2],[],[],[],[],[],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[],[],[],[],[],[],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[],[],[],[],[],[2],[],[],[2],[],[],[],[2],[],[],[],[],[2],[],[1,1,1],[],[],[],[],[],[],[1,1,1]]"],\n// ];\nconfigs.targets = [[10, [{ x: 0, y: 0, z: 0, color: "Red" }]]];\n\nconfigs.store = sessionStorage;\n\n/* http://www.colourlovers.com/palette/1473/Ocean_Five */\n// configs.colorMap = {\n//   Red: [204, 51, 63], /* Red */\n//   Orange: [235, 104, 65], /* Orange */\n//   Yellow: [237, 201, 81], /* Yellow */\n//   Cyan: [0, 160, 176], /* Cyan */\n//   Brown: [106, 74, 60], /* Brown */\n// };\n\n/* http://colrd.com/palette/23813/?download=css */\nconfigs.colorMap = {\n  Red: [209, 0, 0],\n  Orange: [255, 102, 34],\n  Yellow: [255, 218, 33],\n  Green: [51, 221, 0],\n  Blue: [17, 51, 204],\n  Black: [10, 10, 10],\n  White: [255, 255, 240],\n  Pink: [255, 20, 147],\n  Brown: [139, 69, 19]\n};\n\n/* harmony default export */ exports["a"] = configs;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvanMvY29uZmlnLmpzPzVhZjAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBTSxVQUFVLEVBQWhCOztBQUVBLElBQUksS0FBSixFQUFzQztBQUNwQyxVQUFRLFVBQVIsR0FBcUIsdUJBQXJCO0FBQ0QsQ0FGRCxNQUVPO0FBQ0wsVUFBUSxVQUFSLEdBQXFCLGtDQUFyQjtBQUNEOztBQUdELFFBQVEsWUFBUixHQUF1Qix1Q0FBdkI7QUFDQSxRQUFRLFFBQVIsR0FBbUIsS0FBbkI7O0FBRUEsUUFBUSxTQUFSLEdBQW9CLEtBQXBCOztBQUVBLFFBQVEsZ0JBQVIsR0FBMkIsVUFBM0I7O0FBRUEsUUFBUSxXQUFSLEdBQXNCLEVBQXRCO0FBQ0EsUUFBUSxhQUFSLEdBQXdCLENBQUMsRUFBRSxHQUFHLENBQUwsRUFBUSxHQUFHLENBQVgsRUFBYyxHQUFHLENBQWpCLEVBQW9CLE9BQU8sS0FBM0IsRUFBa0MsT0FBTyxDQUFDLEdBQUQsQ0FBekMsRUFBRCxDQUF4Qjs7QUFFQSxRQUFRLFVBQVIsR0FBcUIsYUFBckI7QUFDQSxRQUFRLFlBQVIsR0FBdUIsZUFBdkI7QUFDQSxRQUFRLGFBQVIsR0FBd0IsU0FBeEI7QUFDQSxRQUFRLGFBQVIsR0FBd0IsaUJBQXhCO0FBQ0EsUUFBUSxZQUFSLEdBQXVCLFFBQXZCO0FBQ0EsUUFBUSxnQkFBUixHQUEyQixZQUEzQjtBQUNBLFFBQVEsZUFBUixHQUEwQixnQkFBMUI7QUFDQSxRQUFRLGNBQVIsR0FBeUIsV0FBekI7QUFDQSxRQUFRLGVBQVIsR0FBMEIsWUFBMUI7QUFDQSxRQUFRLGNBQVIsR0FBeUIsVUFBekI7QUFDQSxRQUFRLFlBQVIsR0FBdUIsZ0JBQXZCO0FBQ0EsUUFBUSxZQUFSLEdBQXVCLHNCQUF2QjtBQUNBLFFBQVEsa0JBQVIsR0FBNkIsb0JBQTdCO0FBQ0EsUUFBUSxZQUFSLEdBQXVCLFFBQXZCO0FBQ0EsUUFBUSxlQUFSLEdBQTBCLFdBQTFCOztBQUVBLFFBQVEsS0FBUixHQUFnQjtBQUNkLFVBQVEsUUFETTtBQUVkLFlBQVUsb0JBRkk7QUFHZCxhQUFXLFlBSEc7QUFJZCxnQkFBYyxlQUpBO0FBS2QsbUJBQWlCLGtCQUxIO0FBTWQsV0FBUyxTQU5LO0FBT2QsaUJBQWUsZ0JBUEQ7QUFRZCxnQkFBYyxlQVJBO0FBU2QsZ0JBQWMsZUFUQTtBQVVkLGdCQUFjO0FBVkEsQ0FBaEI7O0FBYUEsUUFBUSxPQUFSLEdBQWtCO0FBQ2hCLE1BQUksVUFEWTtBQUVoQixVQUFRLGNBRlE7QUFHaEIsUUFBTSxZQUhVO0FBSWhCLFFBQU0sWUFKVTtBQUtoQixTQUFPLGFBTFM7QUFNaEIsY0FBWSxZQU5JO0FBT2hCLFVBQVEsc0JBUFE7QUFRaEIsZ0JBQWMsd0JBUkU7QUFTaEIsa0JBQWdCLGdCQVRBO0FBVWhCLFFBQU0sYUFWVTtBQVdoQixTQUFPLG9CQVhTO0FBWWhCLGdCQUFjLGNBWkU7QUFhaEIsV0FBUyxlQWJPO0FBY2hCLGFBQVcsWUFkSztBQWVoQixlQUFhO0FBZkcsQ0FBbEI7O0FBa0JBLFFBQVEsVUFBUixHQUFxQixDQUFyQjtBQUNBLFFBQVEsWUFBUixHQUF1QixDQUF2Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUEwQkEsUUFBUSxPQUFSLEdBQWtCLENBQ2hCLENBQUMsRUFBRCxFQUFLLENBQUMsRUFBRSxHQUFHLENBQUwsRUFBUSxHQUFHLENBQVgsRUFBYyxHQUFHLENBQWpCLEVBQW9CLE9BQU8sS0FBM0IsRUFBRCxDQUFMLENBRGdCLENBQWxCOztBQUlBLFFBQVEsS0FBUixHQUFnQixjQUFoQjs7Ozs7Ozs7Ozs7O0FBWUEsUUFBUSxRQUFSLEdBQW1CO0FBQ2pCLE9BQUssQ0FBQyxHQUFELEVBQU0sQ0FBTixFQUFTLENBQVQsQ0FEWTtBQUVqQixVQUFRLENBQUMsR0FBRCxFQUFNLEdBQU4sRUFBVyxFQUFYLENBRlM7QUFHakIsVUFBUSxDQUFDLEdBQUQsRUFBTSxHQUFOLEVBQVcsRUFBWCxDQUhTO0FBSWpCLFNBQU8sQ0FBQyxFQUFELEVBQUssR0FBTCxFQUFVLENBQVYsQ0FKVTtBQUtqQixRQUFNLENBQUMsRUFBRCxFQUFLLEVBQUwsRUFBUyxHQUFULENBTFc7QUFNakIsU0FBTyxDQUFDLEVBQUQsRUFBSyxFQUFMLEVBQVMsRUFBVCxDQU5VO0FBT2pCLFNBQU8sQ0FBQyxHQUFELEVBQU0sR0FBTixFQUFXLEdBQVgsQ0FQVTtBQVFqQixRQUFNLENBQUMsR0FBRCxFQUFNLEVBQU4sRUFBVSxHQUFWLENBUlc7QUFTakIsU0FBTyxDQUFDLEdBQUQsRUFBTSxFQUFOLEVBQVUsRUFBVjtBQVRVLENBQW5COztBQVlBLDRDQUFlLE9BQWYiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNvbmZpZ3MgPSB7fTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImxvY2FsXCIpIHtcbiAgY29uZmlncy5TRU1QUkVfVVJMID0gXCJodHRwOi8vbG9jYWxob3N0Ojg0MDBcIjtcbn0gZWxzZSB7XG4gIGNvbmZpZ3MuU0VNUFJFX1VSTCA9IFwiaHR0cDovL2pvbnNzb24uc3RhbmZvcmQuZWR1Ojg0MDFcIjtcbn1cblxuXG5jb25maWdzLmxvZ2dlclNlcnZlciA9IFwid3M6Ly9oeWRyb2dlbi5zYW1naW5uLmNvbTo0MDAwL3NvY2tldFwiO1xuY29uZmlncy5sb2dnZXJPbiA9IGZhbHNlO1xuXG5jb25maWdzLmRlYnVnTW9kZSA9IGZhbHNlO1xuXG5jb25maWdzLmRlZmF1bHRTZXNzaW9uSWQgPSBcImRlYWRiZWVmXCI7XG5cbmNvbmZpZ3MuZW1wdHlTdHJ1Y3QgPSBbXTtcbmNvbmZpZ3MuZGVmYXVsdFN0cnVjdCA9IFt7IHg6IDAsIHk6IDEsIHo6IDAsIGNvbG9yOiBcIlJlZFwiLCBuYW1lczogW1wic1wiXSB9XTtcblxuY29uZmlncy5tYWluQ2FudmFzID0gXCJtYWluX2NhbnZhc1wiO1xuY29uZmlncy50YXJnZXRDYW52YXMgPSBcInRhcmdldF9jYW52YXNcIjtcbmNvbmZpZ3MuY29uc29sZUVsZW1JZCA9IFwiY29uc29sZVwiO1xuY29uZmlncy5oaXN0b3J5RWxlbUlkID0gXCJjb21tYW5kX2hpc3RvcnlcIjtcbmNvbmZpZ3Muc3RhdHVzRWxlbUlkID0gXCJzdGF0dXNcIjtcbmNvbmZpZ3MuY3VycmVudENtZEVsZW1JZCA9IFwiY3VycmVudGNtZFwiO1xuY29uZmlncy5wb3NzU3RlcHNFbGVtSWQgPSBcInBvc3NpYmxlX3N0ZXBzXCI7XG5jb25maWdzLm1heFN0ZXBzRWxlbUlkID0gXCJtYXhfc3RlcHNcIjtcbmNvbmZpZ3MuY3VyclN0ZXBzRWxlbUlkID0gXCJjdXJyX3N0ZXBzXCI7XG5jb25maWdzLnJlYWN0aW9uRWxlbUlkID0gXCJyZWFjdGlvblwiO1xuY29uZmlncy5kZWZpbmVFbGVtSWQgPSBcImRlZmluZXRleHRhcmVhXCI7XG5jb25maWdzLmRlZmluZUJ1dHRvbiA9IFwiZGVmaW5lX3BocmFzZV9idXR0b25cIjtcbmNvbmZpZ3MuZGVmaW5lUHJvbXB0RWxlbUlkID0gXCJzaG93X2RlZmluZV9zdGF0dXNcIjtcbmNvbmZpZ3MucmFuZG9tRWxlbUlkID0gXCJyYW5kb21cIjtcbmNvbmZpZ3MucmVmZXJlbmNlRWxlbUlkID0gXCJyZWZlcmVuY2VcIjtcblxuY29uZmlncy5lbGVtcyA9IHtcbiAgaGVscE1lOiBcImhlbHBtZVwiLFxuICBrZXlib2FyZDogXCJrZXlib2FyZF9zaG9ydGN1dHNcIixcbiAgY3VyclN0ZXBzOiBcImN1cnJfc3RlcHNcIixcbiAgY29uc29sZUdyb3VwOiBcImNvbnNvbGVfZ3JvdXBcIixcbiAgZGVmaW5lSW50ZXJmYWNlOiBcImRlZmluZV9pbnRlcmZhY2VcIixcbiAgY29uc29sZTogXCJjb25zb2xlXCIsXG4gIGRlZmluZUNvbnNvbGU6IFwiZGVmaW5ldGV4dGFyZWFcIixcbiAgZGVmaW5lU3RhdHVzOiBcImRlZmluZV9zdGF0dXNcIixcbiAgZGVmaW5lSGVhZGVyOiBcImRlZmluZV9oZWFkZXJcIixcbiAgZGVmaW5lUHJvbXB0OiBcImRlZmluZV9wcm9tcHRcIixcbn07XG5cbmNvbmZpZ3MuYnV0dG9ucyA9IHtcbiAgZG86IFwiZG9idXR0b25cIixcbiAgYWNjZXB0OiBcImZseWluZ2FjY2VwdFwiLFxuICBwcmV2OiBcInByZXZidXR0b25cIixcbiAgbmV4dDogXCJuZXh0YnV0dG9uXCIsXG4gIGNsZWFyOiBcImNsZWFyYnV0dG9uXCIsXG4gIHBhcmFwaHJhc2U6IFwicGFyYXBocmFzZVwiLFxuICBkZWZpbmU6IFwiZGVmaW5lX3BocmFzZV9idXR0b25cIixcbiAgY2xvc2VfZGVmaW5lOiBcImNsb3NlX2RlZmluZV9pbnRlcmZhY2VcIixcbiAgZGVmaW5lX2luc3RlYWQ6IFwiZGVmaW5lX2luc3RlYWRcIixcbiAgc2tpcDogXCJza2lwX2J1dHRvblwiLFxuICByZXNldDogXCJyZXNldF9hbGxfcHJvZ3Jlc3NcIixcbiAgdG9nZ2xlRGVmaW5lOiBcInRvZ2dsZWRlZmluZVwiLFxuICBwdXRCYWNrOiBcInB1dGJhY2tidXR0b25cIixcbiAgdHJ5RGVmaW5lOiBcInRyeV9kZWZpbmVcIixcbiAgcm90YXRlSWNvbnM6IFwicm90YXRlLWljb25zXCIsXG59O1xuXG5jb25maWdzLmRpZmZpY3VsdHkgPSAzO1xuY29uZmlncy5kZWZhdWx0U2tpcHMgPSAyO1xuXG4vLyBjb25maWdzLnRhcmdldHMgPSBbXG4vLyAgIFs3LCBcIltbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbMCwwLDAsMCwwLDJdLFs5LDksOSw5LDksMl0sWzksOSw5LDksOSwyXSxbMCwwLDAsMCwwLDIsMiwyLDIsMiwyXSxbXSxbXSxbXSxbXSxbOSw5LDksOSw5LDJdLFs5LDksOSw5LDksMl0sWzksOSw5LDksOSwyXSxbOSw5LDksOSw5LDIsMiwyLDIsMiwyXSxbXSxbXSxbXSxbXSxbOSw5LDksOSw5LDJdLFs5LDksOSw5LDksMl0sWzksOSw5LDksOSwyXSxbOSw5LDksOSw5LDIsMiwyLDIsMiwyXSxbXSxbXSxbXSxbXSxbMCwwLDAsMCwwLDJdLFs5LDksOSw5LDksMl0sWzksOSw5LDksOSwyXSxbMCwwLDAsMCwwLDIsMiwyLDIsMiwyXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXV1cIl0sXG4vLyAgIFs1LCBcIltbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbMCwwXSxbOSwwLDBdLFs5LDksMCwwXSxbOSw5LDksMCwwXSxbOSw5LDksMCwwXSxbOSw5LDksMCwwXSxbOSw5LDksMCwwXSxbOSw5LDksMCwwXSxbMl0sWzldLFs5LDksMl0sWzksOSw5XSxbOSw5LDksMl0sWzksOSw5XSxbOSw5LDksMl0sWzksOSw5XSxbMl0sWzldLFs5LDksMl0sWzksOSw5XSxbOSw5LDksMl0sWzksOSw5XSxbOSw5LDksMl0sWzksOSw5XSxbMCwwXSxbOSwwLDBdLFs5LDksMCwwXSxbOSw5LDksMCwwXSxbOSw5LDksMCwwXSxbOSw5LDksMCwwXSxbOSw5LDksMCwwXSxbOSw5LDksMCwwXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXV1cIl0sXG4vLyAgIFs1LCBcIltbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbMCwwLDAsMl0sW10sW10sW10sW10sW10sW10sW10sWzksOSw5LDIsNl0sW10sW10sW10sW10sW10sW10sW10sWzksOSw5LDIsNiw2LDEwXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbOSw5LDksMiw2XSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbMCwwLDAsMl0sW10sW10sW10sW10sW10sW10sW10sW10sW10sW10sW10sW10sW10sW10sW10sW10sW10sW10sW10sW11dXCJdLFxuLy8gICBbMywgXCJbWzJdLFtdLFtdLFs0XSxbXSxbXSxbMV0sW10sWzIsMl0sW10sW10sWzQsNF0sW10sW10sWzEsMV0sW10sWzIsMiwyXSxbXSxbXSxbNCw0LDRdLFtdLFtdLFsxLDEsMV0sW10sWzIsMiwyLDJdLFtdLFtdLFs0LDQsNCw0XSxbXSxbXSxbMSwxLDEsMV0sW10sWzIsMiwyLDJdLFtdLFtdLFs0LDQsNCw0XSxbXSxbXSxbMSwxLDEsMV0sW10sWzIsMiwyXSxbXSxbXSxbNCw0LDRdLFtdLFtdLFsxLDEsMV0sW10sWzIsMl0sW10sW10sWzQsNF0sW10sW10sWzEsMV0sW10sWzJdLFtdLFtdLFs0XSxbXSxbXSxbMV0sW11dXCJdLFxuLy8gICBbNCwgXCJbWzNdLFsyXSxbMF0sW10sW10sWzBdLFsyXSxbM10sWzJdLFszXSxbMl0sWzBdLFswXSxbMl0sWzNdLFsyXSxbMF0sWzJdLFszXSxbMl0sWzJdLFszXSxbMl0sWzBdLFtdLFswXSxbMl0sWzNdLFszXSxbMl0sWzBdLFtdLFtdLFswXSxbMl0sWzNdLFszXSxbMl0sWzBdLFtdLFswXSxbMl0sWzNdLFsyXSxbMl0sWzNdLFsyXSxbMF0sWzJdLFszXSxbMl0sWzBdLFswXSxbMl0sWzNdLFsyXSxbM10sWzJdLFswXSxbXSxbXSxbMF0sWzJdLFszXV1cIl0sXG4vLyAgIFs1LCBcIltbXSxbXSxbXSxbNCwxLDMsMywzLDMsMywzLDNdLFtdLFtdLFtdLFtdLFtdLFtdLFtdLFsyLDIsMCwzLDMsMywzLDMsM10sW10sW10sW10sW10sW10sW10sW10sWzQsNCw0LDEsMywzLDMsMywzXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbMiwyLDIsMiwwLDMsMywzLDNdLFtdLFtdLFtdLFtdLFtdLFtdLFtdLFs0LDQsNCw0LDQsMSwzLDMsM10sW10sW10sW10sW10sW10sW10sW10sWzIsMiwyLDIsMiwyLDAsMywzXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbNCw0LDQsNCw0LDQsNCwxLDNdLFtdLFtdLFtdLFtdLFtdLFtdLFtdLFsyLDIsMiwyLDIsMiwyLDIsMF0sW10sW10sW10sW11dXCJdLFxuLy8gICBbMywgXCJbWzAsMCwwLDBdLFtdLFtdLFtdLFtdLFtdLFtdLFswLDAsMCwwXSxbMSwxLDEsMSw0LDRdLFtdLFtdLFtdLFtdLFtdLFtdLFsxLDEsMSwxLDQsNF0sWzAsMCwwLDBdLFtdLFtdLFtdLFtdLFtdLFtdLFswLDAsMCwwXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbMCwwLDAsMF0sW10sW10sW10sW10sW10sW10sW10sWzEsMSwxLDEsNCw0XSxbXSxbXSxbXSxbXSxbXSxbXSxbXSxbMCwwLDAsMF0sW10sW10sW10sW10sW10sW10sW10sW10sW10sW10sW11dXCJdLFxuLy8gICBbNCwgXCJbW10sW10sW10sWzFdLFsxXSxbXSxbXSxbXSxbNF0sWzRdLFs0XSxbNCwxXSxbNCwxXSxbNF0sWzRdLFs0XSxbNCwyXSxbNCwyXSxbNCwyXSxbNCwyLDFdLFs0LDIsMV0sWzQsMl0sWzQsMl0sWzQsMl0sWzQsMiwwXSxbNCwyLDBdLFs0LDIsMF0sWzQsMiwwLDFdLFs0LDIsMCwxXSxbNCwyLDBdLFs0LDIsMF0sWzQsMiwwXSxbNCwyLDBdLFs0LDIsMF0sWzQsMiwwXSxbNCwyLDAsMV0sWzQsMiwwLDFdLFs0LDIsMF0sWzQsMiwwXSxbNCwyLDBdLFs0LDJdLFs0LDJdLFs0LDJdLFs0LDIsMV0sWzQsMiwxXSxbNCwyXSxbNCwyXSxbNCwyXSxbNF0sWzRdLFs0XSxbNCwxXSxbNCwxXSxbNF0sWzRdLFs0XSxbXSxbXSxbXSxbMV0sWzFdLFtdLFtdLFtdXVwiXSxcbi8vICAgWzQsIFwiW1syXSxbMiwwXSxbMiwwLDRdLFsyLDAsNCwzXSxbMiwwLDQsM10sWzIsMCw0XSxbMiwwXSxbMl0sWzJdLFsyLDBdLFsyLDAsNF0sWzIsMCw0LDNdLFsyLDAsNCwzXSxbMiwwLDRdLFsyLDBdLFsyXSxbMl0sWzIsMF0sWzIsMCw0XSxbMiwwLDQsM10sWzIsMCw0LDNdLFsyLDAsNF0sWzIsMF0sWzJdLFsyXSxbMiwwXSxbMiwwLDRdLFsyLDAsNCwzXSxbMiwwLDQsM10sWzIsMCw0XSxbMiwwXSxbMl0sWzJdLFsyLDBdLFsyLDAsNF0sWzIsMCw0LDNdLFsyLDAsNCwzXSxbMiwwLDRdLFsyLDBdLFsyXSxbMl0sWzIsMF0sWzIsMCw0XSxbMiwwLDQsM10sWzIsMCw0LDNdLFsyLDAsNF0sWzIsMF0sWzJdLFsyXSxbMiwwXSxbMiwwLDRdLFsyLDAsNCwzXSxbMiwwLDQsM10sWzIsMCw0XSxbMiwwXSxbMl0sWzJdLFsyLDBdLFsyLDAsNF0sWzIsMCw0LDNdLFsyLDAsNCwzXSxbMiwwLDRdLFsyLDBdLFsyXV1cIl0sXG4vLyAgIFsyLCBcIltbMF0sWzBdLFswXSxbMiwwXSxbMiwyLDBdLFsyLDIsMiwwXSxbMiwyLDIsMiwwXSxbMiwyLDIsMiwyLDBdLFtdLFtdLFtdLFsyXSxbMiwyXSxbMiwyLDJdLFsyLDIsMiwyXSxbMiwyLDIsMiwyXSxbMF0sWzBdLFswXSxbMiwwXSxbMiwyLDBdLFsyLDIsMiwwXSxbMiwyLDIsMiwwXSxbMiwyLDIsMiwyLDBdLFtdLFtdLFtdLFsyXSxbMiwyXSxbMiwyLDJdLFsyLDIsMiwyXSxbMiwyLDIsMiwyXSxbMF0sWzBdLFswXSxbMiwwXSxbMiwyLDBdLFsyLDIsMiwwXSxbMiwyLDIsMiwwXSxbMiwyLDIsMiwyLDBdLFtdLFtdLFtdLFsyXSxbMiwyXSxbMiwyLDJdLFsyLDIsMiwyXSxbMiwyLDIsMiwyXSxbMF0sWzBdLFswXSxbMiwwXSxbMiwyLDBdLFsyLDIsMiwwXSxbMiwyLDIsMiwwXSxbMiwyLDIsMiwyLDBdLFtdLFtdLFtdLFsyXSxbMiwyXSxbMiwyLDJdLFsyLDIsMiwyXSxbMiwyLDIsMiwyXV1cIl0sXG4vLyAgIFsyLCBcIltbMiwyLDJdLFtdLFtdLFtdLFsyLDIsMl0sW10sW10sW10sWzIsMiwyLDBdLFtdLFtdLFtdLFsyLDIsMiwwXSxbXSxbXSxbXSxbMiwyLDJdLFtdLFtdLFtdLFsyLDIsMl0sW10sW10sW10sWzIsMiwyLDBdLFtdLFtdLFtdLFsyLDIsMiwwXSxbXSxbXSxbXSxbMiwyLDJdLFtdLFtdLFtdLFsyLDIsMl0sW10sW10sW10sWzIsMiwyLDBdLFtdLFtdLFtdLFsyLDIsMiwwXSxbXSxbXSxbXSxbMiwyLDJdLFtdLFtdLFtdLFsyLDIsMl0sW10sW10sW10sWzIsMiwyLDBdLFtdLFtdLFtdLFsyLDIsMiwwXSxbXSxbXSxbXV1cIl0sXG4vLyAgIFszLCBcIltbNF0sWzRdLFs0XSxbNF0sWzRdLFs0XSxbNF0sWzRdLFsyXSxbMF0sWzJdLFswXSxbMl0sWzBdLFsyXSxbMF0sWzJdLFswXSxbMl0sWzBdLFsyXSxbMF0sWzJdLFswXSxbMl0sWzBdLFsyXSxbMF0sWzJdLFswXSxbMl0sWzBdLFsyXSxbMF0sWzJdLFswXSxbMl0sWzBdLFsyXSxbMF0sWzJdLFswXSxbMl0sWzBdLFsyXSxbMF0sWzJdLFswXSxbMl0sWzBdLFsyXSxbMF0sWzJdLFswXSxbMl0sWzBdLFs0XSxbNF0sWzRdLFs0XSxbNF0sWzRdLFs0XSxbNF1dXCJdLFxuLy8gICBbNSwgXCJbWzIsMiwyXSxbMiwyLDIsMF0sWzIsMiwyXSxbMiwyLDIsMF0sWzIsMiwyXSxbMiwyLDIsMF0sWzIsMiwyXSxbMiwyLDIsMF0sW10sW10sW10sW10sW10sW10sW10sW10sWzEsMSwxXSxbMSwxLDEsMF0sWzEsMSwxXSxbMSwxLDEsMF0sWzEsMSwxXSxbMSwxLDEsMF0sWzEsMSwxXSxbMSwxLDEsMF0sW10sW10sW10sW10sW10sW10sW10sW10sWzQsNCw0XSxbNCw0LDQsMF0sWzQsNCw0XSxbNCw0LDQsMF0sWzQsNCw0XSxbNCw0LDQsMF0sWzQsNCw0XSxbNCw0LDQsMF0sW10sW10sW10sW10sW10sW10sW10sW10sWzMsMywzXSxbMywzLDMsMF0sWzMsMywzXSxbMywzLDMsMF0sWzMsMywzXSxbMywzLDMsMF0sWzMsMywzXSxbMywzLDMsMF0sW10sW10sW10sW10sW10sW10sW10sW11dXCJdLFxuLy8gICBbNSwgXCJbWzIsMiwyXSxbMiwyLDIsMF0sWzIsMiwyXSxbMiwyLDIsMF0sWzIsMiwyXSxbMiwyLDIsMF0sWzIsMiwyXSxbMiwyLDIsMF0sWzQsNCw0XSxbMV0sWzFdLFsxXSxbMV0sWzFdLFsxXSxbMSwzXSxbNCw0LDRdLFsxXSxbMV0sWzFdLFsxXSxbMV0sWzFdLFsxLDNdLFs0LDQsNF0sWzFdLFsxXSxbMV0sWzFdLFsxXSxbMV0sWzEsM10sWzQsNCw0XSxbMV0sWzFdLFsxXSxbMV0sWzFdLFsxXSxbMSwzXSxbNCw0LDRdLFsxXSxbMV0sWzFdLFsxXSxbMV0sWzFdLFsxLDNdLFs0LDQsNF0sWzFdLFsxXSxbMV0sWzFdLFsxXSxbMV0sWzEsM10sWzIsMiwyXSxbMiwyLDIsMF0sWzIsMiwyXSxbMiwyLDIsMF0sWzIsMiwyXSxbMiwyLDIsMF0sWzIsMiwyXSxbMiwyLDIsMF1dXCJdLFxuLy8gICBbNCwgXCJbWzRdLFs0XSxbNF0sWzRdLFs0XSxbNF0sWzRdLFs0XSxbNF0sWzQsM10sWzQsM10sWzQsM10sWzQsM10sWzQsM10sWzQsM10sWzRdLFs0XSxbNCwzXSxbNCwzLDJdLFs0LDMsMl0sWzQsMywyXSxbNCwzLDJdLFs0LDNdLFs0XSxbNF0sWzQsM10sWzQsMywyXSxbNCwzLDIsMF0sWzQsMywyLDBdLFs0LDMsMl0sWzQsM10sWzRdLFs0XSxbNCwzXSxbNCwzLDJdLFs0LDMsMiwwXSxbNCwzLDIsMF0sWzQsMywyXSxbNCwzXSxbNF0sWzRdLFs0LDNdLFs0LDMsMl0sWzQsMywyXSxbNCwzLDJdLFs0LDMsMl0sWzQsM10sWzRdLFs0XSxbNCwzXSxbNCwzXSxbNCwzXSxbNCwzXSxbNCwzXSxbNCwzXSxbNF0sWzRdLFs0XSxbNF0sWzRdLFs0XSxbNF0sWzRdLFs0XV1cIl0sXG4vLyAgICBbNCwgXCJbWzEsMV0sWzEsMV0sW10sW10sW10sW10sWzEsMV0sWzEsMV0sWzEsMV0sWzEsMV0sWzIsMiw0XSxbMiwyLDQsMF0sWzIsMiw0LDBdLFsyLDIsNF0sWzEsMV0sWzEsMV0sW10sW10sWzIsMiw0XSxbMiwyLDQsMF0sWzIsMiw0LDBdLFsyLDIsNF0sW10sW10sW10sW10sWzIsMiw0XSxbMiwyLDQsMF0sWzIsMiw0LDBdLFsyLDIsNF0sW10sW10sW10sW10sWzIsMiw0XSxbMiwyLDQsMF0sWzIsMiw0LDBdLFsyLDIsNF0sW10sW10sW10sW10sWzIsMiw0XSxbMiwyLDQsMF0sWzIsMiw0LDBdLFsyLDIsNF0sW10sW10sWzEsMV0sWzEsMV0sWzIsMiw0XSxbMiwyLDQsMF0sWzIsMiw0LDBdLFsyLDIsNF0sWzEsMV0sWzEsMV0sWzEsMV0sWzEsMV0sW10sW10sW10sW10sWzEsMV0sWzEsMV1dXCJdLFxuLy8gICBbMiwgXCJbWzIsMiwyLDJdLFsyLDIsMiwyXSxbMiwyLDIsMl0sWzIsMiwyLDJdLFsyLDIsMiwyXSxbMiwyLDIsMl0sWzIsMiwyLDJdLFsyLDIsMiwyXSxbMSwxLDFdLFsxLDEsMV0sWzEsMSwxXSxbMSwxLDFdLFsxLDEsMV0sWzEsMSwxXSxbMSwxLDFdLFsxLDEsMV0sWzAsMF0sWzAsMF0sWzAsMF0sWzAsMF0sWzAsMF0sWzAsMF0sWzAsMF0sWzAsMF0sWzRdLFs0XSxbNF0sWzRdLFs0XSxbNF0sWzRdLFs0XSxbM10sWzNdLFszXSxbM10sWzNdLFszXSxbM10sWzNdLFsyLDJdLFsyLDJdLFsyLDJdLFsyLDJdLFsyLDJdLFsyLDJdLFsyLDJdLFsyLDJdLFsxLDEsMV0sWzEsMSwxXSxbMSwxLDFdLFsxLDEsMV0sWzEsMSwxXSxbMSwxLDFdLFsxLDEsMV0sWzEsMSwxXSxbMCwwLDAsMF0sWzAsMCwwLDBdLFswLDAsMCwwXSxbMCwwLDAsMF0sWzAsMCwwLDBdLFswLDAsMCwwXSxbMCwwLDAsMF0sWzAsMCwwLDBdXVwiXSxcbi8vICAgWzQsIFwiW1syLDJdLFsyLDJdLFtdLFtdLFtdLFtdLFsxLDFdLFsxLDFdLFsyLDJdLFsyLDJdLFtdLFtdLFtdLFtdLFsxLDFdLFsxLDFdLFtdLFtdLFsyLDJdLFsyLDJdLFsxLDFdLFsxLDFdLFtdLFtdLFtdLFtdLFsyLDJdLFsyLDJdLFsxLDFdLFsxLDFdLFtdLFtdLFtdLFtdLFsxLDFdLFsxLDFdLFsyLDJdLFsyLDJdLFtdLFtdLFtdLFtdLFsxLDFdLFsxLDFdLFsyLDJdLFsyLDJdLFtdLFtdLFsxLDFdLFsxLDFdLFtdLFtdLFtdLFtdLFsyLDJdLFsyLDJdLFsxLDFdLFsxLDFdLFtdLFtdLFtdLFtdLFsyLDJdLFsyLDJdXVwiXSxcbi8vICAgICBbNCwgXCJbWzJdLFsyXSxbMl0sWzJdLFsyXSxbMl0sWzJdLFsyXSxbMl0sWzNdLFszXSxbM10sWzNdLFszXSxbM10sWzJdLFsyXSxbM10sWzBdLFswXSxbMF0sWzBdLFszXSxbMl0sWzJdLFszXSxbMF0sWzRdLFs0XSxbMF0sWzNdLFsyXSxbMl0sWzNdLFswXSxbNF0sWzRdLFswXSxbM10sWzJdLFsyXSxbM10sWzBdLFswXSxbMF0sWzBdLFszXSxbMl0sWzJdLFszXSxbM10sWzNdLFszXSxbM10sWzNdLFsyXSxbMl0sWzJdLFsyXSxbMl0sWzJdLFsyXSxbMl0sWzJdXVwiXSxcbi8vICAgWzYsIFwiW1swXSxbNF0sW10sW10sW10sW10sW10sW10sWzNdLFswLDJdLFs0XSxbXSxbXSxbXSxbMCwyXSxbXSxbXSxbM10sWzBdLFs0XSxbXSxbXSxbXSxbXSxbXSxbXSxbM10sWzAsMl0sWzRdLFtdLFtdLFtdLFtdLFtdLFtdLFszXSxbMF0sWzRdLFtdLFtdLFtdLFtdLFtdLFtdLFszXSxbMCwyXSxbNF0sW10sW10sWzAsMl0sW10sW10sW10sWzNdLFswXSxbNF0sW10sW10sW10sW10sW10sW10sWzNdLFswXV1cIl0sXG4vLyAgIFs2LCBcIltbMSwyXSxbMSwyXSxbMSwyXSxbMSwyXSxbMCwyXSxbXSxbXSxbNCwyXSxbNCwyXSxbXSxbXSxbXSxbMCwyXSxbXSxbXSxbNCwyXSxbNCwyXSxbXSxbXSxbXSxbMCwyXSxbXSxbXSxbNCwyXSxbNCwyXSxbXSxbXSxbXSxbMCwyXSxbXSxbXSxbNCwyXSxbNCwyXSxbXSxbXSxbXSxbMCwyXSxbXSxbXSxbNCwyXSxbNCwyXSxbXSxbXSxbXSxbMCwyXSxbXSxbXSxbNCwyXSxbNCwyXSxbXSxbXSxbXSxbMCwyXSxbXSxbXSxbNCwyXSxbNCwyXSxbXSxbXSxbXSxbMywyXSxbMywyXSxbMywyXSxbNCwyXV1cIl0sXG4vLyAgIFs4LCBcIltbMSwxLDFdLFtdLFtdLFtdLFtdLFtdLFtdLFsxLDEsMV0sW10sWzJdLFtdLFtdLFtdLFtdLFsyXSxbXSxbXSxbXSxbMl0sW10sW10sWzJdLFtdLFtdLFtdLFtdLFtdLFswLDAsMCwwLDAsMCwwLDBdLFswLDAsMCwwLDAsMCwwLDBdLFtdLFtdLFtdLFtdLFtdLFtdLFswLDAsMCwwLDAsMCwwLDBdLFswLDAsMCwwLDAsMCwwLDBdLFtdLFtdLFtdLFtdLFtdLFsyXSxbXSxbXSxbMl0sW10sW10sW10sWzJdLFtdLFtdLFtdLFtdLFsyXSxbXSxbMSwxLDFdLFtdLFtdLFtdLFtdLFtdLFtdLFsxLDEsMV1dXCJdLFxuLy8gXTtcbmNvbmZpZ3MudGFyZ2V0cyA9IFtcbiAgWzEwLCBbeyB4OiAwLCB5OiAwLCB6OiAwLCBjb2xvcjogXCJSZWRcIiB9XV0sXG5dO1xuXG5jb25maWdzLnN0b3JlID0gc2Vzc2lvblN0b3JhZ2U7XG5cbi8qIGh0dHA6Ly93d3cuY29sb3VybG92ZXJzLmNvbS9wYWxldHRlLzE0NzMvT2NlYW5fRml2ZSAqL1xuLy8gY29uZmlncy5jb2xvck1hcCA9IHtcbi8vICAgUmVkOiBbMjA0LCA1MSwgNjNdLCAvKiBSZWQgKi9cbi8vICAgT3JhbmdlOiBbMjM1LCAxMDQsIDY1XSwgLyogT3JhbmdlICovXG4vLyAgIFllbGxvdzogWzIzNywgMjAxLCA4MV0sIC8qIFllbGxvdyAqL1xuLy8gICBDeWFuOiBbMCwgMTYwLCAxNzZdLCAvKiBDeWFuICovXG4vLyAgIEJyb3duOiBbMTA2LCA3NCwgNjBdLCAvKiBCcm93biAqL1xuLy8gfTtcblxuLyogaHR0cDovL2NvbHJkLmNvbS9wYWxldHRlLzIzODEzLz9kb3dubG9hZD1jc3MgKi9cbmNvbmZpZ3MuY29sb3JNYXAgPSB7XG4gIFJlZDogWzIwOSwgMCwgMF0sXG4gIE9yYW5nZTogWzI1NSwgMTAyLCAzNF0sXG4gIFllbGxvdzogWzI1NSwgMjE4LCAzM10sXG4gIEdyZWVuOiBbNTEsIDIyMSwgMF0sXG4gIEJsdWU6IFsxNywgNTEsIDIwNF0sXG4gIEJsYWNrOiBbMTAsIDEwLCAxMF0sXG4gIFdoaXRlOiBbMjU1LCAyNTUsIDI0MF0sXG4gIFBpbms6IFsyNTUsIDIwLCAxNDddLFxuICBCcm93bjogWzEzOSwgNjksIDE5XVxufTtcblxuZXhwb3J0IGRlZmF1bHQgY29uZmlncztcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9qcy9jb25maWcuanMiXSwic291cmNlUm9vdCI6IiJ9');
},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__config__ = __webpack_require__(0);\n/* harmony export */ exports["d"] = getHistoryElems;/* harmony export */ exports["c"] = emojione;/* harmony export */ exports["b"] = setStore;/* harmony export */ exports["a"] = getStore;/* harmony export */ exports["e"] = resetStore;\n\nfunction getHistoryElems() {\n  return document.querySelectorAll("#command_history > div[data-type=\'accept\'], #command_history > div[data-type=\'initial\']");\n}\n\nfunction emojione(num) {\n  var emojioneList = {\n    ":scream:": ["1f631"],\n    ":astonished:": ["1f632"],\n    ":confused:": ["1f615"],\n    ":rolling_eyes:": ["1f644"],\n    ":relieved:": ["1f60c"],\n    ":relaxed:": ["263a"],\n    ":neutral_face:": ["1f610"],\n    ":slight_smile:": ["1f642"],\n    ":smiley:": ["1f603"],\n    ":grinning:": ["1f600"]\n  };\n\n  var numToShort = {\n    6: ":scream:",\n    5: ":astonished:",\n    4: ":confused:",\n    3: ":rolling_eyes:",\n    2: ":relieved:",\n    1: ":relaxed:",\n    0: ":smiley:"\n  };\n\n  var imagePathPNG = "http:\\/\\/cdn.jsdelivr.net\\/emojione\\/assets\\/png\\/";\n  var imagePathSVG = "http:\\/\\/cdn.jsdelivr.net\\/emojione\\/assets\\/svg\\/";\n  var cacheBustParam = "";\n  var imageType = "png"; // png or svg\n\n  var shortname = numToShort[num];\n  var unicode = emojioneList[shortname][emojioneList[shortname].length - 1];\n  var alt = shortname;\n\n  var replaceWith = "";\n  if (imageType === "png") {\n    replaceWith = "<img class=\\"emojione\\" alt=\\"" + alt + "\\" src=\\"" + imagePathPNG + unicode + ".png\\" />";\n  } else {\n    replaceWith = "<object class=\\"emojione\\" data=\\"" + imagePathSVG + unicode + ".svg\\" type=\\"image/svg+xml\\" standby=\\"" + alt + "\\">" + alt + "</object";\n  }\n\n  return replaceWith;\n}\n\nfunction setStore(name, value) {\n  var jsonValue = JSON.stringify(value);\n  __WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].store.setItem(name, jsonValue);\n}\n\nfunction getStore(name) {\n  var defaultValue = arguments.length <= 1 || arguments[1] === undefined ? "" : arguments[1];\n\n  var value = __WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].store.getItem(name);\n  if (!value) {\n    return defaultValue;\n  }\n  return JSON.parse(value);\n}\n\nfunction resetStore() {\n  __WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].store.clear();\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvanMvdXRpbC5qcz82ZTYxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7ME9BQUE7O0FBRU8sU0FBUyxlQUFULEdBQTJCO0FBQ2hDLFNBQU8sU0FBUyxnQkFBVCxDQUEwQix5RkFBMUIsQ0FBUDtBQUNEOztBQUVNLFNBQVMsUUFBVCxDQUFrQixHQUFsQixFQUF1QjtBQUM1QixNQUFNLGVBQWU7QUFDbkIsZ0JBQVksQ0FBQyxPQUFELENBRE87QUFFbkIsb0JBQWdCLENBQUMsT0FBRCxDQUZHO0FBR25CLGtCQUFjLENBQUMsT0FBRCxDQUhLO0FBSW5CLHNCQUFrQixDQUFDLE9BQUQsQ0FKQztBQUtuQixrQkFBYyxDQUFDLE9BQUQsQ0FMSztBQU1uQixpQkFBYSxDQUFDLE1BQUQsQ0FOTTtBQU9uQixzQkFBa0IsQ0FBQyxPQUFELENBUEM7QUFRbkIsc0JBQWtCLENBQUMsT0FBRCxDQVJDO0FBU25CLGdCQUFZLENBQUMsT0FBRCxDQVRPO0FBVW5CLGtCQUFjLENBQUMsT0FBRDtBQVZLLEdBQXJCOztBQWFBLE1BQU0sYUFBYTtBQUNqQixPQUFHLFVBRGM7QUFFakIsT0FBRyxjQUZjO0FBR2pCLE9BQUcsWUFIYztBQUlqQixPQUFHLGdCQUpjO0FBS2pCLE9BQUcsWUFMYztBQU1qQixPQUFHLFdBTmM7QUFPakIsT0FBRztBQVBjLEdBQW5COztBQVVBLE1BQU0sZUFBZSxvREFBckI7QUFDQSxNQUFNLGVBQWUsb0RBQXJCO0FBQ0EsTUFBTSxpQkFBaUIsRUFBdkI7QUFDQSxNQUFNLFlBQVksS0FBbEIsQzs7QUFFQSxNQUFNLFlBQVksV0FBVyxHQUFYLENBQWxCO0FBQ0EsTUFBTSxVQUFVLGFBQWEsU0FBYixFQUF3QixhQUFhLFNBQWIsRUFBd0IsTUFBeEIsR0FBaUMsQ0FBekQsQ0FBaEI7QUFDQSxNQUFNLE1BQU0sU0FBWjs7QUFFQSxNQUFJLGNBQWMsRUFBbEI7QUFDQSxNQUFJLGNBQWMsS0FBbEIsRUFBeUI7QUFDdkIscURBQTRDLEdBQTVDLGlCQUF5RCxZQUF6RCxHQUF3RSxPQUF4RTtBQUNELEdBRkQsTUFFTztBQUNMLHlEQUFnRCxZQUFoRCxHQUErRCxPQUEvRCxnREFBNkcsR0FBN0csV0FBcUgsR0FBckg7QUFDRDs7QUFFRCxTQUFPLFdBQVA7QUFDRDs7QUFFTSxTQUFTLFFBQVQsQ0FBa0IsSUFBbEIsRUFBd0IsS0FBeEIsRUFBK0I7QUFDcEMsTUFBTSxZQUFZLEtBQUssU0FBTCxDQUFlLEtBQWYsQ0FBbEI7QUFDQSwyREFBUSxLQUFSLENBQWMsT0FBZCxDQUFzQixJQUF0QixFQUE0QixTQUE1QjtBQUNEOztBQUVNLFNBQVMsUUFBVCxDQUFrQixJQUFsQixFQUEyQztBQUFBLE1BQW5CLFlBQW1CLHlEQUFKLEVBQUk7O0FBQ2hELE1BQU0sUUFBUSx5REFBUSxLQUFSLENBQWMsT0FBZCxDQUFzQixJQUF0QixDQUFkO0FBQ0EsTUFBSSxDQUFDLEtBQUwsRUFBWTtBQUNWLFdBQU8sWUFBUDtBQUNEO0FBQ0QsU0FBTyxLQUFLLEtBQUwsQ0FBVyxLQUFYLENBQVA7QUFDRDs7QUFFTSxTQUFTLFVBQVQsR0FBc0I7QUFDM0IsMkRBQVEsS0FBUixDQUFjLEtBQWQ7QUFDRCIsImZpbGUiOiIxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbmZpZ3MgZnJvbSBcIi4vY29uZmlnXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRIaXN0b3J5RWxlbXMoKSB7XG4gIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI2NvbW1hbmRfaGlzdG9yeSA+IGRpdltkYXRhLXR5cGU9J2FjY2VwdCddLCAjY29tbWFuZF9oaXN0b3J5ID4gZGl2W2RhdGEtdHlwZT0naW5pdGlhbCddXCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZW1vamlvbmUobnVtKSB7XG4gIGNvbnN0IGVtb2ppb25lTGlzdCA9IHtcbiAgICBcIjpzY3JlYW06XCI6IFtcIjFmNjMxXCJdLFxuICAgIFwiOmFzdG9uaXNoZWQ6XCI6IFtcIjFmNjMyXCJdLFxuICAgIFwiOmNvbmZ1c2VkOlwiOiBbXCIxZjYxNVwiXSxcbiAgICBcIjpyb2xsaW5nX2V5ZXM6XCI6IFtcIjFmNjQ0XCJdLFxuICAgIFwiOnJlbGlldmVkOlwiOiBbXCIxZjYwY1wiXSxcbiAgICBcIjpyZWxheGVkOlwiOiBbXCIyNjNhXCJdLFxuICAgIFwiOm5ldXRyYWxfZmFjZTpcIjogW1wiMWY2MTBcIl0sXG4gICAgXCI6c2xpZ2h0X3NtaWxlOlwiOiBbXCIxZjY0MlwiXSxcbiAgICBcIjpzbWlsZXk6XCI6IFtcIjFmNjAzXCJdLFxuICAgIFwiOmdyaW5uaW5nOlwiOiBbXCIxZjYwMFwiXSxcbiAgfTtcblxuICBjb25zdCBudW1Ub1Nob3J0ID0ge1xuICAgIDY6IFwiOnNjcmVhbTpcIixcbiAgICA1OiBcIjphc3RvbmlzaGVkOlwiLFxuICAgIDQ6IFwiOmNvbmZ1c2VkOlwiLFxuICAgIDM6IFwiOnJvbGxpbmdfZXllczpcIixcbiAgICAyOiBcIjpyZWxpZXZlZDpcIixcbiAgICAxOiBcIjpyZWxheGVkOlwiLFxuICAgIDA6IFwiOnNtaWxleTpcIixcbiAgfTtcblxuICBjb25zdCBpbWFnZVBhdGhQTkcgPSBcImh0dHA6XFwvXFwvY2RuLmpzZGVsaXZyLm5ldFxcL2Vtb2ppb25lXFwvYXNzZXRzXFwvcG5nXFwvXCI7XG4gIGNvbnN0IGltYWdlUGF0aFNWRyA9IFwiaHR0cDpcXC9cXC9jZG4uanNkZWxpdnIubmV0XFwvZW1vamlvbmVcXC9hc3NldHNcXC9zdmdcXC9cIjtcbiAgY29uc3QgY2FjaGVCdXN0UGFyYW0gPSBcIlwiO1xuICBjb25zdCBpbWFnZVR5cGUgPSBcInBuZ1wiOyAvLyBwbmcgb3Igc3ZnXG5cbiAgY29uc3Qgc2hvcnRuYW1lID0gbnVtVG9TaG9ydFtudW1dO1xuICBjb25zdCB1bmljb2RlID0gZW1vamlvbmVMaXN0W3Nob3J0bmFtZV1bZW1vamlvbmVMaXN0W3Nob3J0bmFtZV0ubGVuZ3RoIC0gMV07XG4gIGNvbnN0IGFsdCA9IHNob3J0bmFtZTtcblxuICBsZXQgcmVwbGFjZVdpdGggPSBcIlwiO1xuICBpZiAoaW1hZ2VUeXBlID09PSBcInBuZ1wiKSB7XG4gICAgcmVwbGFjZVdpdGggPSBgPGltZyBjbGFzcz1cImVtb2ppb25lXCIgYWx0PVwiJHthbHR9XCIgc3JjPVwiJHtpbWFnZVBhdGhQTkd9JHt1bmljb2RlfS5wbmdcIiAvPmA7XG4gIH0gZWxzZSB7XG4gICAgcmVwbGFjZVdpdGggPSBgPG9iamVjdCBjbGFzcz1cImVtb2ppb25lXCIgZGF0YT1cIiR7aW1hZ2VQYXRoU1ZHfSR7dW5pY29kZX0uc3ZnXCIgdHlwZT1cImltYWdlL3N2Zyt4bWxcIiBzdGFuZGJ5PVwiJHthbHR9XCI+JHthbHR9PC9vYmplY3RgO1xuICB9XG5cbiAgcmV0dXJuIHJlcGxhY2VXaXRoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0U3RvcmUobmFtZSwgdmFsdWUpIHtcbiAgY29uc3QganNvblZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICBjb25maWdzLnN0b3JlLnNldEl0ZW0obmFtZSwganNvblZhbHVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN0b3JlKG5hbWUsIGRlZmF1bHRWYWx1ZSA9IFwiXCIpIHtcbiAgY29uc3QgdmFsdWUgPSBjb25maWdzLnN0b3JlLmdldEl0ZW0obmFtZSk7XG4gIGlmICghdmFsdWUpIHtcbiAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICB9XG4gIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0U3RvcmUoKSB7XG4gIGNvbmZpZ3Muc3RvcmUuY2xlYXIoKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9qcy91dGlsLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==')},function(module,exports){eval("function Point(x, y, z) {\n  if (this instanceof Point) {\n    this.x = (typeof x === 'number') ? x : 0;\n    this.y = (typeof y === 'number') ? y : 0;\n    this.z = (typeof z === 'number') ? z : 0;\n  } else {\n    return new Point(x, y, z);\n  }\n}\n\n\nPoint.ORIGIN = new Point(0, 0, 0);\n\n\n/**\n * Translate a point from a given dx, dy, and dz\n */\nPoint.prototype.translate = function(dx, dy, dz) {\n\n  dx = (typeof dx === 'number') ? dx : 0;\n  dy = (typeof dy === 'number') ? dy : 0;\n  dz = (typeof dz === 'number') ? dz : 0;\n\n  return new Point(\n    this.x + dx,\n    this.y + dy,\n    this.z + dz);\n};\n\n\n/**\n * Scale a point about a given origin\n */\nPoint.prototype.scale = function(origin, dx, dy, dz) {\n  var p = this.translate(-origin.x, -origin.y, -origin.z);\n\n  if (dy === undefined && dz === undefined) {\n    /* If both dy and dz are left out, scale all coordinates equally */\n    dy = dz = dx;\n    /* If just dz is missing, set it equal to 1 */\n  } else {\n    dz = (typeof dz === 'number') ? dz : 1;\n  }\n\n  p.x *= dx;\n  p.y *= dy;\n  p.z *= dz;\n\n  return p.translate(origin.x, origin.y, origin.z);\n};\n\n/**\n * Rotate about origin on the X axis\n */\nPoint.prototype.rotateX = function(origin, angle) {\n  var p = this.translate(-origin.x, -origin.y, -origin.z);\n\n  var z = p.z * Math.cos(angle) - p.y * Math.sin(angle);\n  var y = p.z * Math.sin(angle) + p.y * Math.cos(angle);\n  p.z = z;\n  p.y = y;\n\n  return p.translate(origin.x, origin.y, origin.z);\n};\n\n/**\n * Rotate about origin on the Y axis\n */\nPoint.prototype.rotateY = function(origin, angle) {\n  var p = this.translate(-origin.x, -origin.y, -origin.z);\n\n  var x = p.x * Math.cos(angle) - p.z * Math.sin(angle);\n  var z = p.x * Math.sin(angle) + p.z * Math.cos(angle);\n  p.x = x;\n  p.z = z;\n\n  return p.translate(origin.x, origin.y, origin.z);\n};\n\n/**\n * Rotate about origin on the Z axis\n */\nPoint.prototype.rotateZ = function(origin, angle) {\n  var p = this.translate(-origin.x, -origin.y, -origin.z);\n\n  var x = p.x * Math.cos(angle) - p.y * Math.sin(angle);\n  var y = p.x * Math.sin(angle) + p.y * Math.cos(angle);\n  p.x = x;\n  p.y = y;\n\n  return p.translate(origin.x, origin.y, origin.z);\n};\n\n\n/**\n * The depth of a point in the isometric plane\n */\nPoint.prototype.depth = function() {\n  /* z is weighted slightly to accomodate |_ arrangements */\n  return this.x + this.y - 2 * this.z;\n};\n\n\n/**\n * Distance between two points\n */\nPoint.distance = function(p1, p2) {\n  var dx = p2.x - p1.x;\n  var dy = p2.y - p1.y;\n  var dz = p2.z - p1.z;\n\n  return Math.sqrt(dx * dx + dy * dy + dz * dz);\n};\n\n\nmodule.exports = Point;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L2lzb21lci9qcy9wb2ludC5qcz9iNDMxIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOzs7QUFHQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBIiwiZmlsZSI6IjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBQb2ludCh4LCB5LCB6KSB7XG4gIGlmICh0aGlzIGluc3RhbmNlb2YgUG9pbnQpIHtcbiAgICB0aGlzLnggPSAodHlwZW9mIHggPT09ICdudW1iZXInKSA/IHggOiAwO1xuICAgIHRoaXMueSA9ICh0eXBlb2YgeSA9PT0gJ251bWJlcicpID8geSA6IDA7XG4gICAgdGhpcy56ID0gKHR5cGVvZiB6ID09PSAnbnVtYmVyJykgPyB6IDogMDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IFBvaW50KHgsIHksIHopO1xuICB9XG59XG5cblxuUG9pbnQuT1JJR0lOID0gbmV3IFBvaW50KDAsIDAsIDApO1xuXG5cbi8qKlxuICogVHJhbnNsYXRlIGEgcG9pbnQgZnJvbSBhIGdpdmVuIGR4LCBkeSwgYW5kIGR6XG4gKi9cblBvaW50LnByb3RvdHlwZS50cmFuc2xhdGUgPSBmdW5jdGlvbihkeCwgZHksIGR6KSB7XG5cbiAgZHggPSAodHlwZW9mIGR4ID09PSAnbnVtYmVyJykgPyBkeCA6IDA7XG4gIGR5ID0gKHR5cGVvZiBkeSA9PT0gJ251bWJlcicpID8gZHkgOiAwO1xuICBkeiA9ICh0eXBlb2YgZHogPT09ICdudW1iZXInKSA/IGR6IDogMDtcblxuICByZXR1cm4gbmV3IFBvaW50KFxuICAgIHRoaXMueCArIGR4LFxuICAgIHRoaXMueSArIGR5LFxuICAgIHRoaXMueiArIGR6KTtcbn07XG5cblxuLyoqXG4gKiBTY2FsZSBhIHBvaW50IGFib3V0IGEgZ2l2ZW4gb3JpZ2luXG4gKi9cblBvaW50LnByb3RvdHlwZS5zY2FsZSA9IGZ1bmN0aW9uKG9yaWdpbiwgZHgsIGR5LCBkeikge1xuICB2YXIgcCA9IHRoaXMudHJhbnNsYXRlKC1vcmlnaW4ueCwgLW9yaWdpbi55LCAtb3JpZ2luLnopO1xuXG4gIGlmIChkeSA9PT0gdW5kZWZpbmVkICYmIGR6ID09PSB1bmRlZmluZWQpIHtcbiAgICAvKiBJZiBib3RoIGR5IGFuZCBkeiBhcmUgbGVmdCBvdXQsIHNjYWxlIGFsbCBjb29yZGluYXRlcyBlcXVhbGx5ICovXG4gICAgZHkgPSBkeiA9IGR4O1xuICAgIC8qIElmIGp1c3QgZHogaXMgbWlzc2luZywgc2V0IGl0IGVxdWFsIHRvIDEgKi9cbiAgfSBlbHNlIHtcbiAgICBkeiA9ICh0eXBlb2YgZHogPT09ICdudW1iZXInKSA/IGR6IDogMTtcbiAgfVxuXG4gIHAueCAqPSBkeDtcbiAgcC55ICo9IGR5O1xuICBwLnogKj0gZHo7XG5cbiAgcmV0dXJuIHAudHJhbnNsYXRlKG9yaWdpbi54LCBvcmlnaW4ueSwgb3JpZ2luLnopO1xufTtcblxuLyoqXG4gKiBSb3RhdGUgYWJvdXQgb3JpZ2luIG9uIHRoZSBYIGF4aXNcbiAqL1xuUG9pbnQucHJvdG90eXBlLnJvdGF0ZVggPSBmdW5jdGlvbihvcmlnaW4sIGFuZ2xlKSB7XG4gIHZhciBwID0gdGhpcy50cmFuc2xhdGUoLW9yaWdpbi54LCAtb3JpZ2luLnksIC1vcmlnaW4ueik7XG5cbiAgdmFyIHogPSBwLnogKiBNYXRoLmNvcyhhbmdsZSkgLSBwLnkgKiBNYXRoLnNpbihhbmdsZSk7XG4gIHZhciB5ID0gcC56ICogTWF0aC5zaW4oYW5nbGUpICsgcC55ICogTWF0aC5jb3MoYW5nbGUpO1xuICBwLnogPSB6O1xuICBwLnkgPSB5O1xuXG4gIHJldHVybiBwLnRyYW5zbGF0ZShvcmlnaW4ueCwgb3JpZ2luLnksIG9yaWdpbi56KTtcbn07XG5cbi8qKlxuICogUm90YXRlIGFib3V0IG9yaWdpbiBvbiB0aGUgWSBheGlzXG4gKi9cblBvaW50LnByb3RvdHlwZS5yb3RhdGVZID0gZnVuY3Rpb24ob3JpZ2luLCBhbmdsZSkge1xuICB2YXIgcCA9IHRoaXMudHJhbnNsYXRlKC1vcmlnaW4ueCwgLW9yaWdpbi55LCAtb3JpZ2luLnopO1xuXG4gIHZhciB4ID0gcC54ICogTWF0aC5jb3MoYW5nbGUpIC0gcC56ICogTWF0aC5zaW4oYW5nbGUpO1xuICB2YXIgeiA9IHAueCAqIE1hdGguc2luKGFuZ2xlKSArIHAueiAqIE1hdGguY29zKGFuZ2xlKTtcbiAgcC54ID0geDtcbiAgcC56ID0gejtcblxuICByZXR1cm4gcC50cmFuc2xhdGUob3JpZ2luLngsIG9yaWdpbi55LCBvcmlnaW4ueik7XG59O1xuXG4vKipcbiAqIFJvdGF0ZSBhYm91dCBvcmlnaW4gb24gdGhlIFogYXhpc1xuICovXG5Qb2ludC5wcm90b3R5cGUucm90YXRlWiA9IGZ1bmN0aW9uKG9yaWdpbiwgYW5nbGUpIHtcbiAgdmFyIHAgPSB0aGlzLnRyYW5zbGF0ZSgtb3JpZ2luLngsIC1vcmlnaW4ueSwgLW9yaWdpbi56KTtcblxuICB2YXIgeCA9IHAueCAqIE1hdGguY29zKGFuZ2xlKSAtIHAueSAqIE1hdGguc2luKGFuZ2xlKTtcbiAgdmFyIHkgPSBwLnggKiBNYXRoLnNpbihhbmdsZSkgKyBwLnkgKiBNYXRoLmNvcyhhbmdsZSk7XG4gIHAueCA9IHg7XG4gIHAueSA9IHk7XG5cbiAgcmV0dXJuIHAudHJhbnNsYXRlKG9yaWdpbi54LCBvcmlnaW4ueSwgb3JpZ2luLnopO1xufTtcblxuXG4vKipcbiAqIFRoZSBkZXB0aCBvZiBhIHBvaW50IGluIHRoZSBpc29tZXRyaWMgcGxhbmVcbiAqL1xuUG9pbnQucHJvdG90eXBlLmRlcHRoID0gZnVuY3Rpb24oKSB7XG4gIC8qIHogaXMgd2VpZ2h0ZWQgc2xpZ2h0bHkgdG8gYWNjb21vZGF0ZSB8XyBhcnJhbmdlbWVudHMgKi9cbiAgcmV0dXJuIHRoaXMueCArIHRoaXMueSAtIDIgKiB0aGlzLno7XG59O1xuXG5cbi8qKlxuICogRGlzdGFuY2UgYmV0d2VlbiB0d28gcG9pbnRzXG4gKi9cblBvaW50LmRpc3RhbmNlID0gZnVuY3Rpb24ocDEsIHAyKSB7XG4gIHZhciBkeCA9IHAyLnggLSBwMS54O1xuICB2YXIgZHkgPSBwMi55IC0gcDEueTtcbiAgdmFyIGR6ID0gcDIueiAtIHAxLno7XG5cbiAgcmV0dXJuIE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSArIGR6ICogZHopO1xufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IFBvaW50O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2lzb21lci9qcy9wb2ludC5qc1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9")},function(module,exports,__webpack_require__){eval("var Point = __webpack_require__(2);\n\n/**\n * Path utility class\n *\n * An Isomer.Path consists of a list of Isomer.Point's\n */\nfunction Path(points) {\n  if (Object.prototype.toString.call(points) === '[object Array]') {\n    this.points = points;\n  } else {\n    this.points = Array.prototype.slice.call(arguments);\n  }\n}\n\n\n/**\n * Pushes a point onto the end of the path\n */\nPath.prototype.push = function(point) {\n  this.points.push(point);\n};\n\n\n/**\n * Returns a new path with the points in reverse order\n */\nPath.prototype.reverse = function() {\n  var points = Array.prototype.slice.call(this.points);\n\n  return new Path(points.reverse());\n};\n\n\n/**\n * Translates a given path\n *\n * Simply a forward to Point#translate\n */\nPath.prototype.translate = function() {\n  var args = arguments;\n\n  return new Path(this.points.map(function(point) {\n    return point.translate.apply(point, args);\n  }));\n};\n\n/**\n * Returns a new path rotated along the X axis by a given origin\n *\n * Simply a forward to Point#rotateX\n */\nPath.prototype.rotateX = function() {\n  var args = arguments;\n\n  return new Path(this.points.map(function(point) {\n    return point.rotateX.apply(point, args);\n  }));\n};\n\n/**\n * Returns a new path rotated along the Y axis by a given origin\n *\n * Simply a forward to Point#rotateY\n */\nPath.prototype.rotateY = function() {\n  var args = arguments;\n\n  return new Path(this.points.map(function(point) {\n    return point.rotateY.apply(point, args);\n  }));\n};\n\n/**\n * Returns a new path rotated along the Z axis by a given origin\n *\n * Simply a forward to Point#rotateZ\n */\nPath.prototype.rotateZ = function() {\n  var args = arguments;\n\n  return new Path(this.points.map(function(point) {\n    return point.rotateZ.apply(point, args);\n  }));\n};\n\n\n/**\n * Scales a path about a given origin\n *\n * Simply a forward to Point#scale\n */\nPath.prototype.scale = function() {\n  var args = arguments;\n\n  return new Path(this.points.map(function(point) {\n    return point.scale.apply(point, args);\n  }));\n};\n\n\n/**\n * The estimated depth of a path as defined by the average depth\n * of its points\n */\nPath.prototype.depth = function() {\n  var i, total = 0;\n  for (i = 0; i < this.points.length; i++) {\n    total += this.points[i].depth();\n  }\n\n  return total / (this.points.length || 1);\n};\n\n\n/**\n * Some paths to play with\n */\n\n/**\n * A rectangle with the bottom-left corner in the origin\n */\nPath.Rectangle = function(origin, width, height) {\n  if (width === undefined) width = 1;\n  if (height === undefined) height = 1;\n\n  var path = new Path([\n    origin,\n    new Point(origin.x + width, origin.y, origin.z),\n    new Point(origin.x + width, origin.y + height, origin.z),\n    new Point(origin.x, origin.y + height, origin.z)\n  ]);\n\n  return path;\n};\n\n\n/**\n * A circle centered at origin with a given radius and number of vertices\n */\nPath.Circle = function(origin, radius, vertices) {\n  vertices = vertices || 20;\n  var i, path = new Path();\n\n  for (i = 0; i < vertices; i++) {\n    path.push(new Point(\n      radius * Math.cos(i * 2 * Math.PI / vertices),\n      radius * Math.sin(i * 2 * Math.PI / vertices),\n      0));\n  }\n\n  return path.translate(origin.x, origin.y, origin.z);\n};\n\n\n/**\n * A star centered at origin with a given outer radius, inner\n * radius, and number of points\n *\n * Buggy - concave polygons are difficult to draw with our method\n */\nPath.Star = function(origin, outerRadius, innerRadius, points) {\n  var i, r, path = new Path();\n\n  for (i = 0; i < points * 2; i++) {\n    r = (i % 2 === 0) ? outerRadius : innerRadius;\n\n    path.push(new Point(\n      r * Math.cos(i * Math.PI / points),\n      r * Math.sin(i * Math.PI / points),\n      0));\n  }\n\n  return path.translate(origin.x, origin.y, origin.z);\n};\n\n\n/* Expose the Path constructor */\nmodule.exports = Path;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L2lzb21lci9qcy9wYXRoLmpzPzk3YWEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHdCQUF3QjtBQUNyQztBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxhQUFhLGNBQWM7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGFBQWEsZ0JBQWdCO0FBQzdCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQSIsImZpbGUiOiIzLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFBvaW50ID0gcmVxdWlyZSgnLi9wb2ludCcpO1xuXG4vKipcbiAqIFBhdGggdXRpbGl0eSBjbGFzc1xuICpcbiAqIEFuIElzb21lci5QYXRoIGNvbnNpc3RzIG9mIGEgbGlzdCBvZiBJc29tZXIuUG9pbnQnc1xuICovXG5mdW5jdGlvbiBQYXRoKHBvaW50cykge1xuICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHBvaW50cykgPT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICB0aGlzLnBvaW50cyA9IHBvaW50cztcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnBvaW50cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFB1c2hlcyBhIHBvaW50IG9udG8gdGhlIGVuZCBvZiB0aGUgcGF0aFxuICovXG5QYXRoLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24ocG9pbnQpIHtcbiAgdGhpcy5wb2ludHMucHVzaChwb2ludCk7XG59O1xuXG5cbi8qKlxuICogUmV0dXJucyBhIG5ldyBwYXRoIHdpdGggdGhlIHBvaW50cyBpbiByZXZlcnNlIG9yZGVyXG4gKi9cblBhdGgucHJvdG90eXBlLnJldmVyc2UgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHBvaW50cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMucG9pbnRzKTtcblxuICByZXR1cm4gbmV3IFBhdGgocG9pbnRzLnJldmVyc2UoKSk7XG59O1xuXG5cbi8qKlxuICogVHJhbnNsYXRlcyBhIGdpdmVuIHBhdGhcbiAqXG4gKiBTaW1wbHkgYSBmb3J3YXJkIHRvIFBvaW50I3RyYW5zbGF0ZVxuICovXG5QYXRoLnByb3RvdHlwZS50cmFuc2xhdGUgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG5cbiAgcmV0dXJuIG5ldyBQYXRoKHRoaXMucG9pbnRzLm1hcChmdW5jdGlvbihwb2ludCkge1xuICAgIHJldHVybiBwb2ludC50cmFuc2xhdGUuYXBwbHkocG9pbnQsIGFyZ3MpO1xuICB9KSk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBuZXcgcGF0aCByb3RhdGVkIGFsb25nIHRoZSBYIGF4aXMgYnkgYSBnaXZlbiBvcmlnaW5cbiAqXG4gKiBTaW1wbHkgYSBmb3J3YXJkIHRvIFBvaW50I3JvdGF0ZVhcbiAqL1xuUGF0aC5wcm90b3R5cGUucm90YXRlWCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYXJncyA9IGFyZ3VtZW50cztcblxuICByZXR1cm4gbmV3IFBhdGgodGhpcy5wb2ludHMubWFwKGZ1bmN0aW9uKHBvaW50KSB7XG4gICAgcmV0dXJuIHBvaW50LnJvdGF0ZVguYXBwbHkocG9pbnQsIGFyZ3MpO1xuICB9KSk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBuZXcgcGF0aCByb3RhdGVkIGFsb25nIHRoZSBZIGF4aXMgYnkgYSBnaXZlbiBvcmlnaW5cbiAqXG4gKiBTaW1wbHkgYSBmb3J3YXJkIHRvIFBvaW50I3JvdGF0ZVlcbiAqL1xuUGF0aC5wcm90b3R5cGUucm90YXRlWSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYXJncyA9IGFyZ3VtZW50cztcblxuICByZXR1cm4gbmV3IFBhdGgodGhpcy5wb2ludHMubWFwKGZ1bmN0aW9uKHBvaW50KSB7XG4gICAgcmV0dXJuIHBvaW50LnJvdGF0ZVkuYXBwbHkocG9pbnQsIGFyZ3MpO1xuICB9KSk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBuZXcgcGF0aCByb3RhdGVkIGFsb25nIHRoZSBaIGF4aXMgYnkgYSBnaXZlbiBvcmlnaW5cbiAqXG4gKiBTaW1wbHkgYSBmb3J3YXJkIHRvIFBvaW50I3JvdGF0ZVpcbiAqL1xuUGF0aC5wcm90b3R5cGUucm90YXRlWiA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYXJncyA9IGFyZ3VtZW50cztcblxuICByZXR1cm4gbmV3IFBhdGgodGhpcy5wb2ludHMubWFwKGZ1bmN0aW9uKHBvaW50KSB7XG4gICAgcmV0dXJuIHBvaW50LnJvdGF0ZVouYXBwbHkocG9pbnQsIGFyZ3MpO1xuICB9KSk7XG59O1xuXG5cbi8qKlxuICogU2NhbGVzIGEgcGF0aCBhYm91dCBhIGdpdmVuIG9yaWdpblxuICpcbiAqIFNpbXBseSBhIGZvcndhcmQgdG8gUG9pbnQjc2NhbGVcbiAqL1xuUGF0aC5wcm90b3R5cGUuc2NhbGUgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG5cbiAgcmV0dXJuIG5ldyBQYXRoKHRoaXMucG9pbnRzLm1hcChmdW5jdGlvbihwb2ludCkge1xuICAgIHJldHVybiBwb2ludC5zY2FsZS5hcHBseShwb2ludCwgYXJncyk7XG4gIH0pKTtcbn07XG5cblxuLyoqXG4gKiBUaGUgZXN0aW1hdGVkIGRlcHRoIG9mIGEgcGF0aCBhcyBkZWZpbmVkIGJ5IHRoZSBhdmVyYWdlIGRlcHRoXG4gKiBvZiBpdHMgcG9pbnRzXG4gKi9cblBhdGgucHJvdG90eXBlLmRlcHRoID0gZnVuY3Rpb24oKSB7XG4gIHZhciBpLCB0b3RhbCA9IDA7XG4gIGZvciAoaSA9IDA7IGkgPCB0aGlzLnBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgIHRvdGFsICs9IHRoaXMucG9pbnRzW2ldLmRlcHRoKCk7XG4gIH1cblxuICByZXR1cm4gdG90YWwgLyAodGhpcy5wb2ludHMubGVuZ3RoIHx8IDEpO1xufTtcblxuXG4vKipcbiAqIFNvbWUgcGF0aHMgdG8gcGxheSB3aXRoXG4gKi9cblxuLyoqXG4gKiBBIHJlY3RhbmdsZSB3aXRoIHRoZSBib3R0b20tbGVmdCBjb3JuZXIgaW4gdGhlIG9yaWdpblxuICovXG5QYXRoLlJlY3RhbmdsZSA9IGZ1bmN0aW9uKG9yaWdpbiwgd2lkdGgsIGhlaWdodCkge1xuICBpZiAod2lkdGggPT09IHVuZGVmaW5lZCkgd2lkdGggPSAxO1xuICBpZiAoaGVpZ2h0ID09PSB1bmRlZmluZWQpIGhlaWdodCA9IDE7XG5cbiAgdmFyIHBhdGggPSBuZXcgUGF0aChbXG4gICAgb3JpZ2luLFxuICAgIG5ldyBQb2ludChvcmlnaW4ueCArIHdpZHRoLCBvcmlnaW4ueSwgb3JpZ2luLnopLFxuICAgIG5ldyBQb2ludChvcmlnaW4ueCArIHdpZHRoLCBvcmlnaW4ueSArIGhlaWdodCwgb3JpZ2luLnopLFxuICAgIG5ldyBQb2ludChvcmlnaW4ueCwgb3JpZ2luLnkgKyBoZWlnaHQsIG9yaWdpbi56KVxuICBdKTtcblxuICByZXR1cm4gcGF0aDtcbn07XG5cblxuLyoqXG4gKiBBIGNpcmNsZSBjZW50ZXJlZCBhdCBvcmlnaW4gd2l0aCBhIGdpdmVuIHJhZGl1cyBhbmQgbnVtYmVyIG9mIHZlcnRpY2VzXG4gKi9cblBhdGguQ2lyY2xlID0gZnVuY3Rpb24ob3JpZ2luLCByYWRpdXMsIHZlcnRpY2VzKSB7XG4gIHZlcnRpY2VzID0gdmVydGljZXMgfHwgMjA7XG4gIHZhciBpLCBwYXRoID0gbmV3IFBhdGgoKTtcblxuICBmb3IgKGkgPSAwOyBpIDwgdmVydGljZXM7IGkrKykge1xuICAgIHBhdGgucHVzaChuZXcgUG9pbnQoXG4gICAgICByYWRpdXMgKiBNYXRoLmNvcyhpICogMiAqIE1hdGguUEkgLyB2ZXJ0aWNlcyksXG4gICAgICByYWRpdXMgKiBNYXRoLnNpbihpICogMiAqIE1hdGguUEkgLyB2ZXJ0aWNlcyksXG4gICAgICAwKSk7XG4gIH1cblxuICByZXR1cm4gcGF0aC50cmFuc2xhdGUob3JpZ2luLngsIG9yaWdpbi55LCBvcmlnaW4ueik7XG59O1xuXG5cbi8qKlxuICogQSBzdGFyIGNlbnRlcmVkIGF0IG9yaWdpbiB3aXRoIGEgZ2l2ZW4gb3V0ZXIgcmFkaXVzLCBpbm5lclxuICogcmFkaXVzLCBhbmQgbnVtYmVyIG9mIHBvaW50c1xuICpcbiAqIEJ1Z2d5IC0gY29uY2F2ZSBwb2x5Z29ucyBhcmUgZGlmZmljdWx0IHRvIGRyYXcgd2l0aCBvdXIgbWV0aG9kXG4gKi9cblBhdGguU3RhciA9IGZ1bmN0aW9uKG9yaWdpbiwgb3V0ZXJSYWRpdXMsIGlubmVyUmFkaXVzLCBwb2ludHMpIHtcbiAgdmFyIGksIHIsIHBhdGggPSBuZXcgUGF0aCgpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBwb2ludHMgKiAyOyBpKyspIHtcbiAgICByID0gKGkgJSAyID09PSAwKSA/IG91dGVyUmFkaXVzIDogaW5uZXJSYWRpdXM7XG5cbiAgICBwYXRoLnB1c2gobmV3IFBvaW50KFxuICAgICAgciAqIE1hdGguY29zKGkgKiBNYXRoLlBJIC8gcG9pbnRzKSxcbiAgICAgIHIgKiBNYXRoLnNpbihpICogTWF0aC5QSSAvIHBvaW50cyksXG4gICAgICAwKSk7XG4gIH1cblxuICByZXR1cm4gcGF0aC50cmFuc2xhdGUob3JpZ2luLngsIG9yaWdpbi55LCBvcmlnaW4ueik7XG59O1xuXG5cbi8qIEV4cG9zZSB0aGUgUGF0aCBjb25zdHJ1Y3RvciAqL1xubW9kdWxlLmV4cG9ydHMgPSBQYXRoO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2lzb21lci9qcy9wYXRoLmpzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_awesomplete__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_awesomplete___default = __WEBPACK_IMPORTED_MODULE_0_awesomplete__ && __WEBPACK_IMPORTED_MODULE_0_awesomplete__.__esModule ? function() { return __WEBPACK_IMPORTED_MODULE_0_awesomplete__[\'default\'] } : function() { return __WEBPACK_IMPORTED_MODULE_0_awesomplete__; };\n/* harmony import */ __webpack_require__.d(__WEBPACK_IMPORTED_MODULE_0_awesomplete___default, \'a\', __WEBPACK_IMPORTED_MODULE_0_awesomplete___default);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__game__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__setting__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__sempre__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__util__ = __webpack_require__(1);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\n\n\n\n\n\n\n\nvar App = function () {\n  function App() {\n    _classCallCheck(this, App);\n\n    this.Sempre = new __WEBPACK_IMPORTED_MODULE_4__sempre__["a" /* default */]();\n    this.Setting = new __WEBPACK_IMPORTED_MODULE_3__setting__["a" /* default */]();\n    this.Game = new __WEBPACK_IMPORTED_MODULE_1__game__["a" /* default */](this.Setting, this.Sempre);\n    this.consoleElem = document.getElementById(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].consoleElemId);\n    this.defineElem = document.getElementById(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].defineElemId);\n    this.defineState = false;\n    this.activeHistoryElem = -1;\n    this.awesomplete = {};\n    this.helpOn = false;\n    this.keyboardOn = false;\n    this.watchOutForDefine = false;\n\n    this.updateRandomUtterances();\n\n    this.generateTarget();\n\n    this.consoleElem.focus();\n  }\n\n  _createClass(App, [{\n    key: "generateTarget",\n    value: function generateTarget() {\n      /* Generate Target at Random */\n      this.Game.setTarget(this.Game.getRandomTarget());\n      this.setupAutocomplete();\n    }\n  }, {\n    key: "enter",\n    value: function enter() {\n      if (this.defineState) {\n        // TODO: Validate define length!\n        var defined = this.Game.define(this.defineElem.value);\n        if (defined) {\n          this.defineState = false;\n          this.defineElem.value = "";\n          this.Setting.closeDefineInterface();\n          this.consoleElem.value = defined;\n          this.consoleElem.focus();\n        }\n\n        this.watchOutForDefine = true;\n        return;\n      }\n\n      if (this.activeHistoryElem > 0) {\n        var historyElems = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__util__["d" /* getHistoryElems */])();\n        this.Game.history = this.Game.history.slice(0, historyElems.length - this.activeHistoryElem);\n        this.activeHistoryElem = -1;\n      }\n\n      this.Game.enter(this.consoleElem.value);\n\n      this.updateRandomUtterances();\n    }\n  }, {\n    key: "accept",\n    value: function accept() {\n      this.Game.accept();\n      this.consoleElem.value = "";\n      this.consoleElem.focus();\n      this.updateRandomUtterances();\n    }\n  }, {\n    key: "clear",\n    value: function clear() {\n      this.Game.clear();\n      this.consoleElem.focus();\n      this.updateRandomUtterances();\n    }\n  }, {\n    key: "next",\n    value: function next() {\n      this.Game.next();\n    }\n  }, {\n    key: "prev",\n    value: function prev() {\n      this.Game.prev();\n    }\n  }, {\n    key: "openDefineInterface",\n    value: function openDefineInterface() {\n      if (this.Setting.openDefineInterface(this.Game.query, this.Game.responses.length > 0, this.Game.taggedCover)) {\n        this.defineState = true;\n      }\n    }\n  }, {\n    key: "closeDefineInterface",\n    value: function closeDefineInterface() {\n      this.Setting.closeDefineInterface();\n      this.Game.defineSuccess = "";\n      this.defineState = false;\n    }\n  }, {\n    key: "toggleDefineInterface",\n    value: function toggleDefineInterface() {\n      if (this.defineState) {\n        this.closeDefineInterface();\n      } else {\n        this.openDefineInterface();\n      }\n    }\n  }, {\n    key: "undo",\n    value: function undo() {\n      var historyElems = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__util__["d" /* getHistoryElems */])();\n      if (this.activeHistoryElem === historyElems.length - 1) {\n        return;\n      } else if (this.activeHistoryElem >= 0) {\n        this.revert(this.activeHistoryElem + 1);\n      } else if (historyElems.length > 1) {\n        this.revert(1);\n      }\n    }\n  }, {\n    key: "redo",\n    value: function redo() {\n      if (this.activeHistoryElem === 0) {\n        return;\n      } else if (this.activeHistoryElem > 0) {\n        this.revert(this.activeHistoryElem - 1);\n      }\n    }\n  }, {\n    key: "revert",\n    value: function revert(index) {\n      this.Game = this.Setting.revertHistory(index, this.Game);\n      this.activeHistoryElem = index;\n    }\n  }, {\n    key: "setupAutocomplete",\n    value: function setupAutocomplete() {\n      this.defineElem.addEventListener("input", this.onautocomplete.bind(this), false);\n      this.defineElem.addEventListener("focus", this.onautocomplete.bind(this), false);\n\n      this.awesomplete = new __WEBPACK_IMPORTED_MODULE_0_awesomplete___default.a(this.defineElem, { minChars: 0,\n        list: ["remove if top red", "add yellow", "add brown if has red or row = 3", "add yellow if row = 3", "repeat add yellow 3 times"],\n        filter: function filter() {\n          return true;\n        }\n      });\n    }\n  }, {\n    key: "onautocomplete",\n    value: function onautocomplete(e) {\n      if (this.defineElem.value.endsWith(" ")) {\n        this.autocomplete(this.defineElem.value);\n      } else if (this.defineElem.value.length === 0) {\n        this.autocomplete("");\n      }\n      e.stopPropagation();\n    }\n  }, {\n    key: "autocomplete",\n    value: function autocomplete(prefix) {\n      var _this = this;\n\n      var cmdautocomp = "(autocomplete \\"" + prefix + "\\")";\n      var cmds = { q: cmdautocomp, sessionId: this.Game.sessionId };\n\n      this.Sempre.query(cmds, function (response) {\n        var autocomps = response.autocompletes;\n        _this.awesomplete.list = autocomps;\n        _this.awesomplete.open();\n        _this.awesomplete.evaluate();\n      });\n    }\n  }, {\n    key: "skip",\n    value: function skip() {\n      this.Game.skipTarget();\n      this.updateRandomUtterances();\n    }\n  }, {\n    key: "updateRandomUtterances",\n    value: function updateRandomUtterances() {\n      this.Sempre.query({ q: "(autocomplete \\"\\")", sessionId: this.Game.sessionId }, function (resp) {\n        var autocompletes = resp.autocompletes;\n        // let randomStrings = "";\n        // for (const ac of autocompletes) {\n        //   randomStrings += `<span>${ac}</span><br>`;\n        // }\n        var randomStrings = "<span>" + autocompletes[0] + "</span>";\n        document.getElementById(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].randomElemId).innerHTML = randomStrings;\n      });\n    }\n  }, {\n    key: "resetAllProgress",\n    value: function resetAllProgress() {\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__util__["e" /* resetStore */])();\n      window.location.reload();\n    }\n  }, {\n    key: "toggleHelp",\n    value: function toggleHelp() {\n      this.helpOn = !this.helpOn;\n      document.getElementById(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].elems.helpMe).classList.toggle("active");\n    }\n  }, {\n    key: "toggleKeyboard",\n    value: function toggleKeyboard() {\n      this.keyboardOn = !this.keyboardOn;\n      document.getElementById(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].elems.keyboard).classList.toggle("active");\n    }\n  }, {\n    key: "putBack",\n    value: function putBack() {\n      this.Setting.removeAccept();\n      this.Setting.removePromptDefine();\n      this.Game.resetResponses();\n      this.Game.update();\n      this.consoleElem.value = "";\n      this.consoleElem.focus();\n    }\n  }, {\n    key: "defining",\n    value: function defining() {\n      if (this.watchOutForDefine) {\n        this.Setting.toggleDefineButton();\n        this.watchOutForDefine = false;\n      }\n      this.Setting.promptTryDefine();\n    }\n  }, {\n    key: "rotate",\n    value: function rotate(el) {\n      var rotateIcons = document.querySelectorAll("." + __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].buttons.rotateIcons + " > div");\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = rotateIcons[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var rotateIcon = _step.value;\n\n          rotateIcon.classList.remove("active");\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      el.classList.add("active");\n      this.Setting.rotate(el.getAttribute("data-rotate"));\n      this.Game.update();\n    }\n  }]);\n\n  return App;\n}();\n\nvar A = new App();\n\n/* Event Listeners */\n\ndocument.getElementById(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].buttons.do).addEventListener("click", function () {\n  return A.enter();\n}, false);\ndocument.getElementById(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].buttons.accept).addEventListener("click", function () {\n  return A.accept();\n}, false);\ndocument.getElementById(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].buttons.prev).addEventListener("click", function () {\n  return A.prev();\n}, false);\ndocument.getElementById(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].buttons.next).addEventListener("click", function () {\n  return A.next();\n}, false);\ndocument.getElementById(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].buttons.clear).addEventListener("click", function () {\n  return A.clear();\n}, false);\ndocument.getElementById(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].buttons.toggleDefine).addEventListener("click", function () {\n  return A.toggleDefineInterface();\n}, false);\ndocument.getElementById(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].consoleElemId).addEventListener("keyup", function () {\n  return true;\n});\ndocument.getElementById(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].buttons.define).addEventListener("click", function () {\n  return A.enter();\n}, false);\ndocument.getElementById(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].buttons.define_instead).addEventListener("click", function (e) {\n  e.preventDefault();A.openDefineInterface();\n}, false);\ndocument.getElementById(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].buttons.skip).addEventListener("click", function () {\n  return A.skip();\n}, false);\ndocument.getElementById(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].buttons.putBack).addEventListener("click", function () {\n  return A.putBack();\n}, false);\ndocument.getElementById(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].elems.defineConsole).addEventListener("keydown", function (e) {\n  return A.defining(e);\n}, false);\n\nfunction openAndCloseSetter(selector, callback, callbackObj) {\n  var buttons = document.querySelectorAll(selector);\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = buttons[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var button = _step2.value;\n\n      button.addEventListener("click", function (e) {\n        e.preventDefault();\n        callback.apply(callbackObj);\n      });\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n}\n\nopenAndCloseSetter(".help-toggle", A.toggleHelp, A);\nopenAndCloseSetter(".keyboard-toggle", A.toggleKeyboard, A);\n\ndocument.getElementById("command_history").addEventListener("click", function (e) {\n  var index = 0;\n  var type = e.target.getAttribute("data-type");\n  if (!(type === "accept" || type === "initial")) {\n    return;\n  }\n  index = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__util__["d" /* getHistoryElems */])().length - parseInt(e.target.getAttribute("data-stepN"), 10) - 1;\n  A.revert(index);\n}, false);\n\nvar rotateIcons = document.querySelectorAll("." + __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].buttons.rotateIcons + " > div");\nvar _iteratorNormalCompletion3 = true;\nvar _didIteratorError3 = false;\nvar _iteratorError3 = undefined;\n\ntry {\n  for (var _iterator3 = rotateIcons[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n    var rotateIcon = _step3.value;\n\n    rotateIcon.addEventListener("click", function (e) {\n      return A.rotate(e.target);\n    }, false);\n  }\n\n  /* Keyboard shortcuts */\n} catch (err) {\n  _didIteratorError3 = true;\n  _iteratorError3 = err;\n} finally {\n  try {\n    if (!_iteratorNormalCompletion3 && _iterator3.return) {\n      _iterator3.return();\n    }\n  } finally {\n    if (_didIteratorError3) {\n      throw _iteratorError3;\n    }\n  }\n}\n\nvar Hotkeys = {\n  ENTER: "13",\n  LEFT: "37",\n  RIGHT: "39",\n  UP: "38",\n  DOWN: "40",\n  UNDO: "90+ctrl",\n  REDO: "90+shift+ctrl",\n  TEACH: "68+ctrl",\n  ESC: "27",\n  SHIFTENTER: "13+shift"\n};\n\nwindow.onkeydown = function (e) {\n  var key = "";\n  key += e.keyCode;\n\n  if (e.shiftKey) {\n    key += "+shift";\n  }\n  if (e.ctrlKey || e.metaKey) {\n    key += "+ctrl";\n  }\n\n  switch (key) {\n    case Hotkeys.UP:\n      e.preventDefault();\n      A.prev();\n      break;\n    case Hotkeys.DOWN:\n      e.preventDefault();\n      A.next();\n      break;\n    case Hotkeys.SHIFTENTER:\n      e.preventDefault();\n      A.accept();\n      break;\n    case Hotkeys.ENTER:\n      e.preventDefault();\n      A.enter();\n      break;\n    case Hotkeys.TEACH:\n      e.preventDefault();\n      A.openDefineInterface();\n      break;\n    case Hotkeys.ESC:\n      if (A.helpOn) {\n        A.toggleHelp();\n      } else if (A.keyboardOn) {\n        A.toggleKeyboard();\n      } else if (A.defineState) {\n        A.closeDefineInterface();\n      }\n      break;\n    case Hotkeys.UNDO:\n      e.preventDefault();\n      A.undo();\n      break;\n    case Hotkeys.REDO:\n      e.preventDefault();\n      A.redo();\n      break;\n    default:\n  }\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvanMvYXBwLmpzP2JjMTUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztJQUVNLEc7QUFDSixpQkFBYztBQUFBOztBQUNaLFNBQUssTUFBTCxHQUFjLElBQUksd0RBQUosRUFBZDtBQUNBLFNBQUssT0FBTCxHQUFlLElBQUkseURBQUosRUFBZjtBQUNBLFNBQUssSUFBTCxHQUFZLElBQUksc0RBQUosQ0FBUyxLQUFLLE9BQWQsRUFBdUIsS0FBSyxNQUE1QixDQUFaO0FBQ0EsU0FBSyxXQUFMLEdBQW1CLFNBQVMsY0FBVCxDQUF3Qix5REFBUSxhQUFoQyxDQUFuQjtBQUNBLFNBQUssVUFBTCxHQUFrQixTQUFTLGNBQVQsQ0FBd0IseURBQVEsWUFBaEMsQ0FBbEI7QUFDQSxTQUFLLFdBQUwsR0FBbUIsS0FBbkI7QUFDQSxTQUFLLGlCQUFMLEdBQXlCLENBQUMsQ0FBMUI7QUFDQSxTQUFLLFdBQUwsR0FBbUIsRUFBbkI7QUFDQSxTQUFLLE1BQUwsR0FBYyxLQUFkO0FBQ0EsU0FBSyxVQUFMLEdBQWtCLEtBQWxCO0FBQ0EsU0FBSyxpQkFBTCxHQUF5QixLQUF6Qjs7QUFFQSxTQUFLLHNCQUFMOztBQUVBLFNBQUssY0FBTDs7QUFFQSxTQUFLLFdBQUwsQ0FBaUIsS0FBakI7QUFDRDs7OztxQ0FFZ0I7O0FBRWYsV0FBSyxJQUFMLENBQVUsU0FBVixDQUFvQixLQUFLLElBQUwsQ0FBVSxlQUFWLEVBQXBCO0FBQ0EsV0FBSyxpQkFBTDtBQUNEOzs7NEJBRU87QUFDTixVQUFJLEtBQUssV0FBVCxFQUFzQjs7QUFFcEIsWUFBTSxVQUFVLEtBQUssSUFBTCxDQUFVLE1BQVYsQ0FBaUIsS0FBSyxVQUFMLENBQWdCLEtBQWpDLENBQWhCO0FBQ0EsWUFBSSxPQUFKLEVBQWE7QUFDWCxlQUFLLFdBQUwsR0FBbUIsS0FBbkI7QUFDQSxlQUFLLFVBQUwsQ0FBZ0IsS0FBaEIs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RUFBYztBQUNaLFVBQUUsVUFBRjtBQUNELE9BRkQsTUFFTyxJQUFJLEVBQUUsVUFBTixFQUFrQjtBQUN2QixVQUFFLGNBQUY7QUFDRCxPQUZNLE1BRUEsSUFBSSxFQUFFLFdBQU4sRUFBbUI7QUFDeEIsVUFBRSxvQkFBRjtBQUNEO0FBQ0Q7QUFDRixTQUFLLFFBQVEsSUFBYjtBQUNFLFFBQUUsY0FBRjtBQUNBLFFBQUUsSUFBRjtBQUNBO0FBQ0YsU0FBSyxRQUFRLElBQWI7QUFDRSxRQUFFLGNBQUY7QUFDQSxRQUFFLElBQUY7QUFDQTtBQUNGO0FBdENGO0FBd0NELENBL0NEIiwiZmlsZSI6IjQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQXdlc29tcGxldGUgZnJvbSBcImF3ZXNvbXBsZXRlXCI7XG5pbXBvcnQgR2FtZSBmcm9tIFwiLi9nYW1lXCI7XG5pbXBvcnQgY29uZmlncyBmcm9tIFwiLi9jb25maWdcIjtcbmltcG9ydCBTZXR0aW5nIGZyb20gXCIuL3NldHRpbmdcIjtcbmltcG9ydCBTZW1wcmUgZnJvbSBcIi4vc2VtcHJlXCI7XG5pbXBvcnQgeyBnZXRIaXN0b3J5RWxlbXMsIHJlc2V0U3RvcmUgfSBmcm9tIFwiLi91dGlsXCI7XG5cbmNsYXNzIEFwcCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuU2VtcHJlID0gbmV3IFNlbXByZSgpO1xuICAgIHRoaXMuU2V0dGluZyA9IG5ldyBTZXR0aW5nKCk7XG4gICAgdGhpcy5HYW1lID0gbmV3IEdhbWUodGhpcy5TZXR0aW5nLCB0aGlzLlNlbXByZSk7XG4gICAgdGhpcy5jb25zb2xlRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZ3MuY29uc29sZUVsZW1JZCk7XG4gICAgdGhpcy5kZWZpbmVFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29uZmlncy5kZWZpbmVFbGVtSWQpO1xuICAgIHRoaXMuZGVmaW5lU3RhdGUgPSBmYWxzZTtcbiAgICB0aGlzLmFjdGl2ZUhpc3RvcnlFbGVtID0gLTE7XG4gICAgdGhpcy5hd2Vzb21wbGV0ZSA9IHt9O1xuICAgIHRoaXMuaGVscE9uID0gZmFsc2U7XG4gICAgdGhpcy5rZXlib2FyZE9uID0gZmFsc2U7XG4gICAgdGhpcy53YXRjaE91dEZvckRlZmluZSA9IGZhbHNlO1xuXG4gICAgdGhpcy51cGRhdGVSYW5kb21VdHRlcmFuY2VzKCk7XG5cbiAgICB0aGlzLmdlbmVyYXRlVGFyZ2V0KCk7XG5cbiAgICB0aGlzLmNvbnNvbGVFbGVtLmZvY3VzKCk7XG4gIH1cblxuICBnZW5lcmF0ZVRhcmdldCgpIHtcbiAgICAvKiBHZW5lcmF0ZSBUYXJnZXQgYXQgUmFuZG9tICovXG4gICAgdGhpcy5HYW1lLnNldFRhcmdldCh0aGlzLkdhbWUuZ2V0UmFuZG9tVGFyZ2V0KCkpO1xuICAgIHRoaXMuc2V0dXBBdXRvY29tcGxldGUoKTtcbiAgfVxuXG4gIGVudGVyKCkge1xuICAgIGlmICh0aGlzLmRlZmluZVN0YXRlKSB7XG4gICAgICAvLyBUT0RPOiBWYWxpZGF0ZSBkZWZpbmUgbGVuZ3RoIVxuICAgICAgY29uc3QgZGVmaW5lZCA9IHRoaXMuR2FtZS5kZWZpbmUodGhpcy5kZWZpbmVFbGVtLnZhbHVlKTtcbiAgICAgIGlmIChkZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuZGVmaW5lU3RhdGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZWZpbmVFbGVtLnZhbHVlID0gXCJcIjtcbiAgICAgICAgdGhpcy5TZXR0aW5nLmNsb3NlRGVmaW5lSW50ZXJmYWNlKCk7XG4gICAgICAgIHRoaXMuY29uc29sZUVsZW0udmFsdWUgPSBkZWZpbmVkO1xuICAgICAgICB0aGlzLmNvbnNvbGVFbGVtLmZvY3VzKCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMud2F0Y2hPdXRGb3JEZWZpbmUgPSB0cnVlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmFjdGl2ZUhpc3RvcnlFbGVtID4gMCkge1xuICAgICAgY29uc3QgaGlzdG9yeUVsZW1zID0gZ2V0SGlzdG9yeUVsZW1zKCk7XG4gICAgICB0aGlzLkdhbWUuaGlzdG9yeSA9IHRoaXMuR2FtZS5oaXN0b3J5LnNsaWNlKDAsIGhpc3RvcnlFbGVtcy5sZW5ndGggLSB0aGlzLmFjdGl2ZUhpc3RvcnlFbGVtKTtcbiAgICAgIHRoaXMuYWN0aXZlSGlzdG9yeUVsZW0gPSAtMTtcbiAgICB9XG5cbiAgICB0aGlzLkdhbWUuZW50ZXIodGhpcy5jb25zb2xlRWxlbS52YWx1ZSk7XG5cbiAgICB0aGlzLnVwZGF0ZVJhbmRvbVV0dGVyYW5jZXMoKTtcbiAgfVxuXG4gIGFjY2VwdCgpIHtcbiAgICB0aGlzLkdhbWUuYWNjZXB0KCk7XG4gICAgdGhpcy5jb25zb2xlRWxlbS52YWx1ZSA9IFwiXCI7XG4gICAgdGhpcy5jb25zb2xlRWxlbS5mb2N1cygpO1xuICAgIHRoaXMudXBkYXRlUmFuZG9tVXR0ZXJhbmNlcygpO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5HYW1lLmNsZWFyKCk7XG4gICAgdGhpcy5jb25zb2xlRWxlbS5mb2N1cygpO1xuICAgIHRoaXMudXBkYXRlUmFuZG9tVXR0ZXJhbmNlcygpO1xuICB9XG5cbiAgbmV4dCgpIHtcbiAgICB0aGlzLkdhbWUubmV4dCgpO1xuICB9XG5cbiAgcHJldigpIHtcbiAgICB0aGlzLkdhbWUucHJldigpO1xuICB9XG5cbiAgb3BlbkRlZmluZUludGVyZmFjZSgpIHtcbiAgICBpZiAodGhpcy5TZXR0aW5nLm9wZW5EZWZpbmVJbnRlcmZhY2UodGhpcy5HYW1lLnF1ZXJ5LCB0aGlzLkdhbWUucmVzcG9uc2VzLmxlbmd0aCA+IDAsIHRoaXMuR2FtZS50YWdnZWRDb3ZlcikpIHtcbiAgICAgIHRoaXMuZGVmaW5lU3RhdGUgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGNsb3NlRGVmaW5lSW50ZXJmYWNlKCkge1xuICAgIHRoaXMuU2V0dGluZy5jbG9zZURlZmluZUludGVyZmFjZSgpO1xuICAgIHRoaXMuR2FtZS5kZWZpbmVTdWNjZXNzID0gXCJcIjtcbiAgICB0aGlzLmRlZmluZVN0YXRlID0gZmFsc2U7XG4gIH1cblxuICB0b2dnbGVEZWZpbmVJbnRlcmZhY2UoKSB7XG4gICAgaWYgKHRoaXMuZGVmaW5lU3RhdGUpIHtcbiAgICAgIHRoaXMuY2xvc2VEZWZpbmVJbnRlcmZhY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vcGVuRGVmaW5lSW50ZXJmYWNlKCk7XG4gICAgfVxuICB9XG5cbiAgdW5kbygpIHtcbiAgICBjb25zdCBoaXN0b3J5RWxlbXMgPSBnZXRIaXN0b3J5RWxlbXMoKTtcbiAgICBpZiAodGhpcy5hY3RpdmVIaXN0b3J5RWxlbSA9PT0gaGlzdG9yeUVsZW1zLmxlbmd0aCAtIDEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKHRoaXMuYWN0aXZlSGlzdG9yeUVsZW0gPj0gMCkge1xuICAgICAgdGhpcy5yZXZlcnQodGhpcy5hY3RpdmVIaXN0b3J5RWxlbSArIDEpO1xuICAgIH0gZWxzZSBpZiAoaGlzdG9yeUVsZW1zLmxlbmd0aCA+IDEpIHtcbiAgICAgIHRoaXMucmV2ZXJ0KDEpO1xuICAgIH1cbiAgfVxuXG4gIHJlZG8oKSB7XG4gICAgaWYgKHRoaXMuYWN0aXZlSGlzdG9yeUVsZW0gPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKHRoaXMuYWN0aXZlSGlzdG9yeUVsZW0gPiAwKSB7XG4gICAgICB0aGlzLnJldmVydCh0aGlzLmFjdGl2ZUhpc3RvcnlFbGVtIC0gMSk7XG4gICAgfVxuICB9XG5cbiAgcmV2ZXJ0KGluZGV4KSB7XG4gICAgdGhpcy5HYW1lID0gdGhpcy5TZXR0aW5nLnJldmVydEhpc3RvcnkoaW5kZXgsIHRoaXMuR2FtZSk7XG4gICAgdGhpcy5hY3RpdmVIaXN0b3J5RWxlbSA9IGluZGV4O1xuICB9XG5cbiAgc2V0dXBBdXRvY29tcGxldGUoKSB7XG4gICAgdGhpcy5kZWZpbmVFbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0aGlzLm9uYXV0b2NvbXBsZXRlLmJpbmQodGhpcyksIGZhbHNlKTtcbiAgICB0aGlzLmRlZmluZUVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHRoaXMub25hdXRvY29tcGxldGUuYmluZCh0aGlzKSwgZmFsc2UpO1xuXG4gICAgdGhpcy5hd2Vzb21wbGV0ZSA9IG5ldyBBd2Vzb21wbGV0ZSh0aGlzLmRlZmluZUVsZW0sXG4gICAgICB7IG1pbkNoYXJzOiAwLFxuICAgICAgICBsaXN0OiBbXCJyZW1vdmUgaWYgdG9wIHJlZFwiLCBcImFkZCB5ZWxsb3dcIixcbiAgICAgICAgIFwiYWRkIGJyb3duIGlmIGhhcyByZWQgb3Igcm93ID0gM1wiLFxuICAgICAgICAgXCJhZGQgeWVsbG93IGlmIHJvdyA9IDNcIixcbiAgICAgICAgIFwicmVwZWF0IGFkZCB5ZWxsb3cgMyB0aW1lc1wiXSxcbiAgICAgICAgZmlsdGVyKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICAgIH0pO1xuICB9XG5cbiAgb25hdXRvY29tcGxldGUoZSkge1xuICAgIGlmICh0aGlzLmRlZmluZUVsZW0udmFsdWUuZW5kc1dpdGgoXCIgXCIpKSB7XG4gICAgICB0aGlzLmF1dG9jb21wbGV0ZSh0aGlzLmRlZmluZUVsZW0udmFsdWUpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5kZWZpbmVFbGVtLnZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5hdXRvY29tcGxldGUoXCJcIik7XG4gICAgfVxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH1cblxuICBhdXRvY29tcGxldGUocHJlZml4KSB7XG4gICAgY29uc3QgY21kYXV0b2NvbXAgPSBgKGF1dG9jb21wbGV0ZSBcIiR7cHJlZml4fVwiKWA7XG4gICAgY29uc3QgY21kcyA9IHsgcTogY21kYXV0b2NvbXAsIHNlc3Npb25JZDogdGhpcy5HYW1lLnNlc3Npb25JZCB9O1xuXG4gICAgdGhpcy5TZW1wcmUucXVlcnkoY21kcywgKHJlc3BvbnNlKSA9PiB7XG4gICAgICBjb25zdCBhdXRvY29tcHMgPSByZXNwb25zZS5hdXRvY29tcGxldGVzO1xuICAgICAgdGhpcy5hd2Vzb21wbGV0ZS5saXN0ID0gYXV0b2NvbXBzO1xuICAgICAgdGhpcy5hd2Vzb21wbGV0ZS5vcGVuKCk7XG4gICAgICB0aGlzLmF3ZXNvbXBsZXRlLmV2YWx1YXRlKCk7XG4gICAgfSk7XG4gIH1cblxuICBza2lwKCkge1xuICAgIHRoaXMuR2FtZS5za2lwVGFyZ2V0KCk7XG4gICAgdGhpcy51cGRhdGVSYW5kb21VdHRlcmFuY2VzKCk7XG4gIH1cblxuICB1cGRhdGVSYW5kb21VdHRlcmFuY2VzKCkge1xuICAgIHRoaXMuU2VtcHJlLnF1ZXJ5KHsgcTogXCIoYXV0b2NvbXBsZXRlIFxcXCJcXFwiKVwiLCBzZXNzaW9uSWQ6IHRoaXMuR2FtZS5zZXNzaW9uSWQgfSwgKHJlc3ApID0+IHtcbiAgICAgIGNvbnN0IGF1dG9jb21wbGV0ZXMgPSByZXNwLmF1dG9jb21wbGV0ZXM7XG4gICAgICAvLyBsZXQgcmFuZG9tU3RyaW5ncyA9IFwiXCI7XG4gICAgICAvLyBmb3IgKGNvbnN0IGFjIG9mIGF1dG9jb21wbGV0ZXMpIHtcbiAgICAgIC8vICAgcmFuZG9tU3RyaW5ncyArPSBgPHNwYW4+JHthY308L3NwYW4+PGJyPmA7XG4gICAgICAvLyB9XG4gICAgICBjb25zdCByYW5kb21TdHJpbmdzID0gYDxzcGFuPiR7YXV0b2NvbXBsZXRlc1swXX08L3NwYW4+YDtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZ3MucmFuZG9tRWxlbUlkKS5pbm5lckhUTUwgPSByYW5kb21TdHJpbmdzO1xuICAgIH0pO1xuICB9XG5cbiAgcmVzZXRBbGxQcm9ncmVzcygpIHtcbiAgICByZXNldFN0b3JlKCk7XG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICB9XG5cbiAgdG9nZ2xlSGVscCgpIHtcbiAgICB0aGlzLmhlbHBPbiA9ICF0aGlzLmhlbHBPbjtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb25maWdzLmVsZW1zLmhlbHBNZSkuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcbiAgfVxuXG4gIHRvZ2dsZUtleWJvYXJkKCkge1xuICAgIHRoaXMua2V5Ym9hcmRPbiA9ICF0aGlzLmtleWJvYXJkT247XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29uZmlncy5lbGVtcy5rZXlib2FyZCkuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcbiAgfVxuXG4gIHB1dEJhY2soKSB7XG4gICAgdGhpcy5TZXR0aW5nLnJlbW92ZUFjY2VwdCgpO1xuICAgIHRoaXMuU2V0dGluZy5yZW1vdmVQcm9tcHREZWZpbmUoKTtcbiAgICB0aGlzLkdhbWUucmVzZXRSZXNwb25zZXMoKTtcbiAgICB0aGlzLkdhbWUudXBkYXRlKCk7XG4gICAgdGhpcy5jb25zb2xlRWxlbS52YWx1ZSA9IFwiXCI7XG4gICAgdGhpcy5jb25zb2xlRWxlbS5mb2N1cygpO1xuICB9XG5cbiAgZGVmaW5pbmcoKSB7XG4gICAgaWYgKHRoaXMud2F0Y2hPdXRGb3JEZWZpbmUpIHtcbiAgICAgIHRoaXMuU2V0dGluZy50b2dnbGVEZWZpbmVCdXR0b24oKTtcbiAgICAgIHRoaXMud2F0Y2hPdXRGb3JEZWZpbmUgPSBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy5TZXR0aW5nLnByb21wdFRyeURlZmluZSgpO1xuICB9XG5cbiAgcm90YXRlKGVsKSB7XG4gICAgY29uc3Qgcm90YXRlSWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtjb25maWdzLmJ1dHRvbnMucm90YXRlSWNvbnN9ID4gZGl2YCk7XG4gICAgZm9yIChjb25zdCByb3RhdGVJY29uIG9mIHJvdGF0ZUljb25zKSB7XG4gICAgICByb3RhdGVJY29uLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgfVxuICAgIGVsLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgdGhpcy5TZXR0aW5nLnJvdGF0ZShlbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXJvdGF0ZVwiKSk7XG4gICAgdGhpcy5HYW1lLnVwZGF0ZSgpO1xuICB9XG59XG5cbmNvbnN0IEEgPSBuZXcgQXBwKCk7XG5cbi8qIEV2ZW50IExpc3RlbmVycyAqL1xuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb25maWdzLmJ1dHRvbnMuZG8pLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBBLmVudGVyKCksIGZhbHNlKTtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZ3MuYnV0dG9ucy5hY2NlcHQpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBBLmFjY2VwdCgpLCBmYWxzZSk7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb25maWdzLmJ1dHRvbnMucHJldikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IEEucHJldigpLCBmYWxzZSk7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb25maWdzLmJ1dHRvbnMubmV4dCkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IEEubmV4dCgpLCBmYWxzZSk7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb25maWdzLmJ1dHRvbnMuY2xlYXIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBBLmNsZWFyKCksIGZhbHNlKTtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZ3MuYnV0dG9ucy50b2dnbGVEZWZpbmUpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBBLnRvZ2dsZURlZmluZUludGVyZmFjZSgpLCBmYWxzZSk7XG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb25maWdzLmNvbnNvbGVFbGVtSWQpLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCAoKSA9PiB0cnVlKTtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZ3MuYnV0dG9ucy5kZWZpbmUpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBBLmVudGVyKCksIGZhbHNlKTtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZ3MuYnV0dG9ucy5kZWZpbmVfaW5zdGVhZCkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7IGUucHJldmVudERlZmF1bHQoKTsgQS5vcGVuRGVmaW5lSW50ZXJmYWNlKCk7IH0sIGZhbHNlKTtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZ3MuYnV0dG9ucy5za2lwKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gQS5za2lwKCksIGZhbHNlKTtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZ3MuYnV0dG9ucy5wdXRCYWNrKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gQS5wdXRCYWNrKCksIGZhbHNlKTtcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZ3MuZWxlbXMuZGVmaW5lQ29uc29sZSkuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IEEuZGVmaW5pbmcoZSksIGZhbHNlKTtcblxuZnVuY3Rpb24gb3BlbkFuZENsb3NlU2V0dGVyKHNlbGVjdG9yLCBjYWxsYmFjaywgY2FsbGJhY2tPYmopIHtcbiAgY29uc3QgYnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiBidXR0b25zKSB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY2FsbGJhY2suYXBwbHkoY2FsbGJhY2tPYmopO1xuICAgIH0pO1xuICB9XG59XG5cbm9wZW5BbmRDbG9zZVNldHRlcihcIi5oZWxwLXRvZ2dsZVwiLCBBLnRvZ2dsZUhlbHAsIEEpO1xub3BlbkFuZENsb3NlU2V0dGVyKFwiLmtleWJvYXJkLXRvZ2dsZVwiLCBBLnRvZ2dsZUtleWJvYXJkLCBBKTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb21tYW5kX2hpc3RvcnlcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gIGxldCBpbmRleCA9IDA7XG4gIGNvbnN0IHR5cGUgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR5cGVcIik7XG4gIGlmICghKHR5cGUgPT09IFwiYWNjZXB0XCIgfHwgdHlwZSA9PT0gXCJpbml0aWFsXCIpKSB7IHJldHVybjsgfVxuICBpbmRleCA9IGdldEhpc3RvcnlFbGVtcygpLmxlbmd0aCAtIHBhcnNlSW50KGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtc3RlcE5cIiksIDEwKSAtIDE7XG4gIEEucmV2ZXJ0KGluZGV4KTtcbn0sIGZhbHNlKTtcblxuY29uc3Qgcm90YXRlSWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtjb25maWdzLmJ1dHRvbnMucm90YXRlSWNvbnN9ID4gZGl2YCk7XG5mb3IgKGNvbnN0IHJvdGF0ZUljb24gb2Ygcm90YXRlSWNvbnMpIHtcbiAgcm90YXRlSWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IEEucm90YXRlKGUudGFyZ2V0KSwgZmFsc2UpO1xufVxuXG4vKiBLZXlib2FyZCBzaG9ydGN1dHMgKi9cblxuY29uc3QgSG90a2V5cyA9IHtcbiAgRU5URVI6IFwiMTNcIixcbiAgTEVGVDogXCIzN1wiLFxuICBSSUdIVDogXCIzOVwiLFxuICBVUDogXCIzOFwiLFxuICBET1dOOiBcIjQwXCIsXG4gIFVORE86IFwiOTArY3RybFwiLFxuICBSRURPOiBcIjkwK3NoaWZ0K2N0cmxcIixcbiAgVEVBQ0g6IFwiNjgrY3RybFwiLFxuICBFU0M6IFwiMjdcIixcbiAgU0hJRlRFTlRFUjogXCIxMytzaGlmdFwiLFxufTtcblxud2luZG93Lm9ua2V5ZG93biA9IChlKSA9PiB7XG4gIGxldCBrZXkgPSBcIlwiO1xuICBrZXkgKz0gZS5rZXlDb2RlO1xuXG4gIGlmIChlLnNoaWZ0S2V5KSB7IGtleSArPSBcIitzaGlmdFwiOyB9XG4gIGlmIChlLmN0cmxLZXkgfHwgZS5tZXRhS2V5KSB7IGtleSArPSBcIitjdHJsXCI7IH1cblxuICBzd2l0Y2ggKGtleSkge1xuICAgIGNhc2UgSG90a2V5cy5VUDpcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIEEucHJldigpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBIb3RrZXlzLkRPV046XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBBLm5leHQoKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgSG90a2V5cy5TSElGVEVOVEVSOlxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgQS5hY2NlcHQoKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgSG90a2V5cy5FTlRFUjpcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIEEuZW50ZXIoKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgSG90a2V5cy5URUFDSDpcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIEEub3BlbkRlZmluZUludGVyZmFjZSgpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBIb3RrZXlzLkVTQzpcbiAgICAgIGlmIChBLmhlbHBPbikge1xuICAgICAgICBBLnRvZ2dsZUhlbHAoKTtcbiAgICAgIH0gZWxzZSBpZiAoQS5rZXlib2FyZE9uKSB7XG4gICAgICAgIEEudG9nZ2xlS2V5Ym9hcmQoKTtcbiAgICAgIH0gZWxzZSBpZiAoQS5kZWZpbmVTdGF0ZSkge1xuICAgICAgICBBLmNsb3NlRGVmaW5lSW50ZXJmYWNlKCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIEhvdGtleXMuVU5ETzpcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIEEudW5kbygpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBIb3RrZXlzLlJFRE86XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBBLnJlZG8oKTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gIH1cbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hcHAvanMvYXBwLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==');
},function(module,exports){eval("// removed by extract-text-webpack-plugin//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvY3NzL2FwcC5sZXNzPzZiMGQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEiLCJmaWxlIjoiNS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9hcHAvY3NzL2FwcC5sZXNzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports){eval('module.exports = "<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta name=viewport content=\\"width=device-width,initial-scale=1\\"> <meta name=description content=\\"teach the computer English\\"> <title>SHRDLURN</title> </head> <body> <div class=header> <div class=logo> <span class=l-r>S</span><span class=l-y>H</span><span class=l-o>R</span><span class=l-b>D</span><span class=l-r>L</span><span class=l-y>U</span><span class=l-o>R</span><span class=l-b>N</span> <span class=sublogo>A Stanford NLP Project</span> </div> <div class=nav> <div class=help-toggle>Help Me</div> <div class=keyboard-toggle>Keyboard Shortcuts</div> <div>Restart Tutorial</div> </div> </div> <div class=container> <div class=main> <div id=define_prompt class=\\"canvas-prompt hidden\\"> <h1>SHRDLURN does not understand.</h1> <hr> <p>Help SHRDLURN learn by teaching the phrase you attempted to instruct SHRDLURN with by defining it.</p> <button type=button class=bold-button id=define_instead>Ok. TEACH SHRDLURN.</button> </div> <div class=rotate-icons> <div id=rtl data-rotate=-2></div> <div id=rtr data-rotate=2></div> <div id=rbl data-rotate=-1 class=active></div> <div id=rbr data-rotate=1></div> </div> <canvas id=main_canvas width=1536 height=1200></canvas> <div class=define-area id=define_interface> <div class=status> <span class=reaction><img class=emojione alt=:rolling_eyes: src=http://cdn.jsdelivr.net/emojione/assets/png/1f642.png></span> <span id=define_header></span> </div> <div class=input-group> <input type=text id=definetextarea /> <div class=buttons-at-end> <button type=button class=enter-button id=try_define>try</button> <button type=button class=accept-button id=define_phrase_button>define</button> </div> </div> <div class=examples> <span id=define_status></span>&nbsp;<a href=\\"\\" class=help-toggle>But it doesn\'t work, I need help...</a> </div> </div> <div class=console-area> <div id=statusinfo class=status> &nbsp; <span class=reaction id=reaction><img class=emojione alt=:rolling_eyes: src=http://cdn.jsdelivr.net/emojione/assets/png/1f644.png></span> <div> <span id=currentcmd><b>No command</b></span>, <span id=status>type one!</span> </div> </div> <div class=input-group id=console_group> <input type=text id=console> <div class=buttons-at-end> <button type=button class=remove-button id=putbackbutton>&times;</button> <button type=button class=enter-button id=dobutton>enter</button> <button type=button class=accept-button id=flyingaccept>accept</button> </div> </div> <div class=examples> <strong>example query:</strong> <span id=random></span> </div> </div> <div class=meta-buttons> <button type=button id=clearbutton>clear</button> <br> <button type=button id=toggledefine>define</button> <button type=button id=prevbutton>&uarr;</button> <button type=button id=nextbutton>&darr;</button> </div> </div> <div class=panel> <div class=\\"target card\\"> <div class=card-header> Target <button type=button id=skip_button class=seethrough>skip (<span id=skips_left>2</span> left)</button> </div> <div class=target-footer> <div> <div>possible: <span class=possible_steps style=font-weight:700>5</span> steps</div> </div> <div> <div>maximum: <span class=max_steps style=font-weight:700>15</span> steps</div> </div> </div> <canvas id=target_canvas width=512 height=800></canvas> </div> <div class=history> <div class=card-header> Recipe Steps (<span class=curr_steps>0</span>/<span class=max_steps>100</span>) </div> <div class=history-steps id=command_history></div> </div> </div> </div> <div class=modals> <div class=modal-container id=helpme> <div class=modal> <div class=modal-header> Help for SHRDLURN (esc to close) </div> <div class=modal-body> <p> The goal is to teach SHRDLURN (the computer) to understand more English. You have to define things in a way that can already be understood by SHRDLURN. This includes anything that you or others have already taught it, as well as the core language below, which it always understands: <ul> <li><b>number: </b> 0, 1, 2, ..., 9, many</li> <li><b>color: </b> red, cyan, brown, yellow, orange</li> <li><b>action: </b> remove, add [color] </li> <li><b>condition: </b> top [color], row = [number], height &gt; [number], has [color], etc. </li> <li><b>if: </b> [action] if [condition] <ul> <li>add red if col = 1 or col = 8 or row = 1 or row = 8</li> <li>add red if row &lt; 3</li> <li>remove if top red</li> </ul> </li> <li><b>control: </b> [action] then [action], repeat [action] 3 times <ul> <li>repeat remove if has red many times</li> <li>remove then add red if top yellow </li> <li>repeat add red 3 times if top yellow or row &lt; 3 </li> <li>[remove then add red then add red] if height &lt; 1</li> <li>repeat add red then add yellow 5 times if height &gt; 0 </li> </ul> </li> <li><b>(advanced) relative condition: </b> relativepos_of [condition] <ul> <li>add yellow if leftof top red</li> <li>add yellow if rightof col = 3</li> <li>add yellow if backof col = row </li> <li>add yellow if rightof frontof [row = 4 and col = 4]</li> </ul> </li> <li><b>(advanced) extremes: </b> largest X in [condition] <ul> <li>add yellow if largest row in all</li> <li>add yellow if smallest col in top red</li> </ul> </li> <li><b>(advanced) inside: </b> inside [[condition]] <ul> <li>add red if inside [top red]</li> <li>add red if inside [col = 1 or col = 4]</li> <li>add cyan if inside [ [ row = 1 or row = 4 ] and [col = 1 or col = 4] ] </li> </ul> </li> </ul> </p> <h3>But it\'s not accepting my teachings! </h3> <ul> <li> SHRDLURN understands everything in green boxes, blue are words it knows but not used correctly, red are unknowns.</li> <li> <span style=color:red>blah </span> <span class=color-good>add red if height &lt; 1 </span> <span style=color:#00f ;=\\"\\">then </span> <span style=color:#00f ;=\\"\\">if </span><span style=color:red>someblah </span> <span class=color-good>add red </span> <span class=color-good>remove red </span> </li> <li> If there are several green boxes, then it understands each box, but not how they are combined. For example, <span class=color-good>add red </span> <span class=color-good>remove red </span> needs to be changed to <span class=color-good>add red then remove red </span></li> <li> Still, if nothing works, close the definition window and teach something else!</li> </ul> <p> English is hard for beginners, which is why we need your help teaching SHRDLURN!</p> <a class=\\"button--closed help-toggle\\" href=#>Okay, got it! (click here or press ESC key to close this window)</a> </div> </div> </div> <div class=modal-container id=keyboard_shortcuts> <div class=modal> <div class=modal-header> Keyboard Shortcuts </div> <div class=modal-body> <p>To make your life easier, we made the follow keyboard shortcuts so that you can rapidly build with SHRDLURN!</p> <p> <strong>enter:</strong> enter (try)<br/> <strong>accept:</strong> shift-enter (✓)<br/> <strong>define:</strong> crtl-d (teach)<br/> <strong>↑:</strong> up<br/> <strong>↓:</strong> down<br/> <strong>undo:</strong> ctrl-z<br/> <strong>redo:</strong> shift-ctrl-z </p> <p><a href=\\"\\" class=keyboard-toggle>Got it? Great. Click to close this now (or press esc).</a></p> </div> </div> </div> </div> <link href=\\"https://fonts.googleapis.com/css?family=Roboto:100,400,700\\" rel=stylesheet> <script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,\\"script\\",\\"//www.google-analytics.com/analytics.js\\",\\"ga\\"),ga(\\"create\\",\\"UA-74509910-1\\",\\"auto\\"),ga(\\"send\\",\\"pageview\\")</script> </body> </html>";//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvaW5kZXguaHRtbD9lODJlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHV2REFBdXZELHFKQUFxSiwrWUFBK1kseWFBQXlhLGtEQUFrRCx3MUNBQXcxQyxvS0FBb0ssc1FBQXNRLDhEQUE4RCxpRUFBaUUsODdCQUE4N0IsbUNBQW1DLDJDQUEyQyxnL0NBQWcvQyxnREFBZ0Qsb0NBQW9DLHdIQUF3SCIsImZpbGUiOiI2LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBcIjwhRE9DVFlQRSBodG1sPiA8aHRtbCBsYW5nPWVuPiA8aGVhZD4gPG1ldGEgY2hhcnNldD11dGYtOD4gPG1ldGEgbmFtZT12aWV3cG9ydCBjb250ZW50PVxcXCJ3aWR0aD1kZXZpY2Utd2lkdGgsaW5pdGlhbC1zY2FsZT0xXFxcIj4gPG1ldGEgbmFtZT1kZXNjcmlwdGlvbiBjb250ZW50PVxcXCJ0ZWFjaCB0aGUgY29tcHV0ZXIgRW5nbGlzaFxcXCI+IDx0aXRsZT5TSFJETFVSTjwvdGl0bGU+IDwvaGVhZD4gPGJvZHk+IDxkaXYgY2xhc3M9aGVhZGVyPiA8ZGl2IGNsYXNzPWxvZ28+IDxzcGFuIGNsYXNzPWwtcj5TPC9zcGFuPjxzcGFuIGNsYXNzPWwteT5IPC9zcGFuPjxzcGFuIGNsYXNzPWwtbz5SPC9zcGFuPjxzcGFuIGNsYXNzPWwtYj5EPC9zcGFuPjxzcGFuIGNsYXNzPWwtcj5MPC9zcGFuPjxzcGFuIGNsYXNzPWwteT5VPC9zcGFuPjxzcGFuIGNsYXNzPWwtbz5SPC9zcGFuPjxzcGFuIGNsYXNzPWwtYj5OPC9zcGFuPiA8c3BhbiBjbGFzcz1zdWJsb2dvPkEgU3RhbmZvcmQgTkxQIFByb2plY3Q8L3NwYW4+IDwvZGl2PiA8ZGl2IGNsYXNzPW5hdj4gPGRpdiBjbGFzcz1oZWxwLXRvZ2dsZT5IZWxwIE1lPC9kaXY+IDxkaXYgY2xhc3M9a2V5Ym9hcmQtdG9nZ2xlPktleWJvYXJkIFNob3J0Y3V0czwvZGl2PiA8ZGl2PlJlc3RhcnQgVHV0b3JpYWw8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPWNvbnRhaW5lcj4gPGRpdiBjbGFzcz1tYWluPiA8ZGl2IGlkPWRlZmluZV9wcm9tcHQgY2xhc3M9XFxcImNhbnZhcy1wcm9tcHQgaGlkZGVuXFxcIj4gPGgxPlNIUkRMVVJOIGRvZXMgbm90IHVuZGVyc3RhbmQuPC9oMT4gPGhyPiA8cD5IZWxwIFNIUkRMVVJOIGxlYXJuIGJ5IHRlYWNoaW5nIHRoZSBwaHJhc2UgeW91IGF0dGVtcHRlZCB0byBpbnN0cnVjdCBTSFJETFVSTiB3aXRoIGJ5IGRlZmluaW5nIGl0LjwvcD4gPGJ1dHRvbiB0eXBlPWJ1dHRvbiBjbGFzcz1ib2xkLWJ1dHRvbiBpZD1kZWZpbmVfaW5zdGVhZD5Pay4gVEVBQ0ggU0hSRExVUk4uPC9idXR0b24+IDwvZGl2PiA8ZGl2IGNsYXNzPXJvdGF0ZS1pY29ucz4gPGRpdiBpZD1ydGwgZGF0YS1yb3RhdGU9LTI+PC9kaXY+IDxkaXYgaWQ9cnRyIGRhdGEtcm90YXRlPTI+PC9kaXY+IDxkaXYgaWQ9cmJsIGRhdGEtcm90YXRlPS0xIGNsYXNzPWFjdGl2ZT48L2Rpdj4gPGRpdiBpZD1yYnIgZGF0YS1yb3RhdGU9MT48L2Rpdj4gPC9kaXY+IDxjYW52YXMgaWQ9bWFpbl9jYW52YXMgd2lkdGg9MTUzNiBoZWlnaHQ9MTIwMD48L2NhbnZhcz4gPGRpdiBjbGFzcz1kZWZpbmUtYXJlYSBpZD1kZWZpbmVfaW50ZXJmYWNlPiA8ZGl2IGNsYXNzPXN0YXR1cz4gPHNwYW4gY2xhc3M9cmVhY3Rpb24+PGltZyBjbGFzcz1lbW9qaW9uZSBhbHQ9OnJvbGxpbmdfZXllczogc3JjPWh0dHA6Ly9jZG4uanNkZWxpdnIubmV0L2Vtb2ppb25lL2Fzc2V0cy9wbmcvMWY2NDIucG5nPjwvc3Bhbj4gPHNwYW4gaWQ9ZGVmaW5lX2hlYWRlcj48L3NwYW4+IDwvZGl2PiA8ZGl2IGNsYXNzPWlucHV0LWdyb3VwPiA8aW5wdXQgdHlwZT10ZXh0IGlkPWRlZmluZXRleHRhcmVhIC8+IDxkaXYgY2xhc3M9YnV0dG9ucy1hdC1lbmQ+IDxidXR0b24gdHlwZT1idXR0b24gY2xhc3M9ZW50ZXItYnV0dG9uIGlkPXRyeV9kZWZpbmU+dHJ5PC9idXR0b24+IDxidXR0b24gdHlwZT1idXR0b24gY2xhc3M9YWNjZXB0LWJ1dHRvbiBpZD1kZWZpbmVfcGhyYXNlX2J1dHRvbj5kZWZpbmU8L2J1dHRvbj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPWV4YW1wbGVzPiA8c3BhbiBpZD1kZWZpbmVfc3RhdHVzPjwvc3Bhbj4mbmJzcDs8YSBocmVmPVxcXCJcXFwiIGNsYXNzPWhlbHAtdG9nZ2xlPkJ1dCBpdCBkb2Vzbid0IHdvcmssIEkgbmVlZCBoZWxwLi4uPC9hPiA8L2Rpdj4gPC9kaXY+IDxkaXYgY2xhc3M9Y29uc29sZS1hcmVhPiA8ZGl2IGlkPXN0YXR1c2luZm8gY2xhc3M9c3RhdHVzPiAmbmJzcDsgPHNwYW4gY2xhc3M9cmVhY3Rpb24gaWQ9cmVhY3Rpb24+PGltZyBjbGFzcz1lbW9qaW9uZSBhbHQ9OnJvbGxpbmdfZXllczogc3JjPWh0dHA6Ly9jZG4uanNkZWxpdnIubmV0L2Vtb2ppb25lL2Fzc2V0cy9wbmcvMWY2NDQucG5nPjwvc3Bhbj4gPGRpdj4gPHNwYW4gaWQ9Y3VycmVudGNtZD48Yj5ObyBjb21tYW5kPC9iPjwvc3Bhbj4sIDxzcGFuIGlkPXN0YXR1cz50eXBlIG9uZSE8L3NwYW4+IDwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz1pbnB1dC1ncm91cCBpZD1jb25zb2xlX2dyb3VwPiA8aW5wdXQgdHlwZT10ZXh0IGlkPWNvbnNvbGU+IDxkaXYgY2xhc3M9YnV0dG9ucy1hdC1lbmQ+IDxidXR0b24gdHlwZT1idXR0b24gY2xhc3M9cmVtb3ZlLWJ1dHRvbiBpZD1wdXRiYWNrYnV0dG9uPiZ0aW1lczs8L2J1dHRvbj4gPGJ1dHRvbiB0eXBlPWJ1dHRvbiBjbGFzcz1lbnRlci1idXR0b24gaWQ9ZG9idXR0b24+ZW50ZXI8L2J1dHRvbj4gPGJ1dHRvbiB0eXBlPWJ1dHRvbiBjbGFzcz1hY2NlcHQtYnV0dG9uIGlkPWZseWluZ2FjY2VwdD5hY2NlcHQ8L2J1dHRvbj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPWV4YW1wbGVzPiA8c3Ryb25nPmV4YW1wbGUgcXVlcnk6PC9zdHJvbmc+IDxzcGFuIGlkPXJhbmRvbT48L3NwYW4+IDwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz1tZXRhLWJ1dHRvbnM+IDxidXR0b24gdHlwZT1idXR0b24gaWQ9Y2xlYXJidXR0b24+Y2xlYXI8L2J1dHRvbj4gPGJyPiA8YnV0dG9uIHR5cGU9YnV0dG9uIGlkPXRvZ2dsZWRlZmluZT5kZWZpbmU8L2J1dHRvbj4gPGJ1dHRvbiB0eXBlPWJ1dHRvbiBpZD1wcmV2YnV0dG9uPiZ1YXJyOzwvYnV0dG9uPiA8YnV0dG9uIHR5cGU9YnV0dG9uIGlkPW5leHRidXR0b24+JmRhcnI7PC9idXR0b24+IDwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz1wYW5lbD4gPGRpdiBjbGFzcz1cXFwidGFyZ2V0IGNhcmRcXFwiPiA8ZGl2IGNsYXNzPWNhcmQtaGVhZGVyPiBUYXJnZXQgPGJ1dHRvbiB0eXBlPWJ1dHRvbiBpZD1za2lwX2J1dHRvbiBjbGFzcz1zZWV0aHJvdWdoPnNraXAgKDxzcGFuIGlkPXNraXBzX2xlZnQ+Mjwvc3Bhbj4gbGVmdCk8L2J1dHRvbj4gPC9kaXY+IDxkaXYgY2xhc3M9dGFyZ2V0LWZvb3Rlcj4gPGRpdj4gPGRpdj5wb3NzaWJsZTogPHNwYW4gY2xhc3M9cG9zc2libGVfc3RlcHMgc3R5bGU9Zm9udC13ZWlnaHQ6NzAwPjU8L3NwYW4+IHN0ZXBzPC9kaXY+IDwvZGl2PiA8ZGl2PiA8ZGl2Pm1heGltdW06IDxzcGFuIGNsYXNzPW1heF9zdGVwcyBzdHlsZT1mb250LXdlaWdodDo3MDA+MTU8L3NwYW4+IHN0ZXBzPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPGNhbnZhcyBpZD10YXJnZXRfY2FudmFzIHdpZHRoPTUxMiBoZWlnaHQ9ODAwPjwvY2FudmFzPiA8L2Rpdj4gPGRpdiBjbGFzcz1oaXN0b3J5PiA8ZGl2IGNsYXNzPWNhcmQtaGVhZGVyPiBSZWNpcGUgU3RlcHMgKDxzcGFuIGNsYXNzPWN1cnJfc3RlcHM+MDwvc3Bhbj4vPHNwYW4gY2xhc3M9bWF4X3N0ZXBzPjEwMDwvc3Bhbj4pIDwvZGl2PiA8ZGl2IGNsYXNzPWhpc3Rvcnktc3RlcHMgaWQ9Y29tbWFuZF9oaXN0b3J5PjwvZGl2PiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPW1vZGFscz4gPGRpdiBjbGFzcz1tb2RhbC1jb250YWluZXIgaWQ9aGVscG1lPiA8ZGl2IGNsYXNzPW1vZGFsPiA8ZGl2IGNsYXNzPW1vZGFsLWhlYWRlcj4gSGVscCBmb3IgU0hSRExVUk4gKGVzYyB0byBjbG9zZSkgPC9kaXY+IDxkaXYgY2xhc3M9bW9kYWwtYm9keT4gPHA+IFRoZSBnb2FsIGlzIHRvIHRlYWNoIFNIUkRMVVJOICh0aGUgY29tcHV0ZXIpIHRvIHVuZGVyc3RhbmQgbW9yZSBFbmdsaXNoLiBZb3UgaGF2ZSB0byBkZWZpbmUgdGhpbmdzIGluIGEgd2F5IHRoYXQgY2FuIGFscmVhZHkgYmUgdW5kZXJzdG9vZCBieSBTSFJETFVSTi4gVGhpcyBpbmNsdWRlcyBhbnl0aGluZyB0aGF0IHlvdSBvciBvdGhlcnMgaGF2ZSBhbHJlYWR5IHRhdWdodCBpdCwgYXMgd2VsbCBhcyB0aGUgY29yZSBsYW5ndWFnZSBiZWxvdywgd2hpY2ggaXQgYWx3YXlzIHVuZGVyc3RhbmRzOiA8dWw+IDxsaT48Yj5udW1iZXI6IDwvYj4gMCwgMSwgMiwgLi4uLCA5LCBtYW55PC9saT4gPGxpPjxiPmNvbG9yOiA8L2I+IHJlZCwgY3lhbiwgYnJvd24sIHllbGxvdywgb3JhbmdlPC9saT4gPGxpPjxiPmFjdGlvbjogPC9iPiByZW1vdmUsIGFkZCBbY29sb3JdIDwvbGk+IDxsaT48Yj5jb25kaXRpb246IDwvYj4gdG9wIFtjb2xvcl0sIHJvdyA9IFtudW1iZXJdLCBoZWlnaHQgJmd0OyBbbnVtYmVyXSwgaGFzIFtjb2xvcl0sIGV0Yy4gPC9saT4gPGxpPjxiPmlmOiA8L2I+IFthY3Rpb25dIGlmIFtjb25kaXRpb25dIDx1bD4gPGxpPmFkZCByZWQgaWYgY29sID0gMSBvciBjb2wgPSA4IG9yIHJvdyA9IDEgb3Igcm93ID0gODwvbGk+IDxsaT5hZGQgcmVkIGlmIHJvdyAmbHQ7IDM8L2xpPiA8bGk+cmVtb3ZlIGlmIHRvcCByZWQ8L2xpPiA8L3VsPiA8L2xpPiA8bGk+PGI+Y29udHJvbDogPC9iPiBbYWN0aW9uXSB0aGVuIFthY3Rpb25dLCByZXBlYXQgW2FjdGlvbl0gMyB0aW1lcyA8dWw+IDxsaT5yZXBlYXQgcmVtb3ZlIGlmIGhhcyByZWQgbWFueSB0aW1lczwvbGk+IDxsaT5yZW1vdmUgdGhlbiBhZGQgcmVkIGlmIHRvcCB5ZWxsb3cgPC9saT4gPGxpPnJlcGVhdCBhZGQgcmVkIDMgdGltZXMgaWYgdG9wIHllbGxvdyBvciByb3cgJmx0OyAzIDwvbGk+IDxsaT5bcmVtb3ZlIHRoZW4gYWRkIHJlZCB0aGVuIGFkZCByZWRdIGlmIGhlaWdodCAmbHQ7IDE8L2xpPiA8bGk+cmVwZWF0IGFkZCByZWQgdGhlbiBhZGQgeWVsbG93IDUgdGltZXMgaWYgaGVpZ2h0ICZndDsgMCA8L2xpPiA8L3VsPiA8L2xpPiA8bGk+PGI+KGFkdmFuY2VkKSByZWxhdGl2ZSBjb25kaXRpb246IDwvYj4gcmVsYXRpdmVwb3Nfb2YgW2NvbmRpdGlvbl0gPHVsPiA8bGk+YWRkIHllbGxvdyBpZiBsZWZ0b2YgdG9wIHJlZDwvbGk+IDxsaT5hZGQgeWVsbG93IGlmIHJpZ2h0b2YgY29sID0gMzwvbGk+IDxsaT5hZGQgeWVsbG93IGlmIGJhY2tvZiBjb2wgPSByb3cgPC9saT4gPGxpPmFkZCB5ZWxsb3cgaWYgcmlnaHRvZiBmcm9udG9mIFtyb3cgPSA0IGFuZCBjb2wgPSA0XTwvbGk+IDwvdWw+IDwvbGk+IDxsaT48Yj4oYWR2YW5jZWQpIGV4dHJlbWVzOiA8L2I+IGxhcmdlc3QgWCBpbiBbY29uZGl0aW9uXSA8dWw+IDxsaT5hZGQgeWVsbG93IGlmIGxhcmdlc3Qgcm93IGluIGFsbDwvbGk+IDxsaT5hZGQgeWVsbG93IGlmIHNtYWxsZXN0IGNvbCBpbiB0b3AgcmVkPC9saT4gPC91bD4gPC9saT4gPGxpPjxiPihhZHZhbmNlZCkgaW5zaWRlOiA8L2I+IGluc2lkZSBbW2NvbmRpdGlvbl1dIDx1bD4gPGxpPmFkZCByZWQgaWYgaW5zaWRlIFt0b3AgcmVkXTwvbGk+IDxsaT5hZGQgcmVkIGlmIGluc2lkZSBbY29sID0gMSBvciBjb2wgPSA0XTwvbGk+IDxsaT5hZGQgY3lhbiBpZiBpbnNpZGUgWyBbIHJvdyA9IDEgb3Igcm93ID0gNCBdIGFuZCBbY29sID0gMSBvciBjb2wgPSA0XSBdIDwvbGk+IDwvdWw+IDwvbGk+IDwvdWw+IDwvcD4gPGgzPkJ1dCBpdCdzIG5vdCBhY2NlcHRpbmcgbXkgdGVhY2hpbmdzISA8L2gzPiA8dWw+IDxsaT4gU0hSRExVUk4gdW5kZXJzdGFuZHMgZXZlcnl0aGluZyBpbiBncmVlbiBib3hlcywgYmx1ZSBhcmUgd29yZHMgaXQga25vd3MgYnV0IG5vdCB1c2VkIGNvcnJlY3RseSwgcmVkIGFyZSB1bmtub3ducy48L2xpPiA8bGk+IDxzcGFuIHN0eWxlPWNvbG9yOnJlZD5ibGFoIDwvc3Bhbj4gPHNwYW4gY2xhc3M9Y29sb3ItZ29vZD5hZGQgcmVkIGlmIGhlaWdodCAmbHQ7IDEgPC9zcGFuPiA8c3BhbiBzdHlsZT1jb2xvcjojMDBmIDs9XFxcIlxcXCI+dGhlbiA8L3NwYW4+IDxzcGFuIHN0eWxlPWNvbG9yOiMwMGYgOz1cXFwiXFxcIj5pZiA8L3NwYW4+PHNwYW4gc3R5bGU9Y29sb3I6cmVkPnNvbWVibGFoIDwvc3Bhbj4gPHNwYW4gY2xhc3M9Y29sb3ItZ29vZD5hZGQgcmVkIDwvc3Bhbj4gPHNwYW4gY2xhc3M9Y29sb3ItZ29vZD5yZW1vdmUgcmVkIDwvc3Bhbj4gPC9saT4gPGxpPiBJZiB0aGVyZSBhcmUgc2V2ZXJhbCBncmVlbiBib3hlcywgdGhlbiBpdCB1bmRlcnN0YW5kcyBlYWNoIGJveCwgYnV0IG5vdCBob3cgdGhleSBhcmUgY29tYmluZWQuIEZvciBleGFtcGxlLCA8c3BhbiBjbGFzcz1jb2xvci1nb29kPmFkZCByZWQgPC9zcGFuPiA8c3BhbiBjbGFzcz1jb2xvci1nb29kPnJlbW92ZSByZWQgPC9zcGFuPiBuZWVkcyB0byBiZSBjaGFuZ2VkIHRvIDxzcGFuIGNsYXNzPWNvbG9yLWdvb2Q+YWRkIHJlZCB0aGVuIHJlbW92ZSByZWQgPC9zcGFuPjwvbGk+IDxsaT4gU3RpbGwsIGlmIG5vdGhpbmcgd29ya3MsIGNsb3NlIHRoZSBkZWZpbml0aW9uIHdpbmRvdyBhbmQgdGVhY2ggc29tZXRoaW5nIGVsc2UhPC9saT4gPC91bD4gPHA+IEVuZ2xpc2ggaXMgaGFyZCBmb3IgYmVnaW5uZXJzLCB3aGljaCBpcyB3aHkgd2UgbmVlZCB5b3VyIGhlbHAgdGVhY2hpbmcgU0hSRExVUk4hPC9wPiA8YSBjbGFzcz1cXFwiYnV0dG9uLS1jbG9zZWQgaGVscC10b2dnbGVcXFwiIGhyZWY9Iz5Pa2F5LCBnb3QgaXQhIChjbGljayBoZXJlIG9yIHByZXNzIEVTQyBrZXkgdG8gY2xvc2UgdGhpcyB3aW5kb3cpPC9hPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPW1vZGFsLWNvbnRhaW5lciBpZD1rZXlib2FyZF9zaG9ydGN1dHM+IDxkaXYgY2xhc3M9bW9kYWw+IDxkaXYgY2xhc3M9bW9kYWwtaGVhZGVyPiBLZXlib2FyZCBTaG9ydGN1dHMgPC9kaXY+IDxkaXYgY2xhc3M9bW9kYWwtYm9keT4gPHA+VG8gbWFrZSB5b3VyIGxpZmUgZWFzaWVyLCB3ZSBtYWRlIHRoZSBmb2xsb3cga2V5Ym9hcmQgc2hvcnRjdXRzIHNvIHRoYXQgeW91IGNhbiByYXBpZGx5IGJ1aWxkIHdpdGggU0hSRExVUk4hPC9wPiA8cD4gPHN0cm9uZz5lbnRlcjo8L3N0cm9uZz4gZW50ZXIgKHRyeSk8YnIvPiA8c3Ryb25nPmFjY2VwdDo8L3N0cm9uZz4gc2hpZnQtZW50ZXIgKOKckyk8YnIvPiA8c3Ryb25nPmRlZmluZTo8L3N0cm9uZz4gY3J0bC1kICh0ZWFjaCk8YnIvPiA8c3Ryb25nPuKGkTo8L3N0cm9uZz4gdXA8YnIvPiA8c3Ryb25nPuKGkzo8L3N0cm9uZz4gZG93bjxici8+IDxzdHJvbmc+dW5kbzo8L3N0cm9uZz4gY3RybC16PGJyLz4gPHN0cm9uZz5yZWRvOjwvc3Ryb25nPiBzaGlmdC1jdHJsLXogPC9wPiA8cD48YSBocmVmPVxcXCJcXFwiIGNsYXNzPWtleWJvYXJkLXRvZ2dsZT5Hb3QgaXQ/IEdyZWF0LiBDbGljayB0byBjbG9zZSB0aGlzIG5vdyAob3IgcHJlc3MgZXNjKS48L2E+PC9wPiA8L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPGxpbmsgaHJlZj1cXFwiaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3M/ZmFtaWx5PVJvYm90bzoxMDAsNDAwLDcwMFxcXCIgcmVsPXN0eWxlc2hlZXQ+IDxzY3JpcHQ+IWZ1bmN0aW9uKGUsYSx0LG4sYyxvLHMpe2UuR29vZ2xlQW5hbHl0aWNzT2JqZWN0PWMsZVtjXT1lW2NdfHxmdW5jdGlvbigpeyhlW2NdLnE9ZVtjXS5xfHxbXSkucHVzaChhcmd1bWVudHMpfSxlW2NdLmw9MSpuZXcgRGF0ZSxvPWEuY3JlYXRlRWxlbWVudCh0KSxzPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUodClbMF0sby5hc3luYz0xLG8uc3JjPW4scy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShvLHMpfSh3aW5kb3csZG9jdW1lbnQsXFxcInNjcmlwdFxcXCIsXFxcIi8vd3d3Lmdvb2dsZS1hbmFseXRpY3MuY29tL2FuYWx5dGljcy5qc1xcXCIsXFxcImdhXFxcIiksZ2EoXFxcImNyZWF0ZVxcXCIsXFxcIlVBLTc0NTA5OTEwLTFcXFwiLFxcXCJhdXRvXFxcIiksZ2EoXFxcInNlbmRcXFwiLFxcXCJwYWdldmlld1xcXCIpPC9zY3JpcHQ+IDwvYm9keT4gPC9odG1sPlwiO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vYXBwL2luZGV4Lmh0bWxcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==')},function(module,exports,__webpack_require__){eval('/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n/*globals window __webpack_hash__ */\r\nif(true) {\r\n\tvar lastHash;\r\n\tvar upToDate = function upToDate() {\r\n\t\treturn lastHash.indexOf(__webpack_require__.h()) >= 0;\r\n\t};\r\n\tvar check = function check() {\r\n\t\tmodule.hot.check().then(function(updatedModules) {\r\n\t\t\tif(!updatedModules) {\r\n\t\t\t\tconsole.warn("[HMR] Cannot find update. Need to do a full reload!");\r\n\t\t\t\tconsole.warn("[HMR] (Probably because of restarting the webpack-dev-server)");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tmodule.hot.apply({\r\n\t\t\t\tignoreUnaccepted: true,\r\n\t\t\t\tignoreDeclined: true,\r\n\t\t\t\tonUnaccepted: function(data) {\r\n\t\t\t\t\tconsole.warn("Ignored an update to unaccepted module " + data.chain.join(" -> "));\r\n\t\t\t\t},\r\n\t\t\t\tonDeclined: function(data) {\r\n\t\t\t\t\tconsole.warn("Ignored an update to declined module " + data.chain.join(" -> "));\r\n\t\t\t\t}\r\n\t\t\t}).then(function(renewedModules) {\r\n\t\t\t\tif(!upToDate()) {\r\n\t\t\t\t\tcheck();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t__webpack_require__(22)(updatedModules, renewedModules);\r\n\r\n\t\t\t\tif(upToDate()) {\r\n\t\t\t\t\tconsole.log("[HMR] App is up to date.");\r\n\t\t\t\t}\r\n\t\t\t}).catch(function(err) {\r\n\t\t\t\tvar status = module.hot.status();\r\n\t\t\t\tif(["abort", "fail"].indexOf(status) >= 0) {\r\n\t\t\t\t\tconsole.warn("[HMR] Cannot apply update. Need to do a full reload!");\r\n\t\t\t\t\tconsole.warn("[HMR] " + err.stack || err.message);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.warn("[HMR] Update failed: " + err.stack || err.message);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}).catch(function(err) {\r\n\t\t\tvar status = module.hot.status();\r\n\t\t\tif(["abort", "fail"].indexOf(status) >= 0) {\r\n\t\t\t\tconsole.warn("[HMR] Cannot check for update. Need to do a full reload!");\r\n\t\t\t\tconsole.warn("[HMR] " + err.stack || err.message);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.warn("[HMR] Update check failed: " + err.stack || err.message);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tvar hotEmitter = __webpack_require__(21);\r\n\thotEmitter.on("webpackHotUpdate", function(currentHash) {\r\n\t\tlastHash = currentHash;\r\n\t\tif(!upToDate()) {\r\n\t\t\tvar status = module.hot.status();\r\n\t\t\tif(status === "idle") {\r\n\t\t\t\tconsole.log("[HMR] Checking for updates on the server...");\r\n\t\t\t\tcheck();\r\n\t\t\t} else if(["abort", "fail"].indexOf(status) >= 0) {\r\n\t\t\t\tconsole.warn("[HMR] Cannot apply update as a previous update " + status + "ed. Need to do a full reload!");\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\tconsole.log("[HMR] Waiting for update signal from WDS...");\r\n} else {\r\n\tthrow new Error("[HMR] Hot Module Replacement is disabled.");\r\n}\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vKHdlYnBhY2spL2hvdC9vbmx5LWRldi1zZXJ2ZXIuanM/MmY4NyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsQ0FBQztBQUNEO0FBQ0EiLCJmaWxlIjoiNy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcclxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXHJcbiovXHJcbi8qZ2xvYmFscyB3aW5kb3cgX193ZWJwYWNrX2hhc2hfXyAqL1xyXG5pZihtb2R1bGUuaG90KSB7XHJcblx0dmFyIGxhc3RIYXNoO1xyXG5cdHZhciB1cFRvRGF0ZSA9IGZ1bmN0aW9uIHVwVG9EYXRlKCkge1xyXG5cdFx0cmV0dXJuIGxhc3RIYXNoLmluZGV4T2YoX193ZWJwYWNrX2hhc2hfXykgPj0gMDtcclxuXHR9O1xyXG5cdHZhciBjaGVjayA9IGZ1bmN0aW9uIGNoZWNrKCkge1xyXG5cdFx0bW9kdWxlLmhvdC5jaGVjaygpLnRoZW4oZnVuY3Rpb24odXBkYXRlZE1vZHVsZXMpIHtcclxuXHRcdFx0aWYoIXVwZGF0ZWRNb2R1bGVzKSB7XHJcblx0XHRcdFx0Y29uc29sZS53YXJuKFwiW0hNUl0gQ2Fubm90IGZpbmQgdXBkYXRlLiBOZWVkIHRvIGRvIGEgZnVsbCByZWxvYWQhXCIpO1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybihcIltITVJdIChQcm9iYWJseSBiZWNhdXNlIG9mIHJlc3RhcnRpbmcgdGhlIHdlYnBhY2stZGV2LXNlcnZlcilcIik7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRtb2R1bGUuaG90LmFwcGx5KHtcclxuXHRcdFx0XHRpZ25vcmVVbmFjY2VwdGVkOiB0cnVlLFxyXG5cdFx0XHRcdGlnbm9yZURlY2xpbmVkOiB0cnVlLFxyXG5cdFx0XHRcdG9uVW5hY2NlcHRlZDogZnVuY3Rpb24oZGF0YSkge1xyXG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKFwiSWdub3JlZCBhbiB1cGRhdGUgdG8gdW5hY2NlcHRlZCBtb2R1bGUgXCIgKyBkYXRhLmNoYWluLmpvaW4oXCIgLT4gXCIpKTtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdG9uRGVjbGluZWQ6IGZ1bmN0aW9uKGRhdGEpIHtcclxuXHRcdFx0XHRcdGNvbnNvbGUud2FybihcIklnbm9yZWQgYW4gdXBkYXRlIHRvIGRlY2xpbmVkIG1vZHVsZSBcIiArIGRhdGEuY2hhaW4uam9pbihcIiAtPiBcIikpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSkudGhlbihmdW5jdGlvbihyZW5ld2VkTW9kdWxlcykge1xyXG5cdFx0XHRcdGlmKCF1cFRvRGF0ZSgpKSB7XHJcblx0XHRcdFx0XHRjaGVjaygpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmVxdWlyZShcIi4vbG9nLWFwcGx5LXJlc3VsdFwiKSh1cGRhdGVkTW9kdWxlcywgcmVuZXdlZE1vZHVsZXMpO1xyXG5cclxuXHRcdFx0XHRpZih1cFRvRGF0ZSgpKSB7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIltITVJdIEFwcCBpcyB1cCB0byBkYXRlLlwiKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xyXG5cdFx0XHRcdHZhciBzdGF0dXMgPSBtb2R1bGUuaG90LnN0YXR1cygpO1xyXG5cdFx0XHRcdGlmKFtcImFib3J0XCIsIFwiZmFpbFwiXS5pbmRleE9mKHN0YXR1cykgPj0gMCkge1xyXG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKFwiW0hNUl0gQ2Fubm90IGFwcGx5IHVwZGF0ZS4gTmVlZCB0byBkbyBhIGZ1bGwgcmVsb2FkIVwiKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUud2FybihcIltITVJdIFwiICsgZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKFwiW0hNUl0gVXBkYXRlIGZhaWxlZDogXCIgKyBlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2UpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcclxuXHRcdFx0dmFyIHN0YXR1cyA9IG1vZHVsZS5ob3Quc3RhdHVzKCk7XHJcblx0XHRcdGlmKFtcImFib3J0XCIsIFwiZmFpbFwiXS5pbmRleE9mKHN0YXR1cykgPj0gMCkge1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybihcIltITVJdIENhbm5vdCBjaGVjayBmb3IgdXBkYXRlLiBOZWVkIHRvIGRvIGEgZnVsbCByZWxvYWQhXCIpO1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybihcIltITVJdIFwiICsgZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRjb25zb2xlLndhcm4oXCJbSE1SXSBVcGRhdGUgY2hlY2sgZmFpbGVkOiBcIiArIGVyci5zdGFjayB8fCBlcnIubWVzc2FnZSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH07XHJcblx0dmFyIGhvdEVtaXR0ZXIgPSByZXF1aXJlKFwiLi9lbWl0dGVyXCIpO1xyXG5cdGhvdEVtaXR0ZXIub24oXCJ3ZWJwYWNrSG90VXBkYXRlXCIsIGZ1bmN0aW9uKGN1cnJlbnRIYXNoKSB7XHJcblx0XHRsYXN0SGFzaCA9IGN1cnJlbnRIYXNoO1xyXG5cdFx0aWYoIXVwVG9EYXRlKCkpIHtcclxuXHRcdFx0dmFyIHN0YXR1cyA9IG1vZHVsZS5ob3Quc3RhdHVzKCk7XHJcblx0XHRcdGlmKHN0YXR1cyA9PT0gXCJpZGxlXCIpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIltITVJdIENoZWNraW5nIGZvciB1cGRhdGVzIG9uIHRoZSBzZXJ2ZXIuLi5cIik7XHJcblx0XHRcdFx0Y2hlY2soKTtcclxuXHRcdFx0fSBlbHNlIGlmKFtcImFib3J0XCIsIFwiZmFpbFwiXS5pbmRleE9mKHN0YXR1cykgPj0gMCkge1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybihcIltITVJdIENhbm5vdCBhcHBseSB1cGRhdGUgYXMgYSBwcmV2aW91cyB1cGRhdGUgXCIgKyBzdGF0dXMgKyBcImVkLiBOZWVkIHRvIGRvIGEgZnVsbCByZWxvYWQhXCIpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSk7XHJcblx0Y29uc29sZS5sb2coXCJbSE1SXSBXYWl0aW5nIGZvciB1cGRhdGUgc2lnbmFsIGZyb20gV0RTLi4uXCIpO1xyXG59IGVsc2Uge1xyXG5cdHRocm93IG5ldyBFcnJvcihcIltITVJdIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnQgaXMgZGlzYWJsZWQuXCIpO1xyXG59XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9ob3Qvb25seS1kZXYtc2VydmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=')},function(module,exports){eval('/**\n * Simple, lightweight, usable local autocomplete library for modern browsers\n * Because there weren’t enough autocomplete scripts in the world? Because I’m completely insane and have NIH syndrome? Probably both. :P\n * @author Lea Verou http://leaverou.github.io/awesomplete\n * MIT license\n */\n\n(function () {\n\nvar _ = function (input, o) {\n\tvar me = this;\n\n\t// Setup\n\n\tthis.input = $(input);\n\tthis.input.setAttribute("autocomplete", "off");\n\tthis.input.setAttribute("aria-autocomplete", "list");\n\n\to = o || {};\n\n\tconfigure(this, {\n\t\tminChars: 2,\n\t\tmaxItems: 10,\n\t\tautoFirst: false,\n\t\tdata: _.DATA,\n\t\tfilter: _.FILTER_CONTAINS,\n\t\tsort: _.SORT_BYLENGTH,\n\t\titem: _.ITEM,\n\t\treplace: _.REPLACE\n\t}, o);\n\n\tthis.index = -1;\n\n\t// Create necessary elements\n\n\tthis.container = $.create("div", {\n\t\tclassName: "awesomplete",\n\t\taround: input\n\t});\n\n\tthis.ul = $.create("ul", {\n\t\thidden: "hidden",\n\t\tinside: this.container\n\t});\n\n\tthis.status = $.create("span", {\n\t\tclassName: "visually-hidden",\n\t\trole: "status",\n\t\t"aria-live": "assertive",\n\t\t"aria-relevant": "additions",\n\t\tinside: this.container\n\t});\n\n\t// Bind events\n\n\t$.bind(this.input, {\n\t\t"input": this.evaluate.bind(this),\n\t\t"blur": this.close.bind(this, { reason: "blur" }),\n\t\t"keydown": function(evt) {\n\t\t\tvar c = evt.keyCode;\n\n\t\t\t// If the dropdown `ul` is in view, then act on keydown for the following keys:\n\t\t\t// Enter / Esc / Up / Down\n\t\t\tif(me.opened) {\n\t\t\t\tif (c === 13 && me.selected) { // Enter\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tme.select();\n\t\t\t\t}\n\t\t\t\telse if (c === 27) { // Esc\n\t\t\t\t\tme.close({ reason: "esc" });\n\t\t\t\t}\n\t\t\t\telse if (c === 38 || c === 40) { // Down/Up arrow\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tme[c === 38? "previous" : "next"]();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\t$.bind(this.input.form, {"submit": this.close.bind(this, { reason: "submit" })});\n\n\t$.bind(this.ul, {"mousedown": function(evt) {\n\t\tvar li = evt.target;\n\n\t\tif (li !== this) {\n\n\t\t\twhile (li && !/li/i.test(li.nodeName)) {\n\t\t\t\tli = li.parentNode;\n\t\t\t}\n\n\t\t\tif (li && evt.button === 0) {  // Only select on left click\n\t\t\t\tevt.preventDefault();\n\t\t\t\tme.select(li, evt.target);\n\t\t\t}\n\t\t}\n\t}});\n\n\tif (this.input.hasAttribute("list")) {\n\t\tthis.list = "#" + this.input.getAttribute("list");\n\t\tthis.input.removeAttribute("list");\n\t}\n\telse {\n\t\tthis.list = this.input.getAttribute("data-list") || o.list || [];\n\t}\n\n\t_.all.push(this);\n};\n\n_.prototype = {\n\tset list(list) {\n\t\tif (Array.isArray(list)) {\n\t\t\tthis._list = list;\n\t\t}\n\t\telse if (typeof list === "string" && list.indexOf(",") > -1) {\n\t\t\t\tthis._list = list.split(/\\s*,\\s*/);\n\t\t}\n\t\telse { // Element or CSS selector\n\t\t\tlist = $(list);\n\n\t\t\tif (list && list.children) {\n\t\t\t\tvar items = [];\n\t\t\t\tslice.apply(list.children).forEach(function (el) {\n\t\t\t\t\tif (!el.disabled) {\n\t\t\t\t\t\tvar text = el.textContent.trim();\n\t\t\t\t\t\tvar value = el.value || text;\n\t\t\t\t\t\tvar label = el.label || text;\n\t\t\t\t\t\tif (value !== "") {\n\t\t\t\t\t\t\titems.push({ label: label, value: value });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis._list = items;\n\t\t\t}\n\t\t}\n\n\t\tif (document.activeElement === this.input) {\n\t\t\tthis.evaluate();\n\t\t}\n\t},\n\n\tget selected() {\n\t\treturn this.index > -1;\n\t},\n\n\tget opened() {\n\t\treturn !this.ul.hasAttribute("hidden");\n\t},\n\n\tclose: function (o) {\n\t\tif (!this.opened) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.ul.setAttribute("hidden", "");\n\t\tthis.index = -1;\n\n\t\t$.fire(this.input, "awesomplete-close", o || {});\n\t},\n\n\topen: function () {\n\t\tthis.ul.removeAttribute("hidden");\n\n\t\tif (this.autoFirst && this.index === -1) {\n\t\t\tthis.goto(0);\n\t\t}\n\n\t\t$.fire(this.input, "awesomplete-open");\n\t},\n\n\tnext: function () {\n\t\tvar count = this.ul.children.length;\n\n\t\tthis.goto(this.index < count - 1? this.index + 1 : -1);\n\t},\n\n\tprevious: function () {\n\t\tvar count = this.ul.children.length;\n\n\t\tthis.goto(this.selected? this.index - 1 : count - 1);\n\t},\n\n\t// Should not be used, highlights specific item without any checks!\n\tgoto: function (i) {\n\t\tvar lis = this.ul.children;\n\n\t\tif (this.selected) {\n\t\t\tlis[this.index].setAttribute("aria-selected", "false");\n\t\t}\n\n\t\tthis.index = i;\n\n\t\tif (i > -1 && lis.length > 0) {\n\t\t\tlis[i].setAttribute("aria-selected", "true");\n\t\t\tthis.status.textContent = lis[i].textContent;\n\n\t\t\t$.fire(this.input, "awesomplete-highlight", {\n\t\t\t\ttext: this.suggestions[this.index]\n\t\t\t});\n\t\t}\n\t},\n\n\tselect: function (selected, origin) {\n\t\tif (selected) {\n\t\t\tthis.index = $.siblingIndex(selected);\n\t\t} else {\n\t\t\tselected = this.ul.children[this.index];\n\t\t}\n\n\t\tif (selected) {\n\t\t\tvar suggestion = this.suggestions[this.index];\n\n\t\t\tvar allowed = $.fire(this.input, "awesomplete-select", {\n\t\t\t\ttext: suggestion,\n\t\t\t\torigin: origin || selected\n\t\t\t});\n\n\t\t\tif (allowed) {\n\t\t\t\tthis.replace(suggestion);\n\t\t\t\tthis.close({ reason: "select" });\n\t\t\t\t$.fire(this.input, "awesomplete-selectcomplete", {\n\t\t\t\t\ttext: suggestion\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\n\tevaluate: function() {\n\t\tvar me = this;\n\t\tvar value = this.input.value;\n\n\t\tif (value.length >= this.minChars && this._list.length > 0) {\n\t\t\tthis.index = -1;\n\t\t\t// Populate list with options that match\n\t\t\tthis.ul.innerHTML = "";\n\n\t\t\tthis.suggestions = this._list\n\t\t\t\t.map(function(item) {\n\t\t\t\t\treturn new Suggestion(me.data(item, value));\n\t\t\t\t})\n\t\t\t\t.filter(function(item) {\n\t\t\t\t\treturn me.filter(item, value);\n\t\t\t\t})\n\t\t\t\t.sort(this.sort)\n\t\t\t\t.slice(0, this.maxItems);\n\n\t\t\tthis.suggestions.forEach(function(text) {\n\t\t\t\t\tme.ul.appendChild(me.item(text, value));\n\t\t\t\t});\n\n\t\t\tif (this.ul.children.length === 0) {\n\t\t\t\tthis.close({ reason: "nomatches" });\n\t\t\t} else {\n\t\t\t\tthis.open();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.close({ reason: "nomatches" });\n\t\t}\n\t}\n};\n\n// Static methods/properties\n\n_.all = [];\n\n_.FILTER_CONTAINS = function (text, input) {\n\treturn RegExp($.regExpEscape(input.trim()), "i").test(text);\n};\n\n_.FILTER_STARTSWITH = function (text, input) {\n\treturn RegExp("^" + $.regExpEscape(input.trim()), "i").test(text);\n};\n\n_.SORT_BYLENGTH = function (a, b) {\n\tif (a.length !== b.length) {\n\t\treturn a.length - b.length;\n\t}\n\n\treturn a < b? -1 : 1;\n};\n\n_.ITEM = function (text, input) {\n\tvar html = input === \'\' ? text : text.replace(RegExp($.regExpEscape(input.trim()), "gi"), "<mark>$&</mark>");\n\treturn $.create("li", {\n\t\tinnerHTML: html,\n\t\t"aria-selected": "false"\n\t});\n};\n\n_.REPLACE = function (text) {\n\tthis.input.value = text.value;\n};\n\n_.DATA = function (item/*, input*/) { return item; };\n\n// Private functions\n\nfunction Suggestion(data) {\n\tvar o = Array.isArray(data)\n\t  ? { label: data[0], value: data[1] }\n\t  : typeof data === "object" && "label" in data && "value" in data ? data : { label: data, value: data };\n\n\tthis.label = o.label || o.value;\n\tthis.value = o.value;\n}\nObject.defineProperty(Suggestion.prototype = Object.create(String.prototype), "length", {\n\tget: function() { return this.label.length; }\n});\nSuggestion.prototype.toString = Suggestion.prototype.valueOf = function () {\n\treturn "" + this.label;\n};\n\nfunction configure(instance, properties, o) {\n\tfor (var i in properties) {\n\t\tvar initial = properties[i],\n\t\t    attrValue = instance.input.getAttribute("data-" + i.toLowerCase());\n\n\t\tif (typeof initial === "number") {\n\t\t\tinstance[i] = parseInt(attrValue);\n\t\t}\n\t\telse if (initial === false) { // Boolean options must be false by default anyway\n\t\t\tinstance[i] = attrValue !== null;\n\t\t}\n\t\telse if (initial instanceof Function) {\n\t\t\tinstance[i] = null;\n\t\t}\n\t\telse {\n\t\t\tinstance[i] = attrValue;\n\t\t}\n\n\t\tif (!instance[i] && instance[i] !== 0) {\n\t\t\tinstance[i] = (i in o)? o[i] : initial;\n\t\t}\n\t}\n}\n\n// Helpers\n\nvar slice = Array.prototype.slice;\n\nfunction $(expr, con) {\n\treturn typeof expr === "string"? (con || document).querySelector(expr) : expr || null;\n}\n\nfunction $$(expr, con) {\n\treturn slice.call((con || document).querySelectorAll(expr));\n}\n\n$.create = function(tag, o) {\n\tvar element = document.createElement(tag);\n\n\tfor (var i in o) {\n\t\tvar val = o[i];\n\n\t\tif (i === "inside") {\n\t\t\t$(val).appendChild(element);\n\t\t}\n\t\telse if (i === "around") {\n\t\t\tvar ref = $(val);\n\t\t\tref.parentNode.insertBefore(element, ref);\n\t\t\telement.appendChild(ref);\n\t\t}\n\t\telse if (i in element) {\n\t\t\telement[i] = val;\n\t\t}\n\t\telse {\n\t\t\telement.setAttribute(i, val);\n\t\t}\n\t}\n\n\treturn element;\n};\n\n$.bind = function(element, o) {\n\tif (element) {\n\t\tfor (var event in o) {\n\t\t\tvar callback = o[event];\n\n\t\t\tevent.split(/\\s+/).forEach(function (event) {\n\t\t\t\telement.addEventListener(event, callback);\n\t\t\t});\n\t\t}\n\t}\n};\n\n$.fire = function(target, type, properties) {\n\tvar evt = document.createEvent("HTMLEvents");\n\n\tevt.initEvent(type, true, true );\n\n\tfor (var j in properties) {\n\t\tevt[j] = properties[j];\n\t}\n\n\treturn target.dispatchEvent(evt);\n};\n\n$.regExpEscape = function (s) {\n\treturn s.replace(/[-\\\\^$*+?.()|[\\]{}]/g, "\\\\$&");\n};\n\n$.siblingIndex = function (el) {\n\t/* eslint-disable no-cond-assign */\n\tfor (var i = 0; el = el.previousElementSibling; i++);\n\treturn i;\n};\n\n// Initialization\n\nfunction init() {\n\t$$("input.awesomplete").forEach(function (input) {\n\t\tnew _(input);\n\t});\n}\n\n// Are we in a browser? Check for Document constructor\nif (typeof Document !== "undefined") {\n\t// DOM already loaded?\n\tif (document.readyState !== "loading") {\n\t\tinit();\n\t}\n\telse {\n\t\t// Wait for it\n\t\tdocument.addEventListener("DOMContentLoaded", init);\n\t}\n}\n\n_.$ = $;\n_.$$ = $$;\n\n// Make sure to export Awesomplete on self when in a browser\nif (typeof self !== "undefined") {\n\tself.Awesomplete = _;\n}\n\n// Expose Awesomplete as a CJS module\nif (typeof module === "object" && module.exports) {\n\tmodule.exports = _;\n}\n\nreturn _;\n\n}());\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L2F3ZXNvbXBsZXRlL2F3ZXNvbXBsZXRlLmpzP2MxYzYiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBLGlDQUFpQyxpQkFBaUI7QUFDbEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCLGVBQWUsZ0JBQWdCO0FBQy9CO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGLDBCQUEwQixpQ0FBaUMsbUJBQW1CLEVBQUU7O0FBRWhGLGtCQUFrQjtBQUNsQjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw2QkFBNkI7QUFDaEQ7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGlEQUFpRDtBQUNqRCxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLGdCQUFnQixtQkFBbUI7QUFDbkM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLGdCQUFnQixzQkFBc0I7QUFDdEMsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxxQ0FBcUMsYUFBYTs7QUFFbEQ7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTiw4RUFBOEU7O0FBRTlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDBCQUEwQjtBQUM1QyxDQUFDO0FBQ0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLHFDQUFxQztBQUNyQzs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLGdDQUFnQztBQUNoRDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQyIsImZpbGUiOiI4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTaW1wbGUsIGxpZ2h0d2VpZ2h0LCB1c2FibGUgbG9jYWwgYXV0b2NvbXBsZXRlIGxpYnJhcnkgZm9yIG1vZGVybiBicm93c2Vyc1xuICogQmVjYXVzZSB0aGVyZSB3ZXJlbuKAmXQgZW5vdWdoIGF1dG9jb21wbGV0ZSBzY3JpcHRzIGluIHRoZSB3b3JsZD8gQmVjYXVzZSBJ4oCZbSBjb21wbGV0ZWx5IGluc2FuZSBhbmQgaGF2ZSBOSUggc3luZHJvbWU/IFByb2JhYmx5IGJvdGguIDpQXG4gKiBAYXV0aG9yIExlYSBWZXJvdSBodHRwOi8vbGVhdmVyb3UuZ2l0aHViLmlvL2F3ZXNvbXBsZXRlXG4gKiBNSVQgbGljZW5zZVxuICovXG5cbihmdW5jdGlvbiAoKSB7XG5cbnZhciBfID0gZnVuY3Rpb24gKGlucHV0LCBvKSB7XG5cdHZhciBtZSA9IHRoaXM7XG5cblx0Ly8gU2V0dXBcblxuXHR0aGlzLmlucHV0ID0gJChpbnB1dCk7XG5cdHRoaXMuaW5wdXQuc2V0QXR0cmlidXRlKFwiYXV0b2NvbXBsZXRlXCIsIFwib2ZmXCIpO1xuXHR0aGlzLmlucHV0LnNldEF0dHJpYnV0ZShcImFyaWEtYXV0b2NvbXBsZXRlXCIsIFwibGlzdFwiKTtcblxuXHRvID0gbyB8fCB7fTtcblxuXHRjb25maWd1cmUodGhpcywge1xuXHRcdG1pbkNoYXJzOiAyLFxuXHRcdG1heEl0ZW1zOiAxMCxcblx0XHRhdXRvRmlyc3Q6IGZhbHNlLFxuXHRcdGRhdGE6IF8uREFUQSxcblx0XHRmaWx0ZXI6IF8uRklMVEVSX0NPTlRBSU5TLFxuXHRcdHNvcnQ6IF8uU09SVF9CWUxFTkdUSCxcblx0XHRpdGVtOiBfLklURU0sXG5cdFx0cmVwbGFjZTogXy5SRVBMQUNFXG5cdH0sIG8pO1xuXG5cdHRoaXMuaW5kZXggPSAtMTtcblxuXHQvLyBDcmVhdGUgbmVjZXNzYXJ5IGVsZW1lbnRzXG5cblx0dGhpcy5jb250YWluZXIgPSAkLmNyZWF0ZShcImRpdlwiLCB7XG5cdFx0Y2xhc3NOYW1lOiBcImF3ZXNvbXBsZXRlXCIsXG5cdFx0YXJvdW5kOiBpbnB1dFxuXHR9KTtcblxuXHR0aGlzLnVsID0gJC5jcmVhdGUoXCJ1bFwiLCB7XG5cdFx0aGlkZGVuOiBcImhpZGRlblwiLFxuXHRcdGluc2lkZTogdGhpcy5jb250YWluZXJcblx0fSk7XG5cblx0dGhpcy5zdGF0dXMgPSAkLmNyZWF0ZShcInNwYW5cIiwge1xuXHRcdGNsYXNzTmFtZTogXCJ2aXN1YWxseS1oaWRkZW5cIixcblx0XHRyb2xlOiBcInN0YXR1c1wiLFxuXHRcdFwiYXJpYS1saXZlXCI6IFwiYXNzZXJ0aXZlXCIsXG5cdFx0XCJhcmlhLXJlbGV2YW50XCI6IFwiYWRkaXRpb25zXCIsXG5cdFx0aW5zaWRlOiB0aGlzLmNvbnRhaW5lclxuXHR9KTtcblxuXHQvLyBCaW5kIGV2ZW50c1xuXG5cdCQuYmluZCh0aGlzLmlucHV0LCB7XG5cdFx0XCJpbnB1dFwiOiB0aGlzLmV2YWx1YXRlLmJpbmQodGhpcyksXG5cdFx0XCJibHVyXCI6IHRoaXMuY2xvc2UuYmluZCh0aGlzLCB7IHJlYXNvbjogXCJibHVyXCIgfSksXG5cdFx0XCJrZXlkb3duXCI6IGZ1bmN0aW9uKGV2dCkge1xuXHRcdFx0dmFyIGMgPSBldnQua2V5Q29kZTtcblxuXHRcdFx0Ly8gSWYgdGhlIGRyb3Bkb3duIGB1bGAgaXMgaW4gdmlldywgdGhlbiBhY3Qgb24ga2V5ZG93biBmb3IgdGhlIGZvbGxvd2luZyBrZXlzOlxuXHRcdFx0Ly8gRW50ZXIgLyBFc2MgLyBVcCAvIERvd25cblx0XHRcdGlmKG1lLm9wZW5lZCkge1xuXHRcdFx0XHRpZiAoYyA9PT0gMTMgJiYgbWUuc2VsZWN0ZWQpIHsgLy8gRW50ZXJcblx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRtZS5zZWxlY3QoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIGlmIChjID09PSAyNykgeyAvLyBFc2Ncblx0XHRcdFx0XHRtZS5jbG9zZSh7IHJlYXNvbjogXCJlc2NcIiB9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIGlmIChjID09PSAzOCB8fCBjID09PSA0MCkgeyAvLyBEb3duL1VwIGFycm93XG5cdFx0XHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0bWVbYyA9PT0gMzg/IFwicHJldmlvdXNcIiA6IFwibmV4dFwiXSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcblxuXHQkLmJpbmQodGhpcy5pbnB1dC5mb3JtLCB7XCJzdWJtaXRcIjogdGhpcy5jbG9zZS5iaW5kKHRoaXMsIHsgcmVhc29uOiBcInN1Ym1pdFwiIH0pfSk7XG5cblx0JC5iaW5kKHRoaXMudWwsIHtcIm1vdXNlZG93blwiOiBmdW5jdGlvbihldnQpIHtcblx0XHR2YXIgbGkgPSBldnQudGFyZ2V0O1xuXG5cdFx0aWYgKGxpICE9PSB0aGlzKSB7XG5cblx0XHRcdHdoaWxlIChsaSAmJiAhL2xpL2kudGVzdChsaS5ub2RlTmFtZSkpIHtcblx0XHRcdFx0bGkgPSBsaS5wYXJlbnROb2RlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAobGkgJiYgZXZ0LmJ1dHRvbiA9PT0gMCkgeyAgLy8gT25seSBzZWxlY3Qgb24gbGVmdCBjbGlja1xuXHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0bWUuc2VsZWN0KGxpLCBldnQudGFyZ2V0KTtcblx0XHRcdH1cblx0XHR9XG5cdH19KTtcblxuXHRpZiAodGhpcy5pbnB1dC5oYXNBdHRyaWJ1dGUoXCJsaXN0XCIpKSB7XG5cdFx0dGhpcy5saXN0ID0gXCIjXCIgKyB0aGlzLmlucHV0LmdldEF0dHJpYnV0ZShcImxpc3RcIik7XG5cdFx0dGhpcy5pbnB1dC5yZW1vdmVBdHRyaWJ1dGUoXCJsaXN0XCIpO1xuXHR9XG5cdGVsc2Uge1xuXHRcdHRoaXMubGlzdCA9IHRoaXMuaW5wdXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1saXN0XCIpIHx8IG8ubGlzdCB8fCBbXTtcblx0fVxuXG5cdF8uYWxsLnB1c2godGhpcyk7XG59O1xuXG5fLnByb3RvdHlwZSA9IHtcblx0c2V0IGxpc3QobGlzdCkge1xuXHRcdGlmIChBcnJheS5pc0FycmF5KGxpc3QpKSB7XG5cdFx0XHR0aGlzLl9saXN0ID0gbGlzdDtcblx0XHR9XG5cdFx0ZWxzZSBpZiAodHlwZW9mIGxpc3QgPT09IFwic3RyaW5nXCIgJiYgbGlzdC5pbmRleE9mKFwiLFwiKSA+IC0xKSB7XG5cdFx0XHRcdHRoaXMuX2xpc3QgPSBsaXN0LnNwbGl0KC9cXHMqLFxccyovKTtcblx0XHR9XG5cdFx0ZWxzZSB7IC8vIEVsZW1lbnQgb3IgQ1NTIHNlbGVjdG9yXG5cdFx0XHRsaXN0ID0gJChsaXN0KTtcblxuXHRcdFx0aWYgKGxpc3QgJiYgbGlzdC5jaGlsZHJlbikge1xuXHRcdFx0XHR2YXIgaXRlbXMgPSBbXTtcblx0XHRcdFx0c2xpY2UuYXBwbHkobGlzdC5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHtcblx0XHRcdFx0XHRpZiAoIWVsLmRpc2FibGVkKSB7XG5cdFx0XHRcdFx0XHR2YXIgdGV4dCA9IGVsLnRleHRDb250ZW50LnRyaW0oKTtcblx0XHRcdFx0XHRcdHZhciB2YWx1ZSA9IGVsLnZhbHVlIHx8IHRleHQ7XG5cdFx0XHRcdFx0XHR2YXIgbGFiZWwgPSBlbC5sYWJlbCB8fCB0ZXh0O1xuXHRcdFx0XHRcdFx0aWYgKHZhbHVlICE9PSBcIlwiKSB7XG5cdFx0XHRcdFx0XHRcdGl0ZW1zLnB1c2goeyBsYWJlbDogbGFiZWwsIHZhbHVlOiB2YWx1ZSB9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHR0aGlzLl9saXN0ID0gaXRlbXM7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IHRoaXMuaW5wdXQpIHtcblx0XHRcdHRoaXMuZXZhbHVhdGUoKTtcblx0XHR9XG5cdH0sXG5cblx0Z2V0IHNlbGVjdGVkKCkge1xuXHRcdHJldHVybiB0aGlzLmluZGV4ID4gLTE7XG5cdH0sXG5cblx0Z2V0IG9wZW5lZCgpIHtcblx0XHRyZXR1cm4gIXRoaXMudWwuaGFzQXR0cmlidXRlKFwiaGlkZGVuXCIpO1xuXHR9LFxuXG5cdGNsb3NlOiBmdW5jdGlvbiAobykge1xuXHRcdGlmICghdGhpcy5vcGVuZWQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLnVsLnNldEF0dHJpYnV0ZShcImhpZGRlblwiLCBcIlwiKTtcblx0XHR0aGlzLmluZGV4ID0gLTE7XG5cblx0XHQkLmZpcmUodGhpcy5pbnB1dCwgXCJhd2Vzb21wbGV0ZS1jbG9zZVwiLCBvIHx8IHt9KTtcblx0fSxcblxuXHRvcGVuOiBmdW5jdGlvbiAoKSB7XG5cdFx0dGhpcy51bC5yZW1vdmVBdHRyaWJ1dGUoXCJoaWRkZW5cIik7XG5cblx0XHRpZiAodGhpcy5hdXRvRmlyc3QgJiYgdGhpcy5pbmRleCA9PT0gLTEpIHtcblx0XHRcdHRoaXMuZ290bygwKTtcblx0XHR9XG5cblx0XHQkLmZpcmUodGhpcy5pbnB1dCwgXCJhd2Vzb21wbGV0ZS1vcGVuXCIpO1xuXHR9LFxuXG5cdG5leHQ6IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgY291bnQgPSB0aGlzLnVsLmNoaWxkcmVuLmxlbmd0aDtcblxuXHRcdHRoaXMuZ290byh0aGlzLmluZGV4IDwgY291bnQgLSAxPyB0aGlzLmluZGV4ICsgMSA6IC0xKTtcblx0fSxcblxuXHRwcmV2aW91czogZnVuY3Rpb24gKCkge1xuXHRcdHZhciBjb3VudCA9IHRoaXMudWwuY2hpbGRyZW4ubGVuZ3RoO1xuXG5cdFx0dGhpcy5nb3RvKHRoaXMuc2VsZWN0ZWQ/IHRoaXMuaW5kZXggLSAxIDogY291bnQgLSAxKTtcblx0fSxcblxuXHQvLyBTaG91bGQgbm90IGJlIHVzZWQsIGhpZ2hsaWdodHMgc3BlY2lmaWMgaXRlbSB3aXRob3V0IGFueSBjaGVja3MhXG5cdGdvdG86IGZ1bmN0aW9uIChpKSB7XG5cdFx0dmFyIGxpcyA9IHRoaXMudWwuY2hpbGRyZW47XG5cblx0XHRpZiAodGhpcy5zZWxlY3RlZCkge1xuXHRcdFx0bGlzW3RoaXMuaW5kZXhdLnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiwgXCJmYWxzZVwiKTtcblx0XHR9XG5cblx0XHR0aGlzLmluZGV4ID0gaTtcblxuXHRcdGlmIChpID4gLTEgJiYgbGlzLmxlbmd0aCA+IDApIHtcblx0XHRcdGxpc1tpXS5zZXRBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIsIFwidHJ1ZVwiKTtcblx0XHRcdHRoaXMuc3RhdHVzLnRleHRDb250ZW50ID0gbGlzW2ldLnRleHRDb250ZW50O1xuXG5cdFx0XHQkLmZpcmUodGhpcy5pbnB1dCwgXCJhd2Vzb21wbGV0ZS1oaWdobGlnaHRcIiwge1xuXHRcdFx0XHR0ZXh0OiB0aGlzLnN1Z2dlc3Rpb25zW3RoaXMuaW5kZXhdXG5cdFx0XHR9KTtcblx0XHR9XG5cdH0sXG5cblx0c2VsZWN0OiBmdW5jdGlvbiAoc2VsZWN0ZWQsIG9yaWdpbikge1xuXHRcdGlmIChzZWxlY3RlZCkge1xuXHRcdFx0dGhpcy5pbmRleCA9ICQuc2libGluZ0luZGV4KHNlbGVjdGVkKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c2VsZWN0ZWQgPSB0aGlzLnVsLmNoaWxkcmVuW3RoaXMuaW5kZXhdO1xuXHRcdH1cblxuXHRcdGlmIChzZWxlY3RlZCkge1xuXHRcdFx0dmFyIHN1Z2dlc3Rpb24gPSB0aGlzLnN1Z2dlc3Rpb25zW3RoaXMuaW5kZXhdO1xuXG5cdFx0XHR2YXIgYWxsb3dlZCA9ICQuZmlyZSh0aGlzLmlucHV0LCBcImF3ZXNvbXBsZXRlLXNlbGVjdFwiLCB7XG5cdFx0XHRcdHRleHQ6IHN1Z2dlc3Rpb24sXG5cdFx0XHRcdG9yaWdpbjogb3JpZ2luIHx8IHNlbGVjdGVkXG5cdFx0XHR9KTtcblxuXHRcdFx0aWYgKGFsbG93ZWQpIHtcblx0XHRcdFx0dGhpcy5yZXBsYWNlKHN1Z2dlc3Rpb24pO1xuXHRcdFx0XHR0aGlzLmNsb3NlKHsgcmVhc29uOiBcInNlbGVjdFwiIH0pO1xuXHRcdFx0XHQkLmZpcmUodGhpcy5pbnB1dCwgXCJhd2Vzb21wbGV0ZS1zZWxlY3Rjb21wbGV0ZVwiLCB7XG5cdFx0XHRcdFx0dGV4dDogc3VnZ2VzdGlvblxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0ZXZhbHVhdGU6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBtZSA9IHRoaXM7XG5cdFx0dmFyIHZhbHVlID0gdGhpcy5pbnB1dC52YWx1ZTtcblxuXHRcdGlmICh2YWx1ZS5sZW5ndGggPj0gdGhpcy5taW5DaGFycyAmJiB0aGlzLl9saXN0Lmxlbmd0aCA+IDApIHtcblx0XHRcdHRoaXMuaW5kZXggPSAtMTtcblx0XHRcdC8vIFBvcHVsYXRlIGxpc3Qgd2l0aCBvcHRpb25zIHRoYXQgbWF0Y2hcblx0XHRcdHRoaXMudWwuaW5uZXJIVE1MID0gXCJcIjtcblxuXHRcdFx0dGhpcy5zdWdnZXN0aW9ucyA9IHRoaXMuX2xpc3Rcblx0XHRcdFx0Lm1hcChmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBTdWdnZXN0aW9uKG1lLmRhdGEoaXRlbSwgdmFsdWUpKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmZpbHRlcihmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG1lLmZpbHRlcihpdGVtLCB2YWx1ZSk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5zb3J0KHRoaXMuc29ydClcblx0XHRcdFx0LnNsaWNlKDAsIHRoaXMubWF4SXRlbXMpO1xuXG5cdFx0XHR0aGlzLnN1Z2dlc3Rpb25zLmZvckVhY2goZnVuY3Rpb24odGV4dCkge1xuXHRcdFx0XHRcdG1lLnVsLmFwcGVuZENoaWxkKG1lLml0ZW0odGV4dCwgdmFsdWUpKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdGlmICh0aGlzLnVsLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHR0aGlzLmNsb3NlKHsgcmVhc29uOiBcIm5vbWF0Y2hlc1wiIH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5vcGVuKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0dGhpcy5jbG9zZSh7IHJlYXNvbjogXCJub21hdGNoZXNcIiB9KTtcblx0XHR9XG5cdH1cbn07XG5cbi8vIFN0YXRpYyBtZXRob2RzL3Byb3BlcnRpZXNcblxuXy5hbGwgPSBbXTtcblxuXy5GSUxURVJfQ09OVEFJTlMgPSBmdW5jdGlvbiAodGV4dCwgaW5wdXQpIHtcblx0cmV0dXJuIFJlZ0V4cCgkLnJlZ0V4cEVzY2FwZShpbnB1dC50cmltKCkpLCBcImlcIikudGVzdCh0ZXh0KTtcbn07XG5cbl8uRklMVEVSX1NUQVJUU1dJVEggPSBmdW5jdGlvbiAodGV4dCwgaW5wdXQpIHtcblx0cmV0dXJuIFJlZ0V4cChcIl5cIiArICQucmVnRXhwRXNjYXBlKGlucHV0LnRyaW0oKSksIFwiaVwiKS50ZXN0KHRleHQpO1xufTtcblxuXy5TT1JUX0JZTEVOR1RIID0gZnVuY3Rpb24gKGEsIGIpIHtcblx0aWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuXHRcdHJldHVybiBhLmxlbmd0aCAtIGIubGVuZ3RoO1xuXHR9XG5cblx0cmV0dXJuIGEgPCBiPyAtMSA6IDE7XG59O1xuXG5fLklURU0gPSBmdW5jdGlvbiAodGV4dCwgaW5wdXQpIHtcblx0dmFyIGh0bWwgPSBpbnB1dCA9PT0gJycgPyB0ZXh0IDogdGV4dC5yZXBsYWNlKFJlZ0V4cCgkLnJlZ0V4cEVzY2FwZShpbnB1dC50cmltKCkpLCBcImdpXCIpLCBcIjxtYXJrPiQmPC9tYXJrPlwiKTtcblx0cmV0dXJuICQuY3JlYXRlKFwibGlcIiwge1xuXHRcdGlubmVySFRNTDogaHRtbCxcblx0XHRcImFyaWEtc2VsZWN0ZWRcIjogXCJmYWxzZVwiXG5cdH0pO1xufTtcblxuXy5SRVBMQUNFID0gZnVuY3Rpb24gKHRleHQpIHtcblx0dGhpcy5pbnB1dC52YWx1ZSA9IHRleHQudmFsdWU7XG59O1xuXG5fLkRBVEEgPSBmdW5jdGlvbiAoaXRlbS8qLCBpbnB1dCovKSB7IHJldHVybiBpdGVtOyB9O1xuXG4vLyBQcml2YXRlIGZ1bmN0aW9uc1xuXG5mdW5jdGlvbiBTdWdnZXN0aW9uKGRhdGEpIHtcblx0dmFyIG8gPSBBcnJheS5pc0FycmF5KGRhdGEpXG5cdCAgPyB7IGxhYmVsOiBkYXRhWzBdLCB2YWx1ZTogZGF0YVsxXSB9XG5cdCAgOiB0eXBlb2YgZGF0YSA9PT0gXCJvYmplY3RcIiAmJiBcImxhYmVsXCIgaW4gZGF0YSAmJiBcInZhbHVlXCIgaW4gZGF0YSA/IGRhdGEgOiB7IGxhYmVsOiBkYXRhLCB2YWx1ZTogZGF0YSB9O1xuXG5cdHRoaXMubGFiZWwgPSBvLmxhYmVsIHx8IG8udmFsdWU7XG5cdHRoaXMudmFsdWUgPSBvLnZhbHVlO1xufVxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1Z2dlc3Rpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdHJpbmcucHJvdG90eXBlKSwgXCJsZW5ndGhcIiwge1xuXHRnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5sYWJlbC5sZW5ndGg7IH1cbn0pO1xuU3VnZ2VzdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBTdWdnZXN0aW9uLnByb3RvdHlwZS52YWx1ZU9mID0gZnVuY3Rpb24gKCkge1xuXHRyZXR1cm4gXCJcIiArIHRoaXMubGFiZWw7XG59O1xuXG5mdW5jdGlvbiBjb25maWd1cmUoaW5zdGFuY2UsIHByb3BlcnRpZXMsIG8pIHtcblx0Zm9yICh2YXIgaSBpbiBwcm9wZXJ0aWVzKSB7XG5cdFx0dmFyIGluaXRpYWwgPSBwcm9wZXJ0aWVzW2ldLFxuXHRcdCAgICBhdHRyVmFsdWUgPSBpbnN0YW5jZS5pbnB1dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLVwiICsgaS50b0xvd2VyQ2FzZSgpKTtcblxuXHRcdGlmICh0eXBlb2YgaW5pdGlhbCA9PT0gXCJudW1iZXJcIikge1xuXHRcdFx0aW5zdGFuY2VbaV0gPSBwYXJzZUludChhdHRyVmFsdWUpO1xuXHRcdH1cblx0XHRlbHNlIGlmIChpbml0aWFsID09PSBmYWxzZSkgeyAvLyBCb29sZWFuIG9wdGlvbnMgbXVzdCBiZSBmYWxzZSBieSBkZWZhdWx0IGFueXdheVxuXHRcdFx0aW5zdGFuY2VbaV0gPSBhdHRyVmFsdWUgIT09IG51bGw7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKGluaXRpYWwgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuXHRcdFx0aW5zdGFuY2VbaV0gPSBudWxsO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGluc3RhbmNlW2ldID0gYXR0clZhbHVlO1xuXHRcdH1cblxuXHRcdGlmICghaW5zdGFuY2VbaV0gJiYgaW5zdGFuY2VbaV0gIT09IDApIHtcblx0XHRcdGluc3RhbmNlW2ldID0gKGkgaW4gbyk/IG9baV0gOiBpbml0aWFsO1xuXHRcdH1cblx0fVxufVxuXG4vLyBIZWxwZXJzXG5cbnZhciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblxuZnVuY3Rpb24gJChleHByLCBjb24pIHtcblx0cmV0dXJuIHR5cGVvZiBleHByID09PSBcInN0cmluZ1wiPyAoY29uIHx8IGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yKGV4cHIpIDogZXhwciB8fCBudWxsO1xufVxuXG5mdW5jdGlvbiAkJChleHByLCBjb24pIHtcblx0cmV0dXJuIHNsaWNlLmNhbGwoKGNvbiB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChleHByKSk7XG59XG5cbiQuY3JlYXRlID0gZnVuY3Rpb24odGFnLCBvKSB7XG5cdHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuXG5cdGZvciAodmFyIGkgaW4gbykge1xuXHRcdHZhciB2YWwgPSBvW2ldO1xuXG5cdFx0aWYgKGkgPT09IFwiaW5zaWRlXCIpIHtcblx0XHRcdCQodmFsKS5hcHBlbmRDaGlsZChlbGVtZW50KTtcblx0XHR9XG5cdFx0ZWxzZSBpZiAoaSA9PT0gXCJhcm91bmRcIikge1xuXHRcdFx0dmFyIHJlZiA9ICQodmFsKTtcblx0XHRcdHJlZi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlbGVtZW50LCByZWYpO1xuXHRcdFx0ZWxlbWVudC5hcHBlbmRDaGlsZChyZWYpO1xuXHRcdH1cblx0XHRlbHNlIGlmIChpIGluIGVsZW1lbnQpIHtcblx0XHRcdGVsZW1lbnRbaV0gPSB2YWw7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0ZWxlbWVudC5zZXRBdHRyaWJ1dGUoaSwgdmFsKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZWxlbWVudDtcbn07XG5cbiQuYmluZCA9IGZ1bmN0aW9uKGVsZW1lbnQsIG8pIHtcblx0aWYgKGVsZW1lbnQpIHtcblx0XHRmb3IgKHZhciBldmVudCBpbiBvKSB7XG5cdFx0XHR2YXIgY2FsbGJhY2sgPSBvW2V2ZW50XTtcblxuXHRcdFx0ZXZlbnQuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkge1xuXHRcdFx0XHRlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGNhbGxiYWNrKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxufTtcblxuJC5maXJlID0gZnVuY3Rpb24odGFyZ2V0LCB0eXBlLCBwcm9wZXJ0aWVzKSB7XG5cdHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIkhUTUxFdmVudHNcIik7XG5cblx0ZXZ0LmluaXRFdmVudCh0eXBlLCB0cnVlLCB0cnVlICk7XG5cblx0Zm9yICh2YXIgaiBpbiBwcm9wZXJ0aWVzKSB7XG5cdFx0ZXZ0W2pdID0gcHJvcGVydGllc1tqXTtcblx0fVxuXG5cdHJldHVybiB0YXJnZXQuZGlzcGF0Y2hFdmVudChldnQpO1xufTtcblxuJC5yZWdFeHBFc2NhcGUgPSBmdW5jdGlvbiAocykge1xuXHRyZXR1cm4gcy5yZXBsYWNlKC9bLVxcXFxeJCorPy4oKXxbXFxde31dL2csIFwiXFxcXCQmXCIpO1xufTtcblxuJC5zaWJsaW5nSW5kZXggPSBmdW5jdGlvbiAoZWwpIHtcblx0LyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0Zm9yICh2YXIgaSA9IDA7IGVsID0gZWwucHJldmlvdXNFbGVtZW50U2libGluZzsgaSsrKTtcblx0cmV0dXJuIGk7XG59O1xuXG4vLyBJbml0aWFsaXphdGlvblxuXG5mdW5jdGlvbiBpbml0KCkge1xuXHQkJChcImlucHV0LmF3ZXNvbXBsZXRlXCIpLmZvckVhY2goZnVuY3Rpb24gKGlucHV0KSB7XG5cdFx0bmV3IF8oaW5wdXQpO1xuXHR9KTtcbn1cblxuLy8gQXJlIHdlIGluIGEgYnJvd3Nlcj8gQ2hlY2sgZm9yIERvY3VtZW50IGNvbnN0cnVjdG9yXG5pZiAodHlwZW9mIERvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cdC8vIERPTSBhbHJlYWR5IGxvYWRlZD9cblx0aWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT09IFwibG9hZGluZ1wiKSB7XG5cdFx0aW5pdCgpO1xuXHR9XG5cdGVsc2Uge1xuXHRcdC8vIFdhaXQgZm9yIGl0XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgaW5pdCk7XG5cdH1cbn1cblxuXy4kID0gJDtcbl8uJCQgPSAkJDtcblxuLy8gTWFrZSBzdXJlIHRvIGV4cG9ydCBBd2Vzb21wbGV0ZSBvbiBzZWxmIHdoZW4gaW4gYSBicm93c2VyXG5pZiAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0c2VsZi5Bd2Vzb21wbGV0ZSA9IF87XG59XG5cbi8vIEV4cG9zZSBBd2Vzb21wbGV0ZSBhcyBhIENKUyBtb2R1bGVcbmlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIG1vZHVsZS5leHBvcnRzKSB7XG5cdG1vZHVsZS5leHBvcnRzID0gXztcbn1cblxucmV0dXJuIF87XG5cbn0oKSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXdlc29tcGxldGUvYXdlc29tcGxldGUuanNcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==');
},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__config__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__logger__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__util__ = __webpack_require__(1);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\n\n\n\n\nvar Game = function () {\n  function Game(setting, sempreClient) {\n    _classCallCheck(this, Game);\n\n    this.sessionId = __WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].defaultSessionId;\n\n    this.currentState = __WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].defaultStruct;\n    this.responses = [];\n    this.selectedResp = -1;\n    this.query = "";\n    this.history = this.initialHistory();\n    this.taggedCover = "";\n    this.defineSuccess = "";\n\n    this.targetStruct = __WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].defaultStruct;\n    this.targetIdx = -1;\n    this.maxTargetSteps = 0;\n    this.skipsLeft = __WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].defaultSkips;\n\n    this.Sempre = sempreClient;\n\n    this.Setting = setting;\n    this.Setting.renderHistory(this.history);\n\n    this.Logger = new __WEBPACK_IMPORTED_MODULE_1__logger__["a" /* default */](this.sessionId);\n  }\n\n  _createClass(Game, [{\n    key: "setTarget",\n    value: function setTarget(targetStruct) {\n      this.targetIdx = targetStruct[0];\n      this.targetStruct = targetStruct[2];\n      this.maxTargetSteps = targetStruct[1] * __WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].difficulty;\n\n      this.Setting.renderTarget(this.targetStruct);\n      this.Setting.setSteps(targetStruct[1], this.maxTargetSteps);\n\n      this.Logger.log({ type: "target", msg: this.targetStruct });\n    }\n  }, {\n    key: "enter",\n    value: function enter(query) {\n      if (query.length === 0) this.Setting.status("enter a command");\n      // TODO: Validate length!\n      this.querySempre(query);\n    }\n  }, {\n    key: "querySempre",\n    value: function querySempre(querystr) {\n      var _this = this;\n\n      var query = this.Sempre.formatQuery(querystr);\n      var contextCommand = "(context)";\n      if (this.currentState) {\n        var currentState = JSON.stringify(JSON.stringify(this.currentState.map(function (c) {\n          return [c.x, c.y, c.z, c.color, c.names];\n        })));\n        contextCommand = "(context (graph NaiveKnowledgeGraph ((string " + currentState + ") (name b) (name c))))";\n      }\n\n      var contextCmds = { q: contextCommand, sessionId: this.sessionId };\n\n      this.Sempre.query(contextCmds, function () {\n        var cmds = { q: query, sessionId: _this.sessionId };\n        _this.Sempre.query(cmds, function (response) {\n          _this.taggedCover = response.taggedcover;\n\n          var formval = _this.Sempre.parseSEMPRE(response.candidates);\n          if (formval === null || formval === undefined) {\n            console.log("no answer from sempre");\n            _this.resetResponses();\n            _this.query = query;\n            _this.Setting.status("SHRDLURN did not understand", query);\n            _this.Setting.promptDefine();\n            _this.Logger.log({ type: "queryUnknown", msg: query });\n            _this.Setting.promptAccept();\n          } else {\n            _this.Setting.removePromptDefine();\n            _this.responses = formval;\n            _this.selectedResp = 0;\n            _this.query = query;\n            _this.Setting.status("got " + _this.responses.length + " options, use &darr; and &uarr; to scroll, and accept to confirm.", query + " (#1/" + _this.responses.length + ")", _this.responses[0].maxprop | -1);\n            _this.Logger.log({ type: "query", msg: query });\n            _this.Setting.promptAccept();\n          }\n\n          if (__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].debugMode) {\n            console.log(response);\n          }\n\n          _this.update();\n        });\n      });\n    }\n  }, {\n    key: "accept",\n    value: function accept() {\n      if (this.getSteps() >= this.maxTargetSteps) {\n        this.Setting.status("you\'ve reached the maxinum number of steps", "can\'t accept");\n        this.Logger.log({ type: "meta", msg: "max steps" });\n        this.Setting.removeAccept();\n      } else if (this.responses.length > 0) {\n        this.Sempre.query({ q: this.query, accept: this.responses[this.selectedResp].rank, sessionId: this.sessionId }, function () {});\n\n        this.currentState = this.responses[this.selectedResp].value;\n        this.Setting.status("✓: accepted, enter another command");\n        this.Logger.log({ type: "accept", msg: this.query + ":" + this.currentState });\n        this.history.push({ query: this.query, type: "accept", state: this.currentState, stepN: this.getSteps() + 1 });\n        this.resetResponses();\n        this.update();\n        this.Setting.removeAccept();\n      } else {\n        this.Setting.status("✓: can\'t accept nothing, say something first");\n      }\n\n      if (this.Setting.equalityCheck(this.currentState, this.targetStruct)) {\n        this.win();\n      }\n    }\n  }, {\n    key: "win",\n    value: function win() {\n      alert("You\'ve did it! Congratulations! You\'ve made the target! Try another one now.");\n      this.Logger.log({ type: "win", msg: this.getSteps() });\n\n      var usedTargets = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__util__["a" /* getStore */])("usedTargets", []);\n      usedTargets.push(this.targetIdx);\n      usedTargets.setStore("usedTargets", usedTargets);\n\n      this.setTarget(this.getRandomTarget());\n      this.clear();\n    }\n  }, {\n    key: "resetResponses",\n    value: function resetResponses() {\n      this.selectedResp = -1;\n      this.responses = [];\n      this.query = "";\n    }\n  }, {\n    key: "update",\n    value: function update() {\n      /* Update the canvas */\n      var afterStruct = this.currentState;\n      if (this.responses.length > 0) {\n        afterStruct = this.Setting.computeDiff(this.currentState, this.responses[this.selectedResp].value);\n      }\n      this.Setting.renderCanvas(afterStruct);\n\n      /* Update the history */\n      this.Setting.renderHistory(this.history);\n      this.Setting.updateSteps(this.getSteps());\n    }\n  }, {\n    key: "define",\n    value: function define(query) {\n      var _this2 = this;\n\n      /* If just trying, update the current structure and everything */\n      if (this.defineSuccess.length === 0 || query !== this.defineSuccess) {\n        var _cmds = { q: "(uttdef \\"" + this.Sempre.formatQuery(query) + "\\" -1)", sessionId: this.sessionId };\n\n        this.Logger.log({ type: "trydefine", msg: query });\n\n        this.Sempre.query(_cmds, function (response) {\n          var formval = _this2.Sempre.parseSEMPRE(response.candidates);\n          var commandResponse = response.commandResponse;\n\n          var defCore = commandResponse.indexOf("Core") !== -1;\n          var defNoCover = commandResponse.indexOf("NoCover") !== -1;\n          var defNoParse = commandResponse.indexOf("NoParse") !== -1;\n\n          if (defCore || defNoCover || defNoParse) {\n            _this2.taggedCover = response.taggedcover;\n            _this2.Setting.tryDefine(query, true, false, _this2.taggedCover, commandResponse, _this2.query);\n          } else {\n            _this2.defineSuccess = query;\n            _this2.selectedResp = 0;\n            _this2.responses = formval;\n            _this2.update();\n            _this2.Setting.tryDefine(query, true, true);\n            _this2.Setting.toggleDefineButton();\n          }\n        });\n        return false;\n      }\n\n      /* Otherwise, submit the definition if already tried */\n      var text = "(uttdef \\"" + this.Sempre.formatQuery(this.defineSuccess) + "\\" " + this.responses[this.selectedResp].rank + ")";\n      var cmds = { q: text, sessionId: this.sessionId };\n      var newPhrase = this.query;\n\n      this.Sempre.query(cmds, function () {\n        _this2.history.push({ query: "defined \\"" + _this2.query + "\\" as \\"" + _this2.defineSuccess + "\\"", type: "define" });\n        _this2.Logger.log({ type: "define", msg: "defined " + _this2.query + " as " + _this2.defineSuccess });\n        _this2.defineSuccess = "";\n        _this2.resetResponses();\n        _this2.update();\n        _this2.Setting.status("definition accepted. thanks for teaching!");\n      });\n\n      return newPhrase;\n    }\n  }, {\n    key: "clear",\n    value: function clear() {\n      this.Logger.log({ type: "clear", msg: "" });\n      this.resetResponses();\n      this.history = this.initialHistory();\n      this.currentState = __WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].emptyStruct;\n      this.update();\n      this.Setting.status("cleared the space");\n    }\n  }, {\n    key: "next",\n    value: function next() {\n      if (this.responses.length <= 0) {\n        this.Setting.status("↓: can\'t scroll, say something or ⎌");\n      } else if (this.selectedResp !== this.responses.length - 1) {\n        this.selectedResp++;\n        this.update();\n        this.Setting.status("↓: showing the next one", this.query + " (#" + (this.selectedResp + 1) + "/" + this.responses.length + ")", this.responses[0].maxprop | -1);\n        this.Logger.log({ type: "scroll", msg: "next" });\n      } else {\n        this.Setting.status("↓: already showing the last one", this.query + " (#" + (this.selectedResp + 1) + "/" + this.responses.length + ")", this.responses[0].maxprop | -1);\n      }\n    }\n  }, {\n    key: "prev",\n    value: function prev() {\n      if (this.responses.length <= 0) {\n        this.Setting.status("↑: can\'t scroll, say something or ⎌");\n      } else if (this.selectedResp !== 0) {\n        this.selectedResp--;\n        this.update();\n        this.Setting.status("↑: showing the previous one", this.query + " (#" + (this.selectedResp + 1) + "/" + this.responses.length + ")", this.responses[0].maxprop | -1);\n        this.Logger.log({ type: "scroll", msg: "prev" });\n      } else {\n        this.Setting.status("↑: already showing the first one", this.query + " (#" + (this.selectedResp + 1) + "/" + this.responses.length + ")", this.responses[0].maxprop | -1);\n      }\n    }\n  }, {\n    key: "getSteps",\n    value: function getSteps() {\n      return this.history.filter(function (h) {\n        return h.type === "accept";\n      }).length;\n    }\n  }, {\n    key: "initialHistory",\n    value: function initialHistory() {\n      return [{ type: "initial", query: "intial", state: __WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].defaultStruct, stepN: 0 }];\n    }\n  }, {\n    key: "getRandomTarget",\n    value: function getRandomTarget() {\n      var usedTargets = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__util__["a" /* getStore */])("usedTargets", []);\n      if (usedTargets.length === __WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].targets.length) {\n        alert("You\'ve completed all targets! Resetting...");\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__util__["b" /* setStore */])("usedTargets", []);\n      }\n\n      var targetIdx = -1;\n      do {\n        targetIdx = Math.floor(Math.random() * __WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].targets.length);\n      } while (usedTargets.includes(targetIdx));\n\n      return [targetIdx].concat(_toConsumableArray(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].targets[targetIdx]));\n    }\n  }, {\n    key: "skipTarget",\n    value: function skipTarget() {\n      this.skipsLeft--;\n      this.Setting.setSkips(this.skipsLeft);\n      var usedTargets = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__util__["a" /* getStore */])("usedTargets", []);\n      if (__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].targets.length - usedTargets.length > 1) {\n        var randomTarget = [];\n        do {\n          randomTarget = this.getRandomTarget();\n        } while (randomTarget[0] === this.targetIdx);\n        this.Logger.log({ type: "skip", msg: this.targetStruct[1] });\n        this.setTarget(randomTarget);\n      } else {\n        alert("Sorry, this is the last target. No skips possible.");\n      }\n    }\n  }]);\n\n  return Game;\n}();\n\n/* harmony default export */ exports["a"] = Game;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvanMvZ2FtZS5qcz8yNDk2Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTs7SUFFcUIsSTtBQUNuQixnQkFBWSxPQUFaLEVBQXFCLFlBQXJCLEVBQW1DO0FBQUE7O0FBQ2pDLFNBQUssU0FBTCxHQUFpQix5REFBUSxnQkFBekI7O0FBRUEsU0FBSyxZQUFMLEdBQW9CLHlEQUFRLGFBQTVCO0FBQ0EsU0FBSyxTQUFMLEdBQWlCLEVBQWpCO0FBQ0EsU0FBSyxZQUFMLEdBQW9CLENBQUMsQ0FBckI7QUFDQSxTQUFLLEtBQUwsR0FBYSxFQUFiO0FBQ0EsU0FBSyxPQUFMLEdBQWUsS0FBSyxjQUFMLEVBQWY7QUFDQSxTQUFLLFdBQUwsR0FBbUIsRUFBbkI7QUFDQSxTQUFLLGFBQUwsR0FBcUIsRUFBckI7O0FBRUEsU0FBSyxZQUFMLEdBQW9CLHlEQUFRLGFBQTVCO0FBQ0EsU0FBSyxTQUFMLEdBQWlCLENBQUMsQ0FBbEI7QUFDQSxTQUFLLGNBQUwsR0FBc0IsQ0FBdEI7QUFDQSxTQUFLLFNBQUwsR0FBaUIseURBQVEsWUFBekI7O0FBRUEsU0FBSyxNQUFMLEdBQWMsWUFBZDs7QUFFQSxTQUFLLE9BQUwsR0FBZSxPQUFmO0FBQ0EsU0FBSyxPQUFMLENBQWEsYUFBYixDQUEyQixLQUFLLE9BQWhDOztBQUVBLFNBQUssTUFBTCxHQUFjLElBQUksd0RBQUosQ0FBVyxLQUFLLFNBQWhCLENBQWQ7QUFDRDs7Ozs4QkFFUyxZLEVBQWM7QUFDdEIsV0FBSyxTQUFMLEdBQWlCLGFBQWEsQ0FBYixDQUFqQjtBQUNBLFdBQUssWUFBTCxHQUFvQixhQUFhLENBQWIsQ0FBcEI7QUFDQSxXQUFLLGNBQUwsR0FBc0IsYUFBYSxDQUFiLElBQWtCLHlEQUFRLFVBQWhEOztBQUVBLFdBQUssT0FBTCxDQUFhLFlBQWIsQ0FBMEIsS0FBSyxZQUEvQjtBQUNBLFdBQUssT0FBTCxDQUFhLFFBQWIsQ0FBc0IsYUFBYSxDQUFi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QUFrQixDQUFsQixDQUFyQixFQUFoQjtBQUNBLGFBQUssU0FBTCxDQUFlLFlBQWY7QUFDRCxPQVBELE1BT087QUFDTCxjQUFNLG9EQUFOO0FBQ0Q7QUFDRjs7Ozs7OzRDQW5Ra0IsSSIsImZpbGUiOiI5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbmZpZ3MgZnJvbSBcIi4vY29uZmlnXCI7XG5pbXBvcnQgTG9nZ2VyIGZyb20gXCIuL2xvZ2dlclwiO1xuaW1wb3J0IHsgZ2V0U3RvcmUsIHNldFN0b3JlIH0gZnJvbSBcIi4vdXRpbFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZywgc2VtcHJlQ2xpZW50KSB7XG4gICAgdGhpcy5zZXNzaW9uSWQgPSBjb25maWdzLmRlZmF1bHRTZXNzaW9uSWQ7XG5cbiAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IGNvbmZpZ3MuZGVmYXVsdFN0cnVjdDtcbiAgICB0aGlzLnJlc3BvbnNlcyA9IFtdO1xuICAgIHRoaXMuc2VsZWN0ZWRSZXNwID0gLTE7XG4gICAgdGhpcy5xdWVyeSA9IFwiXCI7XG4gICAgdGhpcy5oaXN0b3J5ID0gdGhpcy5pbml0aWFsSGlzdG9yeSgpO1xuICAgIHRoaXMudGFnZ2VkQ292ZXIgPSBcIlwiO1xuICAgIHRoaXMuZGVmaW5lU3VjY2VzcyA9IFwiXCI7XG5cbiAgICB0aGlzLnRhcmdldFN0cnVjdCA9IGNvbmZpZ3MuZGVmYXVsdFN0cnVjdDtcbiAgICB0aGlzLnRhcmdldElkeCA9IC0xO1xuICAgIHRoaXMubWF4VGFyZ2V0U3RlcHMgPSAwO1xuICAgIHRoaXMuc2tpcHNMZWZ0ID0gY29uZmlncy5kZWZhdWx0U2tpcHM7XG5cbiAgICB0aGlzLlNlbXByZSA9IHNlbXByZUNsaWVudDtcblxuICAgIHRoaXMuU2V0dGluZyA9IHNldHRpbmc7XG4gICAgdGhpcy5TZXR0aW5nLnJlbmRlckhpc3RvcnkodGhpcy5oaXN0b3J5KTtcblxuICAgIHRoaXMuTG9nZ2VyID0gbmV3IExvZ2dlcih0aGlzLnNlc3Npb25JZCk7XG4gIH1cblxuICBzZXRUYXJnZXQodGFyZ2V0U3RydWN0KSB7XG4gICAgdGhpcy50YXJnZXRJZHggPSB0YXJnZXRTdHJ1Y3RbMF07XG4gICAgdGhpcy50YXJnZXRTdHJ1Y3QgPSB0YXJnZXRTdHJ1Y3RbMl07XG4gICAgdGhpcy5tYXhUYXJnZXRTdGVwcyA9IHRhcmdldFN0cnVjdFsxXSAqIGNvbmZpZ3MuZGlmZmljdWx0eTtcblxuICAgIHRoaXMuU2V0dGluZy5yZW5kZXJUYXJnZXQodGhpcy50YXJnZXRTdHJ1Y3QpO1xuICAgIHRoaXMuU2V0dGluZy5zZXRTdGVwcyh0YXJnZXRTdHJ1Y3RbMV0sIHRoaXMubWF4VGFyZ2V0U3RlcHMpO1xuXG4gICAgdGhpcy5Mb2dnZXIubG9nKHsgdHlwZTogXCJ0YXJnZXRcIiwgbXNnOiB0aGlzLnRhcmdldFN0cnVjdCB9KTtcbiAgfVxuXG4gIGVudGVyKHF1ZXJ5KSB7XG4gICAgaWYgKHF1ZXJ5Lmxlbmd0aCA9PT0gMCkgdGhpcy5TZXR0aW5nLnN0YXR1cyhcImVudGVyIGEgY29tbWFuZFwiKTtcbiAgICAvLyBUT0RPOiBWYWxpZGF0ZSBsZW5ndGghXG4gICAgdGhpcy5xdWVyeVNlbXByZShxdWVyeSk7XG4gIH1cblxuICBxdWVyeVNlbXByZShxdWVyeXN0cikge1xuICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5TZW1wcmUuZm9ybWF0UXVlcnkocXVlcnlzdHIpO1xuICAgIHZhciBjb250ZXh0Q29tbWFuZCA9IFwiKGNvbnRleHQpXCI7XG4gICAgaWYgKHRoaXMuY3VycmVudFN0YXRlKSB7XG4gICAgICBjb25zdCBjdXJyZW50U3RhdGUgPSBKU09OLnN0cmluZ2lmeShKU09OLnN0cmluZ2lmeSh0aGlzLmN1cnJlbnRTdGF0ZS5tYXAoYyA9PiAoW2MueCwgYy55LCBjLnosIGMuY29sb3IsIGMubmFtZXNdKSkpKTtcbiAgICAgIGNvbnRleHRDb21tYW5kID0gYChjb250ZXh0IChncmFwaCBOYWl2ZUtub3dsZWRnZUdyYXBoICgoc3RyaW5nICR7Y3VycmVudFN0YXRlfSkgKG5hbWUgYikgKG5hbWUgYykpKSlgO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRleHRDbWRzID0geyBxOiBjb250ZXh0Q29tbWFuZCwgc2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCB9O1xuXG4gICAgdGhpcy5TZW1wcmUucXVlcnkoY29udGV4dENtZHMsICgpID0+IHtcbiAgICAgIGNvbnN0IGNtZHMgPSB7IHE6IHF1ZXJ5LCBzZXNzaW9uSWQ6IHRoaXMuc2Vzc2lvbklkIH07XG4gICAgICB0aGlzLlNlbXByZS5xdWVyeShjbWRzLCAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgdGhpcy50YWdnZWRDb3ZlciA9IHJlc3BvbnNlLnRhZ2dlZGNvdmVyO1xuXG4gICAgICAgIGNvbnN0IGZvcm12YWwgPSB0aGlzLlNlbXByZS5wYXJzZVNFTVBSRShyZXNwb25zZS5jYW5kaWRhdGVzKTtcbiAgICAgICAgaWYgKGZvcm12YWwgPT09IG51bGwgfHwgZm9ybXZhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJubyBhbnN3ZXIgZnJvbSBzZW1wcmVcIik7XG4gICAgICAgICAgdGhpcy5yZXNldFJlc3BvbnNlcygpO1xuICAgICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcbiAgICAgICAgICB0aGlzLlNldHRpbmcuc3RhdHVzKFwiU0hSRExVUk4gZGlkIG5vdCB1bmRlcnN0YW5kXCIsIHF1ZXJ5KTtcbiAgICAgICAgICB0aGlzLlNldHRpbmcucHJvbXB0RGVmaW5lKCk7XG4gICAgICAgICAgdGhpcy5Mb2dnZXIubG9nKHsgdHlwZTogXCJxdWVyeVVua25vd25cIiwgbXNnOiBxdWVyeSB9KTtcbiAgICAgICAgICB0aGlzLlNldHRpbmcucHJvbXB0QWNjZXB0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5TZXR0aW5nLnJlbW92ZVByb21wdERlZmluZSgpO1xuICAgICAgICAgIHRoaXMucmVzcG9uc2VzID0gZm9ybXZhbDtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkUmVzcCA9IDA7XG4gICAgICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5O1xuICAgICAgICAgIHRoaXMuU2V0dGluZy5zdGF0dXMoYGdvdCAke3RoaXMucmVzcG9uc2VzLmxlbmd0aH0gb3B0aW9ucywgdXNlICZkYXJyOyBhbmQgJnVhcnI7IHRvIHNjcm9sbCwgYW5kIGFjY2VwdCB0byBjb25maXJtLmAsIGAke3F1ZXJ5fSAoIzEvJHt0aGlzLnJlc3BvbnNlcy5sZW5ndGh9KWAsIHRoaXMucmVzcG9uc2VzWzBdLm1heHByb3AgfCAtMSk7XG4gICAgICAgICAgdGhpcy5Mb2dnZXIubG9nKHsgdHlwZTogXCJxdWVyeVwiLCBtc2c6IHF1ZXJ5IH0pO1xuICAgICAgICAgIHRoaXMuU2V0dGluZy5wcm9tcHRBY2NlcHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb25maWdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFjY2VwdCgpIHtcbiAgICBpZiAodGhpcy5nZXRTdGVwcygpID49IHRoaXMubWF4VGFyZ2V0U3RlcHMpIHtcbiAgICAgIHRoaXMuU2V0dGluZy5zdGF0dXMoXCJ5b3UndmUgcmVhY2hlZCB0aGUgbWF4aW51bSBudW1iZXIgb2Ygc3RlcHNcIiwgXCJjYW4ndCBhY2NlcHRcIik7XG4gICAgICB0aGlzLkxvZ2dlci5sb2coeyB0eXBlOiBcIm1ldGFcIiwgbXNnOiBcIm1heCBzdGVwc1wiIH0pO1xuICAgICAgdGhpcy5TZXR0aW5nLnJlbW92ZUFjY2VwdCgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5yZXNwb25zZXMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5TZW1wcmUucXVlcnkoeyBxOiB0aGlzLnF1ZXJ5LCBhY2NlcHQ6IHRoaXMucmVzcG9uc2VzW3RoaXMuc2VsZWN0ZWRSZXNwXS5yYW5rLCBzZXNzaW9uSWQ6IHRoaXMuc2Vzc2lvbklkIH0sICgpID0+IHt9KTtcblxuICAgICAgdGhpcy5jdXJyZW50U3RhdGUgPSB0aGlzLnJlc3BvbnNlc1t0aGlzLnNlbGVjdGVkUmVzcF0udmFsdWU7XG4gICAgICB0aGlzLlNldHRpbmcuc3RhdHVzKGDinJM6IGFjY2VwdGVkLCBlbnRlciBhbm90aGVyIGNvbW1hbmRgKTtcbiAgICAgIHRoaXMuTG9nZ2VyLmxvZyh7IHR5cGU6IFwiYWNjZXB0XCIsIG1zZzogYCR7dGhpcy5xdWVyeX06JHt0aGlzLmN1cnJlbnRTdGF0ZX1gIH0pO1xuICAgICAgdGhpcy5oaXN0b3J5LnB1c2goeyBxdWVyeTogdGhpcy5xdWVyeSwgdHlwZTogXCJhY2NlcHRcIiwgc3RhdGU6IHRoaXMuY3VycmVudFN0YXRlLCBzdGVwTjogdGhpcy5nZXRTdGVwcygpICsgMSB9KTtcbiAgICAgIHRoaXMucmVzZXRSZXNwb25zZXMoKTtcbiAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICB0aGlzLlNldHRpbmcucmVtb3ZlQWNjZXB0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuU2V0dGluZy5zdGF0dXMoXCLinJM6IGNhbid0IGFjY2VwdCBub3RoaW5nLCBzYXkgc29tZXRoaW5nIGZpcnN0XCIpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLlNldHRpbmcuZXF1YWxpdHlDaGVjayh0aGlzLmN1cnJlbnRTdGF0ZSwgdGhpcy50YXJnZXRTdHJ1Y3QpKSB7XG4gICAgICB0aGlzLndpbigpO1xuICAgIH1cbiAgfVxuXG4gIHdpbigpIHtcbiAgICBhbGVydChcIllvdSd2ZSBkaWQgaXQhIENvbmdyYXR1bGF0aW9ucyEgWW91J3ZlIG1hZGUgdGhlIHRhcmdldCEgVHJ5IGFub3RoZXIgb25lIG5vdy5cIik7XG4gICAgdGhpcy5Mb2dnZXIubG9nKHsgdHlwZTogXCJ3aW5cIiwgbXNnOiB0aGlzLmdldFN0ZXBzKCkgfSk7XG5cbiAgICBjb25zdCB1c2VkVGFyZ2V0cyA9IGdldFN0b3JlKFwidXNlZFRhcmdldHNcIiwgW10pO1xuICAgIHVzZWRUYXJnZXRzLnB1c2godGhpcy50YXJnZXRJZHgpO1xuICAgIHVzZWRUYXJnZXRzLnNldFN0b3JlKFwidXNlZFRhcmdldHNcIiwgdXNlZFRhcmdldHMpO1xuXG4gICAgdGhpcy5zZXRUYXJnZXQodGhpcy5nZXRSYW5kb21UYXJnZXQoKSk7XG4gICAgdGhpcy5jbGVhcigpO1xuICB9XG5cbiAgcmVzZXRSZXNwb25zZXMoKSB7XG4gICAgdGhpcy5zZWxlY3RlZFJlc3AgPSAtMTtcbiAgICB0aGlzLnJlc3BvbnNlcyA9IFtdO1xuICAgIHRoaXMucXVlcnkgPSBcIlwiO1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIC8qIFVwZGF0ZSB0aGUgY2FudmFzICovXG4gICAgbGV0IGFmdGVyU3RydWN0ID0gdGhpcy5jdXJyZW50U3RhdGU7XG4gICAgaWYgKHRoaXMucmVzcG9uc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIGFmdGVyU3RydWN0ID0gdGhpcy5TZXR0aW5nLmNvbXB1dGVEaWZmKHRoaXMuY3VycmVudFN0YXRlLCB0aGlzLnJlc3BvbnNlc1t0aGlzLnNlbGVjdGVkUmVzcF0udmFsdWUpO1xuICAgIH1cbiAgICB0aGlzLlNldHRpbmcucmVuZGVyQ2FudmFzKGFmdGVyU3RydWN0KTtcblxuICAgIC8qIFVwZGF0ZSB0aGUgaGlzdG9yeSAqL1xuICAgIHRoaXMuU2V0dGluZy5yZW5kZXJIaXN0b3J5KHRoaXMuaGlzdG9yeSk7XG4gICAgdGhpcy5TZXR0aW5nLnVwZGF0ZVN0ZXBzKHRoaXMuZ2V0U3RlcHMoKSk7XG4gIH1cblxuICBkZWZpbmUocXVlcnkpIHtcbiAgICAvKiBJZiBqdXN0IHRyeWluZywgdXBkYXRlIHRoZSBjdXJyZW50IHN0cnVjdHVyZSBhbmQgZXZlcnl0aGluZyAqL1xuICAgIGlmICh0aGlzLmRlZmluZVN1Y2Nlc3MubGVuZ3RoID09PSAwIHx8IHF1ZXJ5ICE9PSB0aGlzLmRlZmluZVN1Y2Nlc3MpIHtcbiAgICAgIGNvbnN0IGNtZHMgPSB7IHE6IGAodXR0ZGVmIFwiJHt0aGlzLlNlbXByZS5mb3JtYXRRdWVyeShxdWVyeSl9XCIgLTEpYCwgc2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCB9O1xuXG4gICAgICB0aGlzLkxvZ2dlci5sb2coeyB0eXBlOiBcInRyeWRlZmluZVwiLCBtc2c6IHF1ZXJ5IH0pO1xuXG4gICAgICB0aGlzLlNlbXByZS5xdWVyeShjbWRzLCAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybXZhbCA9IHRoaXMuU2VtcHJlLnBhcnNlU0VNUFJFKHJlc3BvbnNlLmNhbmRpZGF0ZXMpO1xuICAgICAgICBjb25zdCBjb21tYW5kUmVzcG9uc2UgPSByZXNwb25zZS5jb21tYW5kUmVzcG9uc2U7XG5cbiAgICAgICAgY29uc3QgZGVmQ29yZSA9IGNvbW1hbmRSZXNwb25zZS5pbmRleE9mKFwiQ29yZVwiKSAhPT0gLTE7XG4gICAgICAgIGNvbnN0IGRlZk5vQ292ZXIgPSBjb21tYW5kUmVzcG9uc2UuaW5kZXhPZihcIk5vQ292ZXJcIikgIT09IC0xO1xuICAgICAgICBjb25zdCBkZWZOb1BhcnNlID0gY29tbWFuZFJlc3BvbnNlLmluZGV4T2YoXCJOb1BhcnNlXCIpICE9PSAtMTtcblxuICAgICAgICBpZiAoZGVmQ29yZSB8fCBkZWZOb0NvdmVyIHx8IGRlZk5vUGFyc2UpIHtcbiAgICAgICAgICB0aGlzLnRhZ2dlZENvdmVyID0gcmVzcG9uc2UudGFnZ2VkY292ZXI7XG4gICAgICAgICAgdGhpcy5TZXR0aW5nLnRyeURlZmluZShxdWVyeSwgdHJ1ZSwgZmFsc2UsIHRoaXMudGFnZ2VkQ292ZXIsIGNvbW1hbmRSZXNwb25zZSwgdGhpcy5xdWVyeSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5kZWZpbmVTdWNjZXNzID0gcXVlcnk7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFJlc3AgPSAwO1xuICAgICAgICAgIHRoaXMucmVzcG9uc2VzID0gZm9ybXZhbDtcbiAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgIHRoaXMuU2V0dGluZy50cnlEZWZpbmUocXVlcnksIHRydWUsIHRydWUpO1xuICAgICAgICAgIHRoaXMuU2V0dGluZy50b2dnbGVEZWZpbmVCdXR0b24oKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyogT3RoZXJ3aXNlLCBzdWJtaXQgdGhlIGRlZmluaXRpb24gaWYgYWxyZWFkeSB0cmllZCAqL1xuICAgIGNvbnN0IHRleHQgPSBgKHV0dGRlZiBcIiR7dGhpcy5TZW1wcmUuZm9ybWF0UXVlcnkodGhpcy5kZWZpbmVTdWNjZXNzKX1cIiAke3RoaXMucmVzcG9uc2VzW3RoaXMuc2VsZWN0ZWRSZXNwXS5yYW5rfSlgO1xuICAgIGNvbnN0IGNtZHMgPSB7IHE6IHRleHQsIHNlc3Npb25JZDogdGhpcy5zZXNzaW9uSWQgfTtcbiAgICBjb25zdCBuZXdQaHJhc2UgPSB0aGlzLnF1ZXJ5O1xuXG4gICAgdGhpcy5TZW1wcmUucXVlcnkoY21kcywgKCkgPT4ge1xuICAgICAgdGhpcy5oaXN0b3J5LnB1c2goeyBxdWVyeTogYGRlZmluZWQgXCIke3RoaXMucXVlcnl9XCIgYXMgXCIke3RoaXMuZGVmaW5lU3VjY2Vzc31cImAsIHR5cGU6IFwiZGVmaW5lXCIgfSk7XG4gICAgICB0aGlzLkxvZ2dlci5sb2coeyB0eXBlOiBcImRlZmluZVwiLCBtc2c6IGBkZWZpbmVkICR7dGhpcy5xdWVyeX0gYXMgJHt0aGlzLmRlZmluZVN1Y2Nlc3N9YCB9KTtcbiAgICAgIHRoaXMuZGVmaW5lU3VjY2VzcyA9IFwiXCI7XG4gICAgICB0aGlzLnJlc2V0UmVzcG9uc2VzKCk7XG4gICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgdGhpcy5TZXR0aW5nLnN0YXR1cyhcImRlZmluaXRpb24gYWNjZXB0ZWQuIHRoYW5rcyBmb3IgdGVhY2hpbmchXCIpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIG5ld1BocmFzZTtcbiAgfVxuXG4gIGNsZWFyKCkge1xuICAgIHRoaXMuTG9nZ2VyLmxvZyh7IHR5cGU6IFwiY2xlYXJcIiwgbXNnOiBcIlwiIH0pO1xuICAgIHRoaXMucmVzZXRSZXNwb25zZXMoKTtcbiAgICB0aGlzLmhpc3RvcnkgPSB0aGlzLmluaXRpYWxIaXN0b3J5KCk7XG4gICAgdGhpcy5jdXJyZW50U3RhdGUgPSBjb25maWdzLmVtcHR5U3RydWN0O1xuICAgIHRoaXMudXBkYXRlKCk7XG4gICAgdGhpcy5TZXR0aW5nLnN0YXR1cyhcImNsZWFyZWQgdGhlIHNwYWNlXCIpO1xuICB9XG5cbiAgbmV4dCgpIHtcbiAgICBpZiAodGhpcy5yZXNwb25zZXMubGVuZ3RoIDw9IDApIHtcbiAgICAgIHRoaXMuU2V0dGluZy5zdGF0dXMoXCLihpM6IGNhbid0IHNjcm9sbCwgc2F5IHNvbWV0aGluZyBvciDijoxcIik7XG4gICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkUmVzcCAhPT0gdGhpcy5yZXNwb25zZXMubGVuZ3RoIC0gMSkge1xuICAgICAgdGhpcy5zZWxlY3RlZFJlc3ArKztcbiAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICB0aGlzLlNldHRpbmcuc3RhdHVzKFwi4oaTOiBzaG93aW5nIHRoZSBuZXh0IG9uZVwiLCBgJHt0aGlzLnF1ZXJ5fSAoIyR7dGhpcy5zZWxlY3RlZFJlc3AgKyAxfS8ke3RoaXMucmVzcG9uc2VzLmxlbmd0aH0pYCwgdGhpcy5yZXNwb25zZXNbMF0ubWF4cHJvcCB8IC0xKTtcbiAgICAgIHRoaXMuTG9nZ2VyLmxvZyh7IHR5cGU6IFwic2Nyb2xsXCIsIG1zZzogXCJuZXh0XCIgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuU2V0dGluZy5zdGF0dXMoXCLihpM6IGFscmVhZHkgc2hvd2luZyB0aGUgbGFzdCBvbmVcIiwgYCR7dGhpcy5xdWVyeX0gKCMke3RoaXMuc2VsZWN0ZWRSZXNwICsgMX0vJHt0aGlzLnJlc3BvbnNlcy5sZW5ndGh9KWAsIHRoaXMucmVzcG9uc2VzWzBdLm1heHByb3AgfCAtMSk7XG4gICAgfVxuICB9XG5cbiAgcHJldigpIHtcbiAgICBpZiAodGhpcy5yZXNwb25zZXMubGVuZ3RoIDw9IDApIHtcbiAgICAgIHRoaXMuU2V0dGluZy5zdGF0dXMoXCLihpE6IGNhbid0IHNjcm9sbCwgc2F5IHNvbWV0aGluZyBvciDijoxcIik7XG4gICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkUmVzcCAhPT0gMCkge1xuICAgICAgdGhpcy5zZWxlY3RlZFJlc3AtLTtcbiAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICB0aGlzLlNldHRpbmcuc3RhdHVzKFwi4oaROiBzaG93aW5nIHRoZSBwcmV2aW91cyBvbmVcIiwgYCR7dGhpcy5xdWVyeX0gKCMke3RoaXMuc2VsZWN0ZWRSZXNwICsgMX0vJHt0aGlzLnJlc3BvbnNlcy5sZW5ndGh9KWAsIHRoaXMucmVzcG9uc2VzWzBdLm1heHByb3AgfCAtMSk7XG4gICAgICB0aGlzLkxvZ2dlci5sb2coeyB0eXBlOiBcInNjcm9sbFwiLCBtc2c6IFwicHJldlwiIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLlNldHRpbmcuc3RhdHVzKFwi4oaROiBhbHJlYWR5IHNob3dpbmcgdGhlIGZpcnN0IG9uZVwiLCBgJHt0aGlzLnF1ZXJ5fSAoIyR7dGhpcy5zZWxlY3RlZFJlc3AgKyAxfS8ke3RoaXMucmVzcG9uc2VzLmxlbmd0aH0pYCwgdGhpcy5yZXNwb25zZXNbMF0ubWF4cHJvcCB8IC0xKTtcbiAgICB9XG4gIH1cblxuICBnZXRTdGVwcygpIHtcbiAgICByZXR1cm4gdGhpcy5oaXN0b3J5LmZpbHRlcigoaCkgPT4gaC50eXBlID09PSBcImFjY2VwdFwiKS5sZW5ndGg7XG4gIH1cblxuICBpbml0aWFsSGlzdG9yeSgpIHtcbiAgICByZXR1cm4gW3sgdHlwZTogXCJpbml0aWFsXCIsIHF1ZXJ5OiBcImludGlhbFwiLCBzdGF0ZTogY29uZmlncy5kZWZhdWx0U3RydWN0LCBzdGVwTjogMCB9XTtcbiAgfVxuXG4gIGdldFJhbmRvbVRhcmdldCgpIHtcbiAgICBjb25zdCB1c2VkVGFyZ2V0cyA9IGdldFN0b3JlKFwidXNlZFRhcmdldHNcIiwgW10pO1xuICAgIGlmICh1c2VkVGFyZ2V0cy5sZW5ndGggPT09IGNvbmZpZ3MudGFyZ2V0cy5sZW5ndGgpIHtcbiAgICAgIGFsZXJ0KFwiWW91J3ZlIGNvbXBsZXRlZCBhbGwgdGFyZ2V0cyEgUmVzZXR0aW5nLi4uXCIpO1xuICAgICAgc2V0U3RvcmUoXCJ1c2VkVGFyZ2V0c1wiLCBbXSk7XG4gICAgfVxuXG4gICAgbGV0IHRhcmdldElkeCA9IC0xO1xuICAgIGRvIHtcbiAgICAgIHRhcmdldElkeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvbmZpZ3MudGFyZ2V0cy5sZW5ndGgpO1xuICAgIH0gd2hpbGUgKHVzZWRUYXJnZXRzLmluY2x1ZGVzKHRhcmdldElkeCkpO1xuXG4gICAgcmV0dXJuIFt0YXJnZXRJZHgsIC4uLmNvbmZpZ3MudGFyZ2V0c1t0YXJnZXRJZHhdXTtcbiAgfVxuXG4gIHNraXBUYXJnZXQoKSB7XG4gICAgdGhpcy5za2lwc0xlZnQtLTtcbiAgICB0aGlzLlNldHRpbmcuc2V0U2tpcHModGhpcy5za2lwc0xlZnQpO1xuICAgIGNvbnN0IHVzZWRUYXJnZXRzID0gZ2V0U3RvcmUoXCJ1c2VkVGFyZ2V0c1wiLCBbXSk7XG4gICAgaWYgKGNvbmZpZ3MudGFyZ2V0cy5sZW5ndGggLSB1c2VkVGFyZ2V0cy5sZW5ndGggPiAxKSB7XG4gICAgICBsZXQgcmFuZG9tVGFyZ2V0ID0gW107XG4gICAgICBkbyB7XG4gICAgICAgIHJhbmRvbVRhcmdldCA9IHRoaXMuZ2V0UmFuZG9tVGFyZ2V0KCk7XG4gICAgICB9IHdoaWxlIChyYW5kb21UYXJnZXRbMF0gPT09IHRoaXMudGFyZ2V0SWR4KTtcbiAgICAgIHRoaXMuTG9nZ2VyLmxvZyh7IHR5cGU6IFwic2tpcFwiLCBtc2c6IHRoaXMudGFyZ2V0U3RydWN0WzFdIH0pO1xuICAgICAgdGhpcy5zZXRUYXJnZXQocmFuZG9tVGFyZ2V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnQoXCJTb3JyeSwgdGhpcyBpcyB0aGUgbGFzdCB0YXJnZXQuIE5vIHNraXBzIHBvc3NpYmxlLlwiKTtcbiAgICB9XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9qcy9nYW1lLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==');
},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_phoenix__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_phoenix___default = __WEBPACK_IMPORTED_MODULE_0_phoenix__ && __WEBPACK_IMPORTED_MODULE_0_phoenix__.__esModule ? function() { return __WEBPACK_IMPORTED_MODULE_0_phoenix__[\'default\'] } : function() { return __WEBPACK_IMPORTED_MODULE_0_phoenix__; };\n/* harmony import */ __webpack_require__.d(__WEBPACK_IMPORTED_MODULE_0_phoenix___default, \'a\', __WEBPACK_IMPORTED_MODULE_0_phoenix___default);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__(0);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\n\n\n\nvar Logger = function () {\n  function Logger(sessionId) {\n    _classCallCheck(this, Logger);\n\n    if (__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].loggerOn) {\n      var socket = new __WEBPACK_IMPORTED_MODULE_0_phoenix__["Socket"](__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].loggerServer, {\n        logger: function logger(kind, msg, data) {\n          console.log(kind + ": " + msg, data);\n        }\n      });\n\n      socket.connect();\n      socket.onOpen(function (ev) {\n        console.log("OPEN", ev);\n      });\n      socket.onError(function (ev) {\n        console.log("ERROR", ev);\n      });\n      socket.onClose(function (ev) {\n        console.log("CLOSE", ev);\n      });\n\n      this.chan = socket.channel("session:" + sessionId, {});\n      this.chan.join();\n      this.chan.onError(function (e) {\n        return console.log("something went wrong", e);\n      });\n      this.chan.onClose(function (e) {\n        return console.log("channel closed", e);\n      });\n    }\n  }\n\n  _createClass(Logger, [{\n    key: "log",\n    value: function log(e) {\n      if (__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].loggerOn) {\n        var message = this.strip(e.type) + ":" + this.strip(e.msg);\n        this.chan.push("log:event", { message: message });\n      }\n    }\n  }, {\n    key: "strip",\n    value: function strip(str) {\n      // http://stackoverflow.com/questions/14129953/how-to-encode-a-string-in-javascript-for-displaying-in-html\n      return String(str).replace(/&/g, \'&amp;\').replace(/</g, \'&lt;\').replace(/>/g, \'&gt;\').replace(/"/g, \'&quot;\');\n    }\n  }]);\n\n  return Logger;\n}();\n\n//   this.submit = function(username, name, wall, steps) {\n//     this.chan.push(\'struct:submit\', { username: this.strip(username), name: this.strip(name), wall: this.strip(wall), steps: steps });\n//   }\n//\n//   this.getStructs = function() {\n//     this.chan.push("struct:index", {}, 10000)\n//       .receive("ok", function(msg) {\n//         var structs = msg["structs"];\n//         var structs_list = document.getElementById("user_structs");\n//         structs_list.innerHTML = "";\n//         for (var i = 0; i < structs.length; i++) {\n//           var elem = document.createElement("li");\n//           elem.setAttribute("data-wall", structs[i].wall);\n//           elem.setAttribute("data-steps", structs[i].steps);\n//           elem.innerHTML = "<canvas id=\'usercanvas" + i + "\' width=\'100%\' height=\'100px\'></canvas><br>" + Logger.strip(structs[i].name) + " by " + Logger.strip(structs[i].username);\n//           structs_list.appendChild(elem);\n//           elem.addEventListener("click", loadStruct);\n//           PS.Main.renderUserTargetJSON("[" + structs[i].wall + "]")("usercanvas" + i)();\n//         }\n//       });\n//   }\n// }\n\n\n/* harmony default export */ exports["a"] = Logger;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvanMvbG9nZ2VyLmpzPzE0MmQiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBOztJQUVxQixNO0FBQ25CLGtCQUFZLFNBQVosRUFBdUI7QUFBQTs7QUFDckIsUUFBSSx5REFBUSxRQUFaLEVBQXNCO0FBQ3BCLFVBQU0sU0FBUyxJQUFJLCtDQUFKLENBQVcseURBQVEsWUFBbkIsRUFBaUM7QUFDOUMsZ0JBQVMsZ0JBQUMsSUFBRCxFQUFPLEdBQVAsRUFBWSxJQUFaLEVBQXFCO0FBQUUsa0JBQVEsR0FBUixDQUFlLElBQWYsVUFBd0IsR0FBeEIsRUFBK0IsSUFBL0I7QUFBc0M7QUFEeEIsT0FBakMsQ0FBZjs7QUFJQSxhQUFPLE9BQVA7QUFDQSxhQUFPLE1BQVAsQ0FBYyxjQUFNO0FBQUUsZ0JBQVEsR0FBUixDQUFZLE1BQVosRUFBb0IsRUFBcEI7QUFBeUIsT0FBL0M7QUFDQSxhQUFPLE9BQVAsQ0FBZSxjQUFNO0FBQUUsZ0JBQVEsR0FBUixDQUFZLE9BQVosRUFBcUIsRUFBckI7QUFBMEIsT0FBakQ7QUFDQSxhQUFPLE9BQVAsQ0FBZSxjQUFNO0FBQUUsZ0JBQVEsR0FBUixDQUFZLE9BQVosRUFBcUIsRUFBckI7QUFBMEIsT0FBakQ7O0FBRUEsV0FBSyxJQUFMLEdBQVksT0FBTyxPQUFQLGNBQTBCLFNBQTFCLEVBQXVDLEVBQXZDLENBQVo7QUFDQSxXQUFLLElBQUwsQ0FBVSxJQUFWO0FBQ0EsV0FBSyxJQUFMLENBQVUsT0FBVixDQUFrQjtBQUFBLGVBQUssUUFBUSxHQUFSLENBQVksc0JBQVosRUFBb0MsQ0FBcEMsQ0FBTDtBQUFBLE9BQWxCO0FBQ0EsV0FBSyxJQUFMLENBQVUsT0FBVixDQUFrQjtBQUFBLGVBQUssUUFBUSxHQUFSLENBQVksZ0JBQVosRUFBOEIsQ0FBOUIsQ0FBTDtBQUFBLE9BQWxCO0FBQ0Q7QUFDRjs7Ozt3QkFFRyxDLEVBQUc7QUFDTCxVQUFJLHlEQUFRLFFBQVosRUFBc0I7QUFDcEIsWUFBTSxVQUFhLEtBQUssS0FBTCxDQUFXLEVBQUUsSUFBYixDQUFiLFNBQW1DLEtBQUssS0FBTCxDQUFXLEVBQUUsR0FBYixDQUF6QztBQUNBLGFBQUssSUFBTCxDQUFVLElBQVYsQ0FBZSxXQUFmLEVBQTRCLEVBQUUsU0FBUyxPQUFYLEVBQTVCO0FBQ0Q7QUFDRjs7OzBCQUVLLEcsRUFBSzs7QUFFVCxhQUFPLE9BQU8sR0FBUCxFQUFZLE9BQVosQ0FBb0IsSUFBcEIsRUFBMEIsT0FBMUIsRUFBbUMsT0FBbkMsQ0FBMkMsSUFBM0MsRUFBaUQsTUFBakQsRUFBeUQsT0FBekQsQ0FBaUUsSUFBakUsRUFBdUUsTUFBdkUsRUFBK0UsT0FBL0UsQ0FBdUYsSUFBdkYsRUFBNkYsUUFBN0YsQ0FBUDtBQUNEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NENBN0JrQixNIiwiZmlsZSI6IjEwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU29ja2V0IH0gZnJvbSBcInBob2VuaXhcIjtcbmltcG9ydCBjb25maWdzIGZyb20gXCIuL2NvbmZpZ1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2dnZXIge1xuICBjb25zdHJ1Y3RvcihzZXNzaW9uSWQpIHtcbiAgICBpZiAoY29uZmlncy5sb2dnZXJPbikge1xuICAgICAgY29uc3Qgc29ja2V0ID0gbmV3IFNvY2tldChjb25maWdzLmxvZ2dlclNlcnZlciwge1xuICAgICAgICBsb2dnZXI6ICgoa2luZCwgbXNnLCBkYXRhKSA9PiB7IGNvbnNvbGUubG9nKGAke2tpbmR9OiAke21zZ31gLCBkYXRhKSB9KVxuICAgICAgfSk7XG5cbiAgICAgIHNvY2tldC5jb25uZWN0KCk7XG4gICAgICBzb2NrZXQub25PcGVuKGV2ID0+IHsgY29uc29sZS5sb2coXCJPUEVOXCIsIGV2KSB9KTtcbiAgICAgIHNvY2tldC5vbkVycm9yKGV2ID0+IHsgY29uc29sZS5sb2coXCJFUlJPUlwiLCBldikgfSk7XG4gICAgICBzb2NrZXQub25DbG9zZShldiA9PiB7IGNvbnNvbGUubG9nKFwiQ0xPU0VcIiwgZXYpIH0pO1xuXG4gICAgICB0aGlzLmNoYW4gPSBzb2NrZXQuY2hhbm5lbChgc2Vzc2lvbjoke3Nlc3Npb25JZH1gLCB7fSk7XG4gICAgICB0aGlzLmNoYW4uam9pbigpO1xuICAgICAgdGhpcy5jaGFuLm9uRXJyb3IoZSA9PiBjb25zb2xlLmxvZyhcInNvbWV0aGluZyB3ZW50IHdyb25nXCIsIGUpKTtcbiAgICAgIHRoaXMuY2hhbi5vbkNsb3NlKGUgPT4gY29uc29sZS5sb2coXCJjaGFubmVsIGNsb3NlZFwiLCBlKSk7XG4gICAgfVxuICB9XG5cbiAgbG9nKGUpIHtcbiAgICBpZiAoY29uZmlncy5sb2dnZXJPbikge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGAke3RoaXMuc3RyaXAoZS50eXBlKX06JHt0aGlzLnN0cmlwKGUubXNnKX1gO1xuICAgICAgdGhpcy5jaGFuLnB1c2goXCJsb2c6ZXZlbnRcIiwgeyBtZXNzYWdlOiBtZXNzYWdlIH0pO1xuICAgIH1cbiAgfVxuXG4gIHN0cmlwKHN0cikge1xuICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTQxMjk5NTMvaG93LXRvLWVuY29kZS1hLXN0cmluZy1pbi1qYXZhc2NyaXB0LWZvci1kaXNwbGF5aW5nLWluLWh0bWxcbiAgICByZXR1cm4gU3RyaW5nKHN0cikucmVwbGFjZSgvJi9nLCAnJmFtcDsnKS5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvPi9nLCAnJmd0OycpLnJlcGxhY2UoL1wiL2csICcmcXVvdDsnKTtcbiAgfVxufVxuXG4vLyAgIHRoaXMuc3VibWl0ID0gZnVuY3Rpb24odXNlcm5hbWUsIG5hbWUsIHdhbGwsIHN0ZXBzKSB7XG4vLyAgICAgdGhpcy5jaGFuLnB1c2goJ3N0cnVjdDpzdWJtaXQnLCB7IHVzZXJuYW1lOiB0aGlzLnN0cmlwKHVzZXJuYW1lKSwgbmFtZTogdGhpcy5zdHJpcChuYW1lKSwgd2FsbDogdGhpcy5zdHJpcCh3YWxsKSwgc3RlcHM6IHN0ZXBzIH0pO1xuLy8gICB9XG4vL1xuLy8gICB0aGlzLmdldFN0cnVjdHMgPSBmdW5jdGlvbigpIHtcbi8vICAgICB0aGlzLmNoYW4ucHVzaChcInN0cnVjdDppbmRleFwiLCB7fSwgMTAwMDApXG4vLyAgICAgICAucmVjZWl2ZShcIm9rXCIsIGZ1bmN0aW9uKG1zZykge1xuLy8gICAgICAgICB2YXIgc3RydWN0cyA9IG1zZ1tcInN0cnVjdHNcIl07XG4vLyAgICAgICAgIHZhciBzdHJ1Y3RzX2xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXJfc3RydWN0c1wiKTtcbi8vICAgICAgICAgc3RydWN0c19saXN0LmlubmVySFRNTCA9IFwiXCI7XG4vLyAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RydWN0cy5sZW5ndGg7IGkrKykge1xuLy8gICAgICAgICAgIHZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuLy8gICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKFwiZGF0YS13YWxsXCIsIHN0cnVjdHNbaV0ud2FsbCk7XG4vLyAgICAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXN0ZXBzXCIsIHN0cnVjdHNbaV0uc3RlcHMpO1xuLy8gICAgICAgICAgIGVsZW0uaW5uZXJIVE1MID0gXCI8Y2FudmFzIGlkPSd1c2VyY2FudmFzXCIgKyBpICsgXCInIHdpZHRoPScxMDAlJyBoZWlnaHQ9JzEwMHB4Jz48L2NhbnZhcz48YnI+XCIgKyBMb2dnZXIuc3RyaXAoc3RydWN0c1tpXS5uYW1lKSArIFwiIGJ5IFwiICsgTG9nZ2VyLnN0cmlwKHN0cnVjdHNbaV0udXNlcm5hbWUpO1xuLy8gICAgICAgICAgIHN0cnVjdHNfbGlzdC5hcHBlbmRDaGlsZChlbGVtKTtcbi8vICAgICAgICAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBsb2FkU3RydWN0KTtcbi8vICAgICAgICAgICBQUy5NYWluLnJlbmRlclVzZXJUYXJnZXRKU09OKFwiW1wiICsgc3RydWN0c1tpXS53YWxsICsgXCJdXCIpKFwidXNlcmNhbnZhc1wiICsgaSkoKTtcbi8vICAgICAgICAgfVxuLy8gICAgICAgfSk7XG4vLyAgIH1cbi8vIH1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9qcy9sb2dnZXIuanMiXSwic291cmNlUm9vdCI6IiJ9')},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__config__ = __webpack_require__(0);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\n\n\nvar SempreClient = function () {\n  function SempreClient() {\n    _classCallCheck(this, SempreClient);\n  }\n\n  _createClass(SempreClient, [{\n    key: "cleanValue",\n    value: function cleanValue(valueString) {\n      if (!valueString) return "";\n\n      return valueString.replace(/edu.stanford.nlp.sempre.cubeworld.CubeWorld./g, "").replace(/edu.stanford.nlp.sempre.cubeworld..*\\./g, "").replace(/edu.stanford.nlp.sempre./g, "").replace(/context:root/g, "").toLowerCase();\n    }\n  }, {\n    key: "formatFormula",\n    value: function formatFormula(formula) {\n      if (typeof formula === "undefined") return "";\n      if (typeof formula === "string") return this.cleanValue(formula);\n\n      var head = formula[0];\n      var str = "";\n      if (head === "call") {\n        var op = this.formatFormula(formula[1]);\n\n        if (op === ".concat") {\n          str = this.formatFormula(formula[2]) + " " + this.formatFormula(formula[3]);\n        } else if (op === ".tostring") {\n          str = this.formatFormula(formula[2]);\n        } else {\n          // Default behavior just exposes the function call\n          var arglist = [];\n          for (var i = -2; i < formula.length; i++) {\n            arglist.push(this.formatFormula(formula[i]));\n          }\n          str = op + "(" + arglist.join(",") + ")";\n        }\n      } else if (head === "number") {\n        str = formula[1];\n      } else if (head === "name" || head === "string") {\n        str = this.cleanValue(formula[1]);\n      } else {\n        str = this.cleanValue(formula[0]);\n      }\n      return str;\n    }\n  }, {\n    key: "formatValue",\n    value: function formatValue(value) {\n      if (typeof value === "undefined") return "";\n      // "[[5,5,1,\\"Blue\\",[]],[5,5,2,\\"Red\\",[]],[5,4,2,\\"Green\\",[]]]"\n      var valueArray = JSON.parse(value);\n\n      // const valueArray = [[1, 1, 0, "Red", []], [1, 1, 1, "Orange", []]];\n\n      return valueArray.map(function (c) {\n        return {\n          x: c[0],\n          y: c[1],\n          z: c[2],\n          color: c[3],\n          names: c[4]\n        };\n      });\n\n      // const head = value[0];\n      // let str = "";\n      // switch (head) {\n      //   case "list": {\n      //     const elements = [];\n      //     for (let i = 1; i < value.length; i++) {\n      //       elements.push(this.formatValue(value[i], value.length));\n      //     }\n      //     str = `[${elements.join(", ")}]`;\n      //     break;\n      //   }\n      //   case "table": {\n      //     const headers = value[1];\n      //     for (let j = 0; j < headers.length; j++) {\n      //       str += `{${value[1][j]}\\t `;\n      //     }\n      //     str += "\\n";\n      //     for (let i = 2; i < value.length; i++) {\n      //       for (let j = 0; j < headers.length; j++) {\n      //         str += `${this.formatValue(value[i][j], value.length)}\\t `;\n      //       }\n      //       str += "\\n";\n      //     }\n      //     break;\n      //   }\n      //   case "number": {\n      //     str = this.cleanValue(value[1]);\n      //     break;\n      //   }\n      //   case "name": {\n      //     str = this.cleanValue(value[1]);\n      //     break;\n      //   }\n      //   default: {\n      //     str = this.cleanValue(value[1]);\n      //   }\n      // }\n      // return str;\n    }\n  }, {\n    key: "combine",\n    value: function combine(vsTmp, v) {\n      var vs = vsTmp;\n      if (vs === undefined) {\n        vs = {};\n        vs.value = v.value;\n        vs.formula = v.formula;\n        vs.formulas = [vs.formula];\n        vs.prob = parseFloat(v.prob);\n        vs.probs = [v.prob];\n        vs.pprob = parseFloat(v.pprob);\n        vs.pprobs = [v.pprob];\n        vs.score = parseFloat(v.score);\n        vs.rank = v.rank;\n        vs.count = 1;\n        vs.maxprob = parseFloat(v.prob);\n        vs.maxpprob = parseFloat(v.pprob);\n      } else {\n        vs.value = v.value;\n        vs.prob += parseFloat(v.prob);\n        vs.pprob += parseFloat(v.pprob);\n\n        vs.score = Math.max(vs.score, parseFloat(v.score));\n        vs.maxprob = Math.max(vs.maxprob, parseFloat(v.prob));\n        vs.maxpprob = Math.max(vs.maxpprob, parseFloat(v.pprob));\n        vs.rank = Math.min(vs.rank, v.rank);\n        vs.probs.push(v.prob);\n        vs.formulas.push(v.formula);\n        vs.count += 1;\n      }\n      return vs;\n    }\n  }, {\n    key: "parseSEMPRE",\n    value: function parseSEMPRE(valid) {\n      var _this = this;\n\n      var lstqapairs = [];\n      if (valid.length === 0) return undefined;\n\n      for (var i = 0; i < valid.length; i++) {\n        var qapair = {};\n        qapair.value = this.formatValue(valid[i].value);\n        qapair.formula = this.formatFormula(valid[i].formula);\n        // qapair.raw = valid[i];\n        qapair.score = valid[i].score.toFixed(7);\n        qapair.rank = i;\n        qapair.prob = valid[i].prob;\n        qapair.pprob = valid[i].pprob;\n        lstqapairs.push(qapair);\n      }\n\n      var nbestdict = lstqapairs.reduce(function (nbd, nbest) {\n        var mynbd = nbd;\n        mynbd[nbest.value] = _this.combine(nbd[nbest.value], nbest);\n        return mynbd;\n      }, {});\n\n      var listqadedup = [];\n      for (var key in nbestdict) {\n        listqadedup.push(nbestdict[key]);\n      }\n      listqadedup.sort(function (a, b) {\n        return b.score - a.score + 1e-3 * (a.rank - b.rank);\n      });\n      return listqadedup;\n    }\n  }, {\n    key: "sempreFormat",\n    value: function sempreFormat(ques) {\n      return ques.replace(/\\+/g, " __+ ").replace(/\\(/g, " [ ").replace(/\\)/g, " ] ").replace(/\\+/g, " + ").replace(/-/g, " - ").replace(/\\*/g, " * ").replace(/\\//g, " / ");\n    }\n  }, {\n    key: "formatQuery",\n    value: function formatQuery(ques) {\n      var sanity = ques.replace(/(\\+|-|%)/g, " $1 ").replace(/(\\(|\\))/g, "").replace(/"/g, "").replace(/=/g, "= ").replace(/(>|<)/g, " $1").replace(/(>|<)(?!=)/g, "$1 ").replace(/([^><])=/g, "$1 =");\n      if (__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].debugMode) {\n        console.log(sanity);\n      }\n      return sanity;\n    }\n  }, {\n    key: "query",\n    value: function query(cmds, callback) {\n      var cmdstr = [];\n      for (var k in cmds) {\n        cmdstr.push(k + "=" + encodeURIComponent(cmds[k]));\n      }\n\n      fetch(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].SEMPRE_URL + "/sempre?format=lisp2json&" + cmdstr.join("&")).then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        return callback(json);\n      });\n      // .catch((ex) => {\n      //   console.log("xmlhttp issue?", ex);\n      // });\n    }\n  }]);\n\n  return SempreClient;\n}();\n\n/* harmony default export */ exports["a"] = SempreClient;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvanMvc2VtcHJlLmpzPzQ3NDgiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTs7SUFFcUIsWTs7Ozs7OzsrQkFDUixXLEVBQWE7QUFDdEIsVUFBSSxDQUFDLFdBQUwsRUFBa0IsT0FBTyxFQUFQOztBQUVsQixhQUFPLFlBQ0osT0FESSxDQUNJLCtDQURKLEVBQ3FELEVBRHJELEVBRUosT0FGSSxDQUVJLHlDQUZKLEVBRStDLEVBRi9DLEVBR0osT0FISSxDQUdJLDJCQUhKLEVBR2lDLEVBSGpDLEVBSUosT0FKSSxDQUlJLGVBSkosRUFJcUIsRUFKckIsRUFLSixXQUxJLEVBQVA7QUFNRDs7O2tDQUVhLE8sRUFBUztBQUNyQixVQUFJLE9BQU8sT0FBUCxLQUFtQixXQUF2QixFQUFvQyxPQUFPLEVBQVA7QUFDcEMsVUFBSSxPQUFPLE9BQVAsS0FBbUIsUUFBdkIsRUFBaUMsT0FBTyxLQUFLLFVBQUwsQ0FBZ0IsT0FBaEIsQ0FBUDs7QUFFakMsVUFBTSxPQUFPLFFBQVEsQ0FBUixDQUFiO0FBQ0EsVUFBSSxNQUFNLEVBQVY7QUFDQSxVQUFJLFNBQVMsTUFBYixFQUFxQjtBQUNuQixZQUFNLEtBQUssS0FBSyxhQUFMLENBQW1CLFFBQVEsQ0FBUixDQUFuQixDQUFYOztBQUVBLFlBQUksT0FBTyxTQUFYLEVBQXNCO0FBQ3BCLGdCQUFTLEtBQUssYUFBTCxDQUFtQixRQUFRLENBQVIsQ0FBbkIsQ0FBVCxTQUEyQyxLQUFLLGFBQUwsQ0FBbUIsUUFBUSxDQUFSLENBQW5CLENBQTNDO0FBQ0QsU0FGRCxNQUVPLElBQUksT0FBTyxXQUFYLEVBQXdCO0FBQzdCLGdCQUFNLEtBQUssYUFBTCxDQUFtQixRQUFRLENBQVIsQ0FBbkIsQ0FBTjtBQUNELFNBRk0sTUFFQTs7QUFFTCxjQUFNLFVBQVUsRUFBaEI7QUFDQSxlQUFLLElBQUksSUFBSSxDQUFDLENBQWQsRUFBaUIsSUFBSSxRQUFRLE1BQTdCLEVBQXFDLEdBQXJDLEVBQTBD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UyxJQUFULEVBQWQ7QUFBQSxPQURSLEVBRUcsSUFGSCxDQUVRLFVBQUMsSUFBRDtBQUFBLGVBQVUsU0FBUyxJQUFULENBQVY7QUFBQSxPQUZSOzs7O0FBTUQ7Ozs7Ozs0Q0F0TWtCLFkiLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29uZmlncyBmcm9tIFwiLi9jb25maWdcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VtcHJlQ2xpZW50IHtcbiAgY2xlYW5WYWx1ZSh2YWx1ZVN0cmluZykge1xuICAgIGlmICghdmFsdWVTdHJpbmcpIHJldHVybiBcIlwiO1xuXG4gICAgcmV0dXJuIHZhbHVlU3RyaW5nXG4gICAgICAucmVwbGFjZSgvZWR1LnN0YW5mb3JkLm5scC5zZW1wcmUuY3ViZXdvcmxkLkN1YmVXb3JsZC4vZywgXCJcIilcbiAgICAgIC5yZXBsYWNlKC9lZHUuc3RhbmZvcmQubmxwLnNlbXByZS5jdWJld29ybGQuLipcXC4vZywgXCJcIilcbiAgICAgIC5yZXBsYWNlKC9lZHUuc3RhbmZvcmQubmxwLnNlbXByZS4vZywgXCJcIilcbiAgICAgIC5yZXBsYWNlKC9jb250ZXh0OnJvb3QvZywgXCJcIilcbiAgICAgIC50b0xvd2VyQ2FzZSgpO1xuICB9XG5cbiAgZm9ybWF0Rm9ybXVsYShmb3JtdWxhKSB7XG4gICAgaWYgKHR5cGVvZiBmb3JtdWxhID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gXCJcIjtcbiAgICBpZiAodHlwZW9mIGZvcm11bGEgPT09IFwic3RyaW5nXCIpIHJldHVybiB0aGlzLmNsZWFuVmFsdWUoZm9ybXVsYSk7XG5cbiAgICBjb25zdCBoZWFkID0gZm9ybXVsYVswXTtcbiAgICBsZXQgc3RyID0gXCJcIjtcbiAgICBpZiAoaGVhZCA9PT0gXCJjYWxsXCIpIHtcbiAgICAgIGNvbnN0IG9wID0gdGhpcy5mb3JtYXRGb3JtdWxhKGZvcm11bGFbMV0pO1xuXG4gICAgICBpZiAob3AgPT09IFwiLmNvbmNhdFwiKSB7XG4gICAgICAgIHN0ciA9IGAke3RoaXMuZm9ybWF0Rm9ybXVsYShmb3JtdWxhWzJdKX0gJHt0aGlzLmZvcm1hdEZvcm11bGEoZm9ybXVsYVszXSl9YDtcbiAgICAgIH0gZWxzZSBpZiAob3AgPT09IFwiLnRvc3RyaW5nXCIpIHtcbiAgICAgICAgc3RyID0gdGhpcy5mb3JtYXRGb3JtdWxhKGZvcm11bGFbMl0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRGVmYXVsdCBiZWhhdmlvciBqdXN0IGV4cG9zZXMgdGhlIGZ1bmN0aW9uIGNhbGxcbiAgICAgICAgY29uc3QgYXJnbGlzdCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gLTI7IGkgPCBmb3JtdWxhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXJnbGlzdC5wdXNoKHRoaXMuZm9ybWF0Rm9ybXVsYShmb3JtdWxhW2ldKSk7XG4gICAgICAgIH1cbiAgICAgICAgc3RyID0gYCR7b3B9KCR7YXJnbGlzdC5qb2luKFwiLFwiKX0pYDtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGhlYWQgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHN0ciA9IGZvcm11bGFbMV07XG4gICAgfSBlbHNlIGlmIChoZWFkID09PSBcIm5hbWVcIiB8fCBoZWFkID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBzdHIgPSB0aGlzLmNsZWFuVmFsdWUoZm9ybXVsYVsxXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0ciA9IHRoaXMuY2xlYW5WYWx1ZShmb3JtdWxhWzBdKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxuXG4gIGZvcm1hdFZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIFwiXCI7XG4gICAgLy8gXCJbWzUsNSwxLFxcXCJCbHVlXFxcIixbXV0sWzUsNSwyLFxcXCJSZWRcXFwiLFtdXSxbNSw0LDIsXFxcIkdyZWVuXFxcIixbXV1dXCJcbiAgICBjb25zdCB2YWx1ZUFycmF5ID0gSlNPTi5wYXJzZSh2YWx1ZSk7XG5cbiAgICAvLyBjb25zdCB2YWx1ZUFycmF5ID0gW1sxLCAxLCAwLCBcIlJlZFwiLCBbXV0sIFsxLCAxLCAxLCBcIk9yYW5nZVwiLCBbXV1dO1xuXG4gICAgcmV0dXJuIHZhbHVlQXJyYXkubWFwKChjKSA9PiAoXG4gICAgICB7XG4gICAgICAgIHg6IGNbMF0sXG4gICAgICAgIHk6IGNbMV0sXG4gICAgICAgIHo6IGNbMl0sXG4gICAgICAgIGNvbG9yOiBjWzNdLFxuICAgICAgICBuYW1lczogY1s0XSxcbiAgICAgIH1cbiAgICApKTtcblxuICAgIC8vIGNvbnN0IGhlYWQgPSB2YWx1ZVswXTtcbiAgICAvLyBsZXQgc3RyID0gXCJcIjtcbiAgICAvLyBzd2l0Y2ggKGhlYWQpIHtcbiAgICAvLyAgIGNhc2UgXCJsaXN0XCI6IHtcbiAgICAvLyAgICAgY29uc3QgZWxlbWVudHMgPSBbXTtcbiAgICAvLyAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xuICAgIC8vICAgICAgIGVsZW1lbnRzLnB1c2godGhpcy5mb3JtYXRWYWx1ZSh2YWx1ZVtpXSwgdmFsdWUubGVuZ3RoKSk7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgc3RyID0gYFske2VsZW1lbnRzLmpvaW4oXCIsIFwiKX1dYDtcbiAgICAvLyAgICAgYnJlYWs7XG4gICAgLy8gICB9XG4gICAgLy8gICBjYXNlIFwidGFibGVcIjoge1xuICAgIC8vICAgICBjb25zdCBoZWFkZXJzID0gdmFsdWVbMV07XG4gICAgLy8gICAgIGZvciAobGV0IGogPSAwOyBqIDwgaGVhZGVycy5sZW5ndGg7IGorKykge1xuICAgIC8vICAgICAgIHN0ciArPSBgeyR7dmFsdWVbMV1bal19XFx0IGA7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgc3RyICs9IFwiXFxuXCI7XG4gICAgLy8gICAgIGZvciAobGV0IGkgPSAyOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAvLyAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGhlYWRlcnMubGVuZ3RoOyBqKyspIHtcbiAgICAvLyAgICAgICAgIHN0ciArPSBgJHt0aGlzLmZvcm1hdFZhbHVlKHZhbHVlW2ldW2pdLCB2YWx1ZS5sZW5ndGgpfVxcdCBgO1xuICAgIC8vICAgICAgIH1cbiAgICAvLyAgICAgICBzdHIgKz0gXCJcXG5cIjtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICBicmVhaztcbiAgICAvLyAgIH1cbiAgICAvLyAgIGNhc2UgXCJudW1iZXJcIjoge1xuICAgIC8vICAgICBzdHIgPSB0aGlzLmNsZWFuVmFsdWUodmFsdWVbMV0pO1xuICAgIC8vICAgICBicmVhaztcbiAgICAvLyAgIH1cbiAgICAvLyAgIGNhc2UgXCJuYW1lXCI6IHtcbiAgICAvLyAgICAgc3RyID0gdGhpcy5jbGVhblZhbHVlKHZhbHVlWzFdKTtcbiAgICAvLyAgICAgYnJlYWs7XG4gICAgLy8gICB9XG4gICAgLy8gICBkZWZhdWx0OiB7XG4gICAgLy8gICAgIHN0ciA9IHRoaXMuY2xlYW5WYWx1ZSh2YWx1ZVsxXSk7XG4gICAgLy8gICB9XG4gICAgLy8gfVxuICAgIC8vIHJldHVybiBzdHI7XG4gIH1cblxuICBjb21iaW5lKHZzVG1wLCB2KSB7XG4gICAgbGV0IHZzID0gdnNUbXA7XG4gICAgaWYgKHZzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHZzID0ge307XG4gICAgICB2cy52YWx1ZSA9IHYudmFsdWU7XG4gICAgICB2cy5mb3JtdWxhID0gdi5mb3JtdWxhO1xuICAgICAgdnMuZm9ybXVsYXMgPSBbdnMuZm9ybXVsYV07XG4gICAgICB2cy5wcm9iID0gcGFyc2VGbG9hdCh2LnByb2IpO1xuICAgICAgdnMucHJvYnMgPSBbdi5wcm9iXTtcbiAgICAgIHZzLnBwcm9iID0gcGFyc2VGbG9hdCh2LnBwcm9iKTtcbiAgICAgIHZzLnBwcm9icyA9IFt2LnBwcm9iXTtcbiAgICAgIHZzLnNjb3JlID0gcGFyc2VGbG9hdCh2LnNjb3JlKTtcbiAgICAgIHZzLnJhbmsgPSB2LnJhbms7XG4gICAgICB2cy5jb3VudCA9IDE7XG4gICAgICB2cy5tYXhwcm9iID0gcGFyc2VGbG9hdCh2LnByb2IpO1xuICAgICAgdnMubWF4cHByb2IgPSBwYXJzZUZsb2F0KHYucHByb2IpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2cy52YWx1ZSA9IHYudmFsdWU7XG4gICAgICB2cy5wcm9iICs9IHBhcnNlRmxvYXQodi5wcm9iKTtcbiAgICAgIHZzLnBwcm9iICs9IHBhcnNlRmxvYXQodi5wcHJvYik7XG5cbiAgICAgIHZzLnNjb3JlID0gTWF0aC5tYXgodnMuc2NvcmUsIHBhcnNlRmxvYXQodi5zY29yZSkpO1xuICAgICAgdnMubWF4cHJvYiA9IE1hdGgubWF4KHZzLm1heHByb2IsIHBhcnNlRmxvYXQodi5wcm9iKSk7XG4gICAgICB2cy5tYXhwcHJvYiA9IE1hdGgubWF4KHZzLm1heHBwcm9iLCBwYXJzZUZsb2F0KHYucHByb2IpKTtcbiAgICAgIHZzLnJhbmsgPSBNYXRoLm1pbih2cy5yYW5rLCB2LnJhbmspO1xuICAgICAgdnMucHJvYnMucHVzaCh2LnByb2IpO1xuICAgICAgdnMuZm9ybXVsYXMucHVzaCh2LmZvcm11bGEpO1xuICAgICAgdnMuY291bnQgKz0gMTtcbiAgICB9XG4gICAgcmV0dXJuIHZzO1xuICB9XG5cbiAgcGFyc2VTRU1QUkUodmFsaWQpIHtcbiAgICBjb25zdCBsc3RxYXBhaXJzID0gW107XG4gICAgaWYgKHZhbGlkLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsaWQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHFhcGFpciA9IHt9O1xuICAgICAgcWFwYWlyLnZhbHVlID0gdGhpcy5mb3JtYXRWYWx1ZSh2YWxpZFtpXS52YWx1ZSk7XG4gICAgICBxYXBhaXIuZm9ybXVsYSA9IHRoaXMuZm9ybWF0Rm9ybXVsYSh2YWxpZFtpXS5mb3JtdWxhKTtcbiAgICAgIC8vIHFhcGFpci5yYXcgPSB2YWxpZFtpXTtcbiAgICAgIHFhcGFpci5zY29yZSA9IHZhbGlkW2ldLnNjb3JlLnRvRml4ZWQoNyk7XG4gICAgICBxYXBhaXIucmFuayA9IGk7XG4gICAgICBxYXBhaXIucHJvYiA9IHZhbGlkW2ldLnByb2I7XG4gICAgICBxYXBhaXIucHByb2IgPSB2YWxpZFtpXS5wcHJvYjtcbiAgICAgIGxzdHFhcGFpcnMucHVzaChxYXBhaXIpO1xuICAgIH1cblxuICAgIGNvbnN0IG5iZXN0ZGljdCA9IGxzdHFhcGFpcnMucmVkdWNlKChuYmQsIG5iZXN0KSA9PiB7XG4gICAgICBjb25zdCBteW5iZCA9IG5iZDtcbiAgICAgIG15bmJkW25iZXN0LnZhbHVlXSA9IHRoaXMuY29tYmluZShuYmRbbmJlc3QudmFsdWVdLCBuYmVzdCk7XG4gICAgICByZXR1cm4gbXluYmQ7XG4gICAgfSwge30pO1xuXG4gICAgY29uc3QgbGlzdHFhZGVkdXAgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBuYmVzdGRpY3QpIHtcbiAgICAgIGxpc3RxYWRlZHVwLnB1c2gobmJlc3RkaWN0W2tleV0pO1xuICAgIH1cbiAgICBsaXN0cWFkZWR1cC5zb3J0KChhLCBiKSA9PiBiLnNjb3JlIC0gYS5zY29yZSArIDFlLTMgKiAoYS5yYW5rIC0gYi5yYW5rKSk7XG4gICAgcmV0dXJuIGxpc3RxYWRlZHVwO1xuICB9XG5cbiAgc2VtcHJlRm9ybWF0KHF1ZXMpIHtcbiAgICByZXR1cm4gcXVlcy5yZXBsYWNlKC9cXCsvZywgXCIgX18rIFwiKVxuICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcKC9nLCBcIiBbIFwiKVxuICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcKS9nLCBcIiBdIFwiKVxuICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcKy9nLCBcIiArIFwiKVxuICAgICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgXCIgLSBcIilcbiAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXCovZywgXCIgKiBcIilcbiAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXC8vZywgXCIgLyBcIik7XG4gIH1cblxuICBmb3JtYXRRdWVyeShxdWVzKSB7XG4gICAgY29uc3Qgc2FuaXR5ID0gcXVlcy5yZXBsYWNlKC8oXFwrfC18JSkvZywgXCIgJDEgXCIpXG4gICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oXFwofFxcKSkvZywgXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1wiL2csIFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC89L2csIFwiPSBcIilcbiAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyg+fDwpL2csIFwiICQxXCIpXG4gICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oPnw8KSg/IT0pL2csIFwiJDEgXCIpXG4gICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oW14+PF0pPS9nLCBcIiQxID1cIik7XG4gICAgaWYgKGNvbmZpZ3MuZGVidWdNb2RlKSB7XG4gICAgICBjb25zb2xlLmxvZyhzYW5pdHkpO1xuICAgIH1cbiAgICByZXR1cm4gc2FuaXR5O1xuICB9XG5cbiAgcXVlcnkoY21kcywgY2FsbGJhY2spIHtcbiAgICBjb25zdCBjbWRzdHIgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGsgaW4gY21kcykge1xuICAgICAgY21kc3RyLnB1c2goYCR7a309JHtlbmNvZGVVUklDb21wb25lbnQoY21kc1trXSl9YCk7XG4gICAgfVxuXG4gICAgZmV0Y2goYCR7Y29uZmlncy5TRU1QUkVfVVJMfS9zZW1wcmU/Zm9ybWF0PWxpc3AyanNvbiYke2NtZHN0ci5qb2luKFwiJlwiKX1gKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgICAudGhlbigoanNvbikgPT4gY2FsbGJhY2soanNvbikpXG4gICAgICAvLyAuY2F0Y2goKGV4KSA9PiB7XG4gICAgICAvLyAgIGNvbnNvbGUubG9nKFwieG1saHR0cCBpc3N1ZT9cIiwgZXgpO1xuICAgICAgLy8gfSk7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9qcy9zZW1wcmUuanMiXSwic291cmNlUm9vdCI6IiJ9')},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__config__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_isomer__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_isomer___default = __WEBPACK_IMPORTED_MODULE_2_isomer__ && __WEBPACK_IMPORTED_MODULE_2_isomer__.__esModule ? function() { return __WEBPACK_IMPORTED_MODULE_2_isomer__[\'default\'] } : function() { return __WEBPACK_IMPORTED_MODULE_2_isomer__; };\n/* harmony import */ __webpack_require__.d(__WEBPACK_IMPORTED_MODULE_2_isomer___default, \'a\', __WEBPACK_IMPORTED_MODULE_2_isomer___default);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\n\n\n\n\n\n/* eslint-disable new-cap */\n\nvar Setting = function () {\n  function Setting() {\n    _classCallCheck(this, Setting);\n\n    this.iso = new __WEBPACK_IMPORTED_MODULE_2_isomer___default.a(document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].mainCanvas));\n    this.isoTarget = new __WEBPACK_IMPORTED_MODULE_2_isomer___default.a(document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].targetCanvas));\n    this.basicUnit = 0.8;\n    this.width = 10;\n    this.borderWidth = -0.15;\n    this.baseHeight = 0.1;\n    this.centerPoint = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_isomer__["Point"])(this.width / 2, this.width / 2, this.width / 2);\n    this.rotation = Math.PI / 12;\n    this.rotational = "A";\n    this.targetScale = 0.5;\n    this.targetTranslate = -2;\n\n    this.renderCanvas(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].defaultStruct);\n    this.renderTarget(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].defaultStruct);\n  }\n\n  _createClass(Setting, [{\n    key: "renderTarget",\n    value: function renderTarget(state) {\n      this.renderBoard(this.isoTarget, this.targetScale, this.targetTranslate);\n      this.renderBlocks(this.isoTarget, state, this.targetScale, this.targetTranslate);\n    }\n  }, {\n    key: "renderCanvas",\n    value: function renderCanvas(state) {\n      this.renderBoard(this.iso);\n      this.renderBlocks(this.iso, state);\n    }\n  }, {\n    key: "renderBoard",\n    value: function renderBoard(iso) {\n      var scalingFactor = arguments.length <= 1 || arguments[1] === undefined ? 1 : arguments[1];\n      var translateFactor = arguments.length <= 2 || arguments[2] === undefined ? 0 : arguments[2];\n\n      iso.canvas.clear();\n      var translateBy = translateFactor * this.basicUnit * scalingFactor;\n      for (var x = this.width - 1; x >= 0; x--) {\n        for (var y = this.width - 1; y >= 0; y--) {\n          iso.add(__WEBPACK_IMPORTED_MODULE_2_isomer__["Shape"].Prism(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_isomer__["Point"])((x + this.borderWidth * x) * scalingFactor, (y + this.borderWidth * y) * scalingFactor, 0), this.basicUnit * scalingFactor, this.basicUnit * scalingFactor, this.baseHeight * scalingFactor).rotateZ(this.centerPoint, this.rotation).translate(translateBy, -translateBy, -4.5 * translateBy), new __WEBPACK_IMPORTED_MODULE_2_isomer__["Color"](144, 144, 144));\n        }\n      }\n    }\n  }, {\n    key: "renderBlocks",\n    value: function renderBlocks(iso, state) {\n      var _this = this;\n\n      var scalingFactor = arguments.length <= 2 || arguments[2] === undefined ? 1 : arguments[2];\n      var translateFactor = arguments.length <= 3 || arguments[3] === undefined ? 0 : arguments[3];\n\n      var blocks = this.sortBlocks(state.map(function (b) {\n        var x = b.x;\n        var y = b.y;\n\n        switch (_this.rotational) {\n          case -1:\n            x = b.x;\n            y = b.y;\n            break;\n          case -2:\n            x = b.y;\n            y = _this.width - 1 - b.x;\n            break;\n          case 1:\n            x = _this.width - 1 - b.y;\n            y = b.x;\n            break;\n          case 2:\n            x = _this.width - 1 - b.x;\n            y = _this.width - 1 - b.y;\n            break;\n          default:\n        }\n\n        return _extends({}, b, { x: x, y: y });\n      }));\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = blocks[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var block = _step.value;\n\n          var color = __WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].colorMap[block.color];\n          var blockColor = new __WEBPACK_IMPORTED_MODULE_2_isomer__["Color"]();\n          if (block.names && block.names.includes("_new")) {\n            blockColor = new __WEBPACK_IMPORTED_MODULE_2_isomer__["Color"](color[0], color[1], color[2], 0.4);\n          } else {\n            blockColor = new __WEBPACK_IMPORTED_MODULE_2_isomer__["Color"](color[0], color[1], color[2]);\n          }\n          iso.add(this.makeBlock(block.x, block.y, block.z, scalingFactor, translateFactor), blockColor);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n  }, {\n    key: "makeBlock",\n    value: function makeBlock(x, y, z) {\n      var scalingFactor = arguments.length <= 3 || arguments[3] === undefined ? 1 : arguments[3];\n      var translateFactor = arguments.length <= 4 || arguments[4] === undefined ? 0 : arguments[4];\n\n      var translateBy = translateFactor * this.basicUnit * scalingFactor;\n\n      return __WEBPACK_IMPORTED_MODULE_2_isomer__["Shape"].Prism(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_isomer__["Point"])((x + x * this.borderWidth) * scalingFactor, (y + y * this.borderWidth) * scalingFactor, (z + this.baseHeight + this.borderWidth * z) * scalingFactor), this.basicUnit * scalingFactor, this.basicUnit * scalingFactor, this.basicUnit * scalingFactor).rotateZ(this.centerPoint, this.rotation).translate(translateBy, -translateBy, -4.5 * translateBy);\n    }\n  }, {\n    key: "sortBlocks",\n    value: function sortBlocks(blocks) {\n      return blocks.sort(function (a, b) {\n        if (a.z > b.z) {\n          return 1;\n        } else if (a.z < b.z) {\n          return -1;\n        }\n\n        if (a.x > b.x) {\n          return -1;\n        } else if (a.x < b.x) {\n          return 1;\n        }\n\n        if (a.y > b.y) {\n          return -1;\n        } else if (a.y < b.y) {\n          return 1;\n        }\n\n        return 0;\n      });\n    }\n  }, {\n    key: "stateIncludes",\n    value: function stateIncludes(state, obj) {\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = state[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var c = _step2.value;\n\n          if (c.x === obj.x && c.y === obj.y && c.z === obj.z && c.color === obj.color) {\n            return true;\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: "computeDiff",\n    value: function computeDiff(state, newState) {\n      var _this2 = this;\n\n      var difference = newState.filter(function (c) {\n        return !_this2.stateIncludes(state, c);\n      });\n      var intersection = state.filter(function (c) {\n        return _this2.stateIncludes(newState, c);\n      });\n\n      return difference.map(function (c) {\n        return Object.assign({}, c, { names: [].concat(_toConsumableArray(c.names), ["_new"]) });\n      }).concat(intersection);\n    }\n  }, {\n    key: "equalityCheck",\n    value: function equalityCheck(struct1, struct2) {\n      return struct1 === struct2;\n    }\n  }, {\n    key: "status",\n    value: function status(msg) {\n      var query = arguments.length <= 1 || arguments[1] === undefined ? "" : arguments[1];\n      var prob = arguments.length <= 2 || arguments[2] === undefined ? 0 : arguments[2];\n\n      var status = document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].statusElemId);\n      var currentcmd = document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].currentCmdElemId);\n      status.innerHTML = msg;\n\n      if (query.length > 0) {\n        var stateinfo = "<b>↵: " + query + "</b>";\n        // TODO: if Answer: stateinfo = "<b>↵: {query} (#{NBestInd}/{NBestlen})</b>"\n        currentcmd.innerHTML = stateinfo;\n      } else {\n        currentcmd.innerHTML = "<b>enter a command</b>";\n      }\n\n      this.updateReaction(prob);\n    }\n  }, {\n    key: "updateReaction",\n    value: function updateReaction(prob) {\n      var reaction = document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].reactionElemId);\n      if (prob === 0) {\n        reaction.innerHTML = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__["c" /* emojione */])(3);\n      } else {\n        (function () {\n          var cc = prob;\n          if (!cc) {\n            cc = 0;\n          }\n          var cutoffs = [0.5, 0.1, 0.05, 0.01, 0.001, 0.00001, -1];\n          reaction.innerHTML = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__["c" /* emojione */])(cutoffs.findIndex(function (val) {\n            return cc >= val;\n          }));\n        })();\n      }\n    }\n  }, {\n    key: "renderHistory",\n    value: function renderHistory(history) {\n      var historyElem = document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].historyElemId);\n      historyElem.innerHTML = "";\n\n      for (var i = history.length - 1; i >= 0; i--) {\n        var elem = document.createElement("div");\n        elem.setAttribute("data-type", history[i].type);\n        elem.setAttribute("data-stepN", history[i].stepN);\n        if (history[i].type === "accept") {\n          elem.innerHTML = history[i].stepN + ". " + history[i].query;\n        } else {\n          elem.innerHTML = history[i].query;\n        }\n        historyElem.appendChild(elem);\n      }\n    }\n  }, {\n    key: "setSteps",\n    value: function setSteps(poss, max) {\n      var possSteps = document.querySelectorAll("." + __WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].possStepsElemId);\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = possSteps[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var possStep = _step3.value;\n\n          possStep.innerHTML = poss;\n        }\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      var maxSteps = document.querySelectorAll("." + __WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].maxStepsElemId);\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = maxSteps[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var maxStep = _step4.value;\n\n          maxStep.innerHTML = max;\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n    }\n  }, {\n    key: "updateSteps",\n    value: function updateSteps(steps) {\n      var currSteps = document.querySelectorAll("." + __WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].elems.currSteps);\n      var _iteratorNormalCompletion5 = true;\n      var _didIteratorError5 = false;\n      var _iteratorError5 = undefined;\n\n      try {\n        for (var _iterator5 = currSteps[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n          var currStep = _step5.value;\n\n          currStep.innerHTML = steps;\n        }\n      } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion5 && _iterator5.return) {\n            _iterator5.return();\n          }\n        } finally {\n          if (_didIteratorError5) {\n            throw _iteratorError5;\n          }\n        }\n      }\n    }\n  }, {\n    key: "openDefineInterface",\n    value: function openDefineInterface(query, canAnswer, coverage) {\n      if (query.length === 0) {\n        this.status("nothing to define");\n        return false;\n      }\n\n      var defineInterface = document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].elems.defineInterface);\n      defineInterface.classList.add("active");\n\n      var defineStatus = document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].elems.defineStatus);\n      defineStatus.innerHTML = "Teach SHRDLURN " + query + ".";\n\n      var toggleButton = document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].buttons.toggleDefine);\n      toggleButton.innerHTML = "Return";\n\n      this.removePromptDefine();\n\n      this.tryDefine(query, false, canAnswer, coverage);\n\n      document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].elems.defineConsole).focus();\n      return true;\n    }\n  }, {\n    key: "closeDefineInterface",\n    value: function closeDefineInterface() {\n      var defineInterface = document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].elems.defineInterface);\n      defineInterface.classList.remove("active");\n\n      var toggleButton = document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].buttons.toggleDefine);\n      toggleButton.innerHTML = "Define";\n\n      this.removePromptDefine();\n\n      var consoleElem = document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].elems.console);\n      consoleElem.focus();\n    }\n  }, {\n    key: "tryDefine",\n    value: function tryDefine(query, refineDefine, canAnswer) {\n      var coverage = arguments.length <= 3 || arguments[3] === undefined ? [] : arguments[3];\n      var commandResponse = arguments.length <= 4 || arguments[4] === undefined ? [] : arguments[4];\n      var oldQuery = arguments.length <= 5 || arguments[5] === undefined ? "" : arguments[5];\n\n      var defineHeader = document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].elems.defineHeader);\n      document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].elems.definePrompt).classList.add("hidden");\n\n      if (!refineDefine) {\n        if (canAnswer) {\n          defineHeader.innerHTML = "Already understand " + query + ", teach another meaning?";\n        } else {\n          defineHeader.innerHTML = "Didn\'t understand \\"" + this.intelHighlight(coverage) + "\\". Please rephrase:";\n        }\n      } else {\n        if (canAnswer) {\n          defineHeader.innerHTML = "SHRDLURN understands the definition, \\"" + query + "\\". If this is correct, click \\"define\\" to submit the definition.";\n        } else {\n          defineHeader.innerHTML = "Still don\'t understand \\"" + this.intelHighlight(coverage) + "\\". Please rephrase:";\n        }\n\n        // Special Status\n        if (commandResponse.length > 0) {\n          var defCore = commandResponse.indexOf("Core") !== -1;\n          var defNoCover = commandResponse.indexOf("NoCover") !== -1;\n          if (defCore) {\n            // updateStatus("cannot redefine the core language!");\n            defineHeader.innerHTML = "\\"" + oldQuery + "\\" is precisely understood, and cannot be redefined by \\"" + this.intelHighlight(coverage) + "\\".";\n          } else if (defNoCover) {\n            // updateStatus("SHRDLRUN cannot learn from this definition");\n            defineHeader.innerHTML = "Nothing (colors, numbers, etc) in \\"" + this.intelHighlight(coverage) + "\\" matches \\"" + oldQuery + "\\", so SHRDLURN cannot learn from this.";\n          }\n        }\n      }\n    }\n  }, {\n    key: "intelHighlight",\n    value: function intelHighlight(coverage) {\n      var coloredQuery = "";\n      for (var i = 0; i < coverage.length; i++) {\n        var type = coverage[i][0];\n        switch (type) {\n          case "$ActionSeq":\n            coloredQuery += "<span class=\'color-good\'>";\n            break;\n          case "$Action":\n            coloredQuery += "<span class=\'color-good\'>";\n            break;\n          case "$CondSeq":\n            coloredQuery += "<span class=\'color-good\'>";\n            break;\n          case "$Cond":\n            coloredQuery += "<span class=\'color-good\'>";\n            break;\n          case "$NumberSeq":\n            coloredQuery += "<span class=\'color-good\'>";\n            break;\n          case "$Number":\n            coloredQuery += "<span class=\'color-good\'>";\n            break;\n          case "$Color":\n            coloredQuery += "<span style=\'color:blue;\'>";\n            break;\n          case "$Keyword":\n            coloredQuery += "<span style=\'color:blue;\'>";\n            break;\n          case "$UNK":\n            coloredQuery += "<span style=\'color:red;\'>";\n            break;\n          default:\n            coloredQuery += "<span style=\'color:red;\'>";\n        }\n        for (var j = 1; j < coverage[i].length; j++) {\n          coloredQuery += coverage[i][j] + " ";\n        }\n        coloredQuery += "</span>";\n      }\n      return coloredQuery;\n    }\n  }, {\n    key: "revertHistory",\n    value: function revertHistory(index, game) {\n      var newGame = game;\n\n      var historyElems = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__["d" /* getHistoryElems */])();\n      var state = newGame.history.find(function (h) {\n        return h.stepN === parseInt(historyElems[index].getAttribute("data-stepN"), 10);\n      });\n      newGame.currentState = state.state;\n      newGame.update();\n\n      var newHistoryElems = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__["d" /* getHistoryElems */])();\n      newHistoryElems[index].classList.add("active");\n\n      return newGame;\n    }\n  }, {\n    key: "promptDefine",\n    value: function promptDefine() {\n      document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].elems.definePrompt).classList.remove("hidden");\n    }\n  }, {\n    key: "removePromptDefine",\n    value: function removePromptDefine() {\n      document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].elems.definePrompt).classList.add("hidden");\n    }\n  }, {\n    key: "setSkips",\n    value: function setSkips(skipsLeft) {\n      var skipsLeftElem = document.getElementById("skips_left");\n      if (skipsLeft !== 0) {\n        skipsLeftElem.innerHTML = skipsLeft;\n      } else {\n        document.getElementById("skip_button").classList.add("hidden");\n      }\n    }\n  }, {\n    key: "promptAccept",\n    value: function promptAccept() {\n      document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].elems.consoleGroup).classList.add("accepting");\n    }\n  }, {\n    key: "removeAccept",\n    value: function removeAccept() {\n      document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].elems.consoleGroup).classList.remove("accepting");\n    }\n  }, {\n    key: "promptTryDefine",\n    value: function promptTryDefine() {\n      document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].buttons.tryDefine).classList.add("active");\n    }\n  }, {\n    key: "toggleDefineButton",\n    value: function toggleDefineButton() {\n      document.getElementById(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */].buttons.define).classList.add("active");\n    }\n  }, {\n    key: "rotate",\n    value: function rotate(rotation) {\n      this.rotational = parseInt(rotation, 10);\n    }\n  }]);\n\n  return Setting;\n}();\n\n/* harmony default export */ exports["a"] = Setting;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAvanMvc2V0dGluZy5qcz8zMWRhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBOztBQUVBOzs7O0lBUXFCLE87QUFDbkIscUJBQWM7QUFBQTs7QUFDWixTQUFLLEdBQUwsR0FBVyxJQUFJLDhDQUFKLENBQVcsU0FBUyxjQUFULENBQXdCLHlEQUFRLFVBQWhDLENBQVgsQ0FBWDtBQUNBLFNBQUssU0FBTCxHQUFpQixJQUFJLDhDQUFKLENBQVcsU0FBUyxjQUFULENBQXdCLHlEQUFRLFlBQWhDLENBQVgsQ0FBakI7QUFDQSxTQUFLLFNBQUwsR0FBaUIsR0FBakI7QUFDQSxTQUFLLEtBQUwsR0FBYSxFQUFiO0FBQ0EsU0FBSyxXQUFMLEdBQW1CLENBQUMsSUFBcEI7QUFDQSxTQUFLLFVBQUwsR0FBa0IsR0FBbEI7QUFDQSxTQUFLLFdBQUwsR0FBbUIscUVBQU0sS0FBSyxLQUFMLEdBQWEsQ0FBbkIsRUFBc0IsS0FBSyxLQUFMLEdBQWEsQ0FBbkMsRUFBc0MsS0FBSyxLQUFMLEdBQWEsQ0FBbkQsQ0FBbkI7QUFDQSxTQUFLLFFBQUwsR0FBaUIsS0FBSyxFQUFMLEdBQVUsRUFBM0I7QUFDQSxTQUFLLFVBQUwsR0FBa0IsR0FBbEI7QUFDQSxTQUFLLFdBQUwsR0FBbUIsR0FBbkI7QUFDQSxTQUFLLGVBQUwsR0FBdUIsQ0FBQyxDQUF4Qjs7QUFFQSxTQUFLLFlBQUwsQ0FBa0IseURBQVEsYUFBMUI7QUFDQSxTQUFLLFlBQUwsQ0FBa0IseURBQVEsYUFBMUI7QUFDRDs7OztpQ0FFWSxLLEVBQU87QUFDbEIsV0FBSyxXQUFMLENBQWlCLEtBQUssU0FBdEIsRUFBaUMsS0FBSyxXQUF0QyxFQUFtRCxLQUFLLGVBQXhEO0FBQ0EsV0FBSyxZQUFMLENBQWtCLEtBQUssU0FBdkIsRUFBa0MsS0FBbEMsRUFBeUMsS0FBSyxXQUE5QyxFQUEyRCxLQUFLLGVBQWhFO0FBQ0Q7OztpQ0FFWSxLLEVBQU87QUFDbEIs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QVc7QUFDbEIsVUFBTSxnQkFBZ0IsU0FBUyxjQUFULENBQXdCLFlBQXhCLENBQXRCO0FBQ0EsVUFBSSxjQUFjLENBQWxCLEVBQXFCO0FBQ25CLHNCQUFjLFNBQWQsR0FBMEIsU0FBMUI7QUFDRCxPQUZELE1BRU87QUFDTCxpQkFBUyxjQUFULENBQXdCLGFBQXhCLEVBQXVDLFNBQXZDLENBQWlELEdBQWpELENBQXFELFFBQXJEO0FBQ0Q7QUFDRjs7O21DQUVjO0FBQ2IsZUFBUyxjQUFULENBQXdCLHlEQUFRLEtBQVIsQ0FBYyxZQUF0QyxFQUFvRCxTQUFwRCxDQUE4RCxHQUE5RCxDQUFrRSxXQUFsRTtBQUNEOzs7bUNBRWM7QUFDYixlQUFTLGNBQVQsQ0FBd0IseURBQVEsS0FBUixDQUFjLFlBQXRDLEVBQW9ELFNBQXBELENBQThELE1BQTlELENBQXFFLFdBQXJFO0FBQ0Q7OztzQ0FFaUI7QUFDaEIsZUFBUyxjQUFULENBQXdCLHlEQUFRLE9BQVIsQ0FBZ0IsU0FBeEMsRUFBbUQsU0FBbkQsQ0FBNkQsR0FBN0QsQ0FBaUUsUUFBakU7QUFDRDs7O3lDQUVvQjtBQUNuQixlQUFTLGNBQVQsQ0FBd0IseURBQVEsT0FBUixDQUFnQixNQUF4QyxFQUFnRCxTQUFoRCxDQUEwRCxHQUExRCxDQUE4RCxRQUE5RDtBQUNEOzs7MkJBRU0sUSxFQUFVO0FBQ2YsV0FBSyxVQUFMLEdBQWtCLFNBQVMsUUFBVCxFQUFtQixFQUFuQixDQUFsQjtBQUNEOzs7Ozs7NENBeFhrQixPIiwiZmlsZSI6IjEyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbmZpZ3MgZnJvbSBcIi4vY29uZmlnXCI7XG5pbXBvcnQgeyBnZXRIaXN0b3J5RWxlbXMsIGVtb2ppb25lIH0gZnJvbSBcIi4vdXRpbFwiO1xuXG5pbXBvcnQgSXNvbWVyLFxuICAgICAgIHsgUG9pbnQsXG4gICAgICAgICBTaGFwZSxcbiAgICAgICAgIENvbG9yLFxuICAgICAgIH0gZnJvbSBcImlzb21lclwiO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBuZXctY2FwICovXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNldHRpbmcge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmlzbyA9IG5ldyBJc29tZXIoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29uZmlncy5tYWluQ2FudmFzKSk7XG4gICAgdGhpcy5pc29UYXJnZXQgPSBuZXcgSXNvbWVyKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZ3MudGFyZ2V0Q2FudmFzKSk7XG4gICAgdGhpcy5iYXNpY1VuaXQgPSAwLjg7XG4gICAgdGhpcy53aWR0aCA9IDEwO1xuICAgIHRoaXMuYm9yZGVyV2lkdGggPSAtMC4xNTtcbiAgICB0aGlzLmJhc2VIZWlnaHQgPSAwLjE7XG4gICAgdGhpcy5jZW50ZXJQb2ludCA9IFBvaW50KHRoaXMud2lkdGggLyAyLCB0aGlzLndpZHRoIC8gMiwgdGhpcy53aWR0aCAvIDIpO1xuICAgIHRoaXMucm90YXRpb24gPSAoTWF0aC5QSSAvIDEyKTtcbiAgICB0aGlzLnJvdGF0aW9uYWwgPSBcIkFcIjtcbiAgICB0aGlzLnRhcmdldFNjYWxlID0gMC41O1xuICAgIHRoaXMudGFyZ2V0VHJhbnNsYXRlID0gLTI7XG5cbiAgICB0aGlzLnJlbmRlckNhbnZhcyhjb25maWdzLmRlZmF1bHRTdHJ1Y3QpO1xuICAgIHRoaXMucmVuZGVyVGFyZ2V0KGNvbmZpZ3MuZGVmYXVsdFN0cnVjdCk7XG4gIH1cblxuICByZW5kZXJUYXJnZXQoc3RhdGUpIHtcbiAgICB0aGlzLnJlbmRlckJvYXJkKHRoaXMuaXNvVGFyZ2V0LCB0aGlzLnRhcmdldFNjYWxlLCB0aGlzLnRhcmdldFRyYW5zbGF0ZSk7XG4gICAgdGhpcy5yZW5kZXJCbG9ja3ModGhpcy5pc29UYXJnZXQsIHN0YXRlLCB0aGlzLnRhcmdldFNjYWxlLCB0aGlzLnRhcmdldFRyYW5zbGF0ZSk7XG4gIH1cblxuICByZW5kZXJDYW52YXMoc3RhdGUpIHtcbiAgICB0aGlzLnJlbmRlckJvYXJkKHRoaXMuaXNvKTtcbiAgICB0aGlzLnJlbmRlckJsb2Nrcyh0aGlzLmlzbywgc3RhdGUpO1xuICB9XG5cbiAgcmVuZGVyQm9hcmQoaXNvLCBzY2FsaW5nRmFjdG9yID0gMSwgdHJhbnNsYXRlRmFjdG9yID0gMCkge1xuICAgIGlzby5jYW52YXMuY2xlYXIoKTtcbiAgICBjb25zdCB0cmFuc2xhdGVCeSA9IHRyYW5zbGF0ZUZhY3RvciAqIHRoaXMuYmFzaWNVbml0ICogc2NhbGluZ0ZhY3RvcjtcbiAgICBmb3IgKGxldCB4ID0gdGhpcy53aWR0aCAtIDE7IHggPj0gMDsgeC0tKSB7XG4gICAgICBmb3IgKGxldCB5ID0gdGhpcy53aWR0aCAtIDE7IHkgPj0gMDsgeS0tKSB7XG4gICAgICAgIGlzby5hZGQoXG4gICAgICAgICAgU2hhcGUuUHJpc20oXG4gICAgICAgICAgICBQb2ludCgoeCArICh0aGlzLmJvcmRlcldpZHRoICogeCkpICogc2NhbGluZ0ZhY3RvcixcbiAgICAgICAgICAgICAgICAgICh5ICsgKHRoaXMuYm9yZGVyV2lkdGggKiB5KSkgKiBzY2FsaW5nRmFjdG9yLFxuICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgdGhpcy5iYXNpY1VuaXQgKiBzY2FsaW5nRmFjdG9yLFxuICAgICAgICAgICAgdGhpcy5iYXNpY1VuaXQgKiBzY2FsaW5nRmFjdG9yLFxuICAgICAgICAgICAgdGhpcy5iYXNlSGVpZ2h0ICogc2NhbGluZ0ZhY3RvclxuICAgICAgICAgIClcbiAgICAgICAgICAucm90YXRlWih0aGlzLmNlbnRlclBvaW50LCB0aGlzLnJvdGF0aW9uKVxuICAgICAgICAgIC50cmFuc2xhdGUodHJhbnNsYXRlQnksIC10cmFuc2xhdGVCeSwgLTQuNSAqIHRyYW5zbGF0ZUJ5KSxcbiAgICAgICAgICBuZXcgQ29sb3IoMTQ0LCAxNDQsIDE0NClcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZW5kZXJCbG9ja3MoaXNvLCBzdGF0ZSwgc2NhbGluZ0ZhY3RvciA9IDEsIHRyYW5zbGF0ZUZhY3RvciA9IDApIHtcbiAgICBjb25zdCBibG9ja3MgPSB0aGlzLnNvcnRCbG9ja3Moc3RhdGUubWFwKChiKSA9PiB7XG4gICAgICBsZXQgeCA9IGIueDtcbiAgICAgIGxldCB5ID0gYi55O1xuXG4gICAgICBzd2l0Y2ggKHRoaXMucm90YXRpb25hbCkge1xuICAgICAgICBjYXNlIC0xOlxuICAgICAgICAgIHggPSBiLng7XG4gICAgICAgICAgeSA9IGIueTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAtMjpcbiAgICAgICAgICB4ID0gYi55O1xuICAgICAgICAgIHkgPSB0aGlzLndpZHRoIC0gMSAtIGIueDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIHggPSB0aGlzLndpZHRoIC0gMSAtIGIueTtcbiAgICAgICAgICB5ID0gYi54O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgeCA9IHRoaXMud2lkdGggLSAxIC0gYi54O1xuICAgICAgICAgIHkgPSB0aGlzLndpZHRoIC0gMSAtIGIueTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHsuLi5iLCB4OiB4LCB5OiB5fVxuICAgIH0pKTtcbiAgICBmb3IgKGNvbnN0IGJsb2NrIG9mIGJsb2Nrcykge1xuICAgICAgY29uc3QgY29sb3IgPSBjb25maWdzLmNvbG9yTWFwW2Jsb2NrLmNvbG9yXTtcbiAgICAgIGxldCBibG9ja0NvbG9yID0gbmV3IENvbG9yKCk7XG4gICAgICBpZiAoYmxvY2submFtZXMgJiYgYmxvY2submFtZXMuaW5jbHVkZXMoXCJfbmV3XCIpKSB7XG4gICAgICAgIGJsb2NrQ29sb3IgPSBuZXcgQ29sb3IoY29sb3JbMF0sIGNvbG9yWzFdLCBjb2xvclsyXSwgMC40KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJsb2NrQ29sb3IgPSBuZXcgQ29sb3IoY29sb3JbMF0sIGNvbG9yWzFdLCBjb2xvclsyXSk7XG4gICAgICB9XG4gICAgICBpc28uYWRkKHRoaXMubWFrZUJsb2NrKGJsb2NrLngsIGJsb2NrLnksIGJsb2NrLnosIHNjYWxpbmdGYWN0b3IsIHRyYW5zbGF0ZUZhY3RvciksIGJsb2NrQ29sb3IpO1xuICAgIH1cbiAgfVxuXG4gIG1ha2VCbG9jayh4LCB5LCB6LCBzY2FsaW5nRmFjdG9yID0gMSwgdHJhbnNsYXRlRmFjdG9yID0gMCkge1xuICAgIGNvbnN0IHRyYW5zbGF0ZUJ5ID0gdHJhbnNsYXRlRmFjdG9yICogdGhpcy5iYXNpY1VuaXQgKiBzY2FsaW5nRmFjdG9yO1xuXG4gICAgcmV0dXJuIFNoYXBlLlByaXNtKFxuICAgICAgUG9pbnQoKHggKyAoeCAqIHRoaXMuYm9yZGVyV2lkdGgpKSAqIHNjYWxpbmdGYWN0b3IsXG4gICAgICAgICAgICAoeSArICh5ICogdGhpcy5ib3JkZXJXaWR0aCkpICogc2NhbGluZ0ZhY3RvcixcbiAgICAgICAgICAgICh6ICsgdGhpcy5iYXNlSGVpZ2h0ICsgKHRoaXMuYm9yZGVyV2lkdGggKiB6KSkgKiBzY2FsaW5nRmFjdG9yXG4gICAgICAgICAgICksXG4gICAgICB0aGlzLmJhc2ljVW5pdCAqIHNjYWxpbmdGYWN0b3IsIHRoaXMuYmFzaWNVbml0ICogc2NhbGluZ0ZhY3RvciwgdGhpcy5iYXNpY1VuaXQgKiBzY2FsaW5nRmFjdG9yXG4gICAgKVxuICAgIC5yb3RhdGVaKHRoaXMuY2VudGVyUG9pbnQsIHRoaXMucm90YXRpb24pXG4gICAgLnRyYW5zbGF0ZSh0cmFuc2xhdGVCeSwgLXRyYW5zbGF0ZUJ5LCAtNC41ICogdHJhbnNsYXRlQnkpO1xuICB9XG5cbiAgc29ydEJsb2NrcyhibG9ja3MpIHtcbiAgICByZXR1cm4gYmxvY2tzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGlmIChhLnogPiBiLnopIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9IGVsc2UgaWYgKGEueiA8IGIueikge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG5cbiAgICAgIGlmIChhLnggPiBiLngpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfSBlbHNlIGlmIChhLnggPCBiLngpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9XG5cbiAgICAgIGlmIChhLnkgPiBiLnkpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfSBlbHNlIGlmIChhLnkgPCBiLnkpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAwO1xuICAgIH0pO1xuICB9XG5cbiAgc3RhdGVJbmNsdWRlcyhzdGF0ZSwgb2JqKSB7XG4gICAgZm9yIChjb25zdCBjIG9mIHN0YXRlKSB7XG4gICAgICBpZiAoYy54ID09PSBvYmoueCAmJlxuICAgICAgICAgIGMueSA9PT0gb2JqLnkgJiZcbiAgICAgICAgICBjLnogPT09IG9iai56ICYmXG4gICAgICAgICAgYy5jb2xvciA9PT0gb2JqLmNvbG9yKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb21wdXRlRGlmZihzdGF0ZSwgbmV3U3RhdGUpIHtcbiAgICBjb25zdCBkaWZmZXJlbmNlID0gbmV3U3RhdGUuZmlsdGVyKGMgPT4gIXRoaXMuc3RhdGVJbmNsdWRlcyhzdGF0ZSwgYykpO1xuICAgIGNvbnN0IGludGVyc2VjdGlvbiA9IHN0YXRlLmZpbHRlcihjID0+IHRoaXMuc3RhdGVJbmNsdWRlcyhuZXdTdGF0ZSwgYykpO1xuXG4gICAgcmV0dXJuIGRpZmZlcmVuY2UubWFwKChjKSA9PiAoT2JqZWN0LmFzc2lnbih7fSwgYywgeyBuYW1lczogWy4uLmMubmFtZXMsIFwiX25ld1wiXSB9KSkpXG4gICAgICAuY29uY2F0KGludGVyc2VjdGlvbik7XG4gIH1cblxuICBlcXVhbGl0eUNoZWNrKHN0cnVjdDEsIHN0cnVjdDIpIHtcbiAgICByZXR1cm4gc3RydWN0MSA9PT0gc3RydWN0MjtcbiAgfVxuXG4gIHN0YXR1cyhtc2csIHF1ZXJ5ID0gXCJcIiwgcHJvYiA9IDApIHtcbiAgICBjb25zdCBzdGF0dXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb25maWdzLnN0YXR1c0VsZW1JZCk7XG4gICAgY29uc3QgY3VycmVudGNtZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZ3MuY3VycmVudENtZEVsZW1JZCk7XG4gICAgc3RhdHVzLmlubmVySFRNTCA9IG1zZztcblxuICAgIGlmIChxdWVyeS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBzdGF0ZWluZm8gPSBgPGI+4oa1OiAke3F1ZXJ5fTwvYj5gO1xuICAgICAgLy8gVE9ETzogaWYgQW5zd2VyOiBzdGF0ZWluZm8gPSBcIjxiPuKGtToge3F1ZXJ5fSAoI3tOQmVzdEluZH0ve05CZXN0bGVufSk8L2I+XCJcbiAgICAgIGN1cnJlbnRjbWQuaW5uZXJIVE1MID0gc3RhdGVpbmZvO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50Y21kLmlubmVySFRNTCA9IFwiPGI+ZW50ZXIgYSBjb21tYW5kPC9iPlwiO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlUmVhY3Rpb24ocHJvYik7XG4gIH1cblxuICB1cGRhdGVSZWFjdGlvbihwcm9iKSB7XG4gICAgY29uc3QgcmVhY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb25maWdzLnJlYWN0aW9uRWxlbUlkKTtcbiAgICBpZiAocHJvYiA9PT0gMCkge1xuICAgICAgcmVhY3Rpb24uaW5uZXJIVE1MID0gZW1vamlvbmUoMyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBjYyA9IHByb2I7XG4gICAgICBpZiAoIWNjKSB7IGNjID0gMDsgfVxuICAgICAgY29uc3QgY3V0b2ZmcyA9IFswLjUsIDAuMSwgMC4wNSwgMC4wMSwgMC4wMDEsIDAuMDAwMDEsIC0xXTtcbiAgICAgIHJlYWN0aW9uLmlubmVySFRNTCA9IGVtb2ppb25lKGN1dG9mZnMuZmluZEluZGV4KCh2YWwpID0+IGNjID49IHZhbCkpO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlckhpc3RvcnkoaGlzdG9yeSkge1xuICAgIGNvbnN0IGhpc3RvcnlFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29uZmlncy5oaXN0b3J5RWxlbUlkKTtcbiAgICBoaXN0b3J5RWxlbS5pbm5lckhUTUwgPSBcIlwiO1xuXG4gICAgZm9yIChsZXQgaSA9IGhpc3RvcnkubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXR5cGVcIiwgaGlzdG9yeVtpXS50eXBlKTtcbiAgICAgIGVsZW0uc2V0QXR0cmlidXRlKFwiZGF0YS1zdGVwTlwiLCBoaXN0b3J5W2ldLnN0ZXBOKTtcbiAgICAgIGlmIChoaXN0b3J5W2ldLnR5cGUgPT09IFwiYWNjZXB0XCIpIHtcbiAgICAgICAgZWxlbS5pbm5lckhUTUwgPSBgJHtoaXN0b3J5W2ldLnN0ZXBOfS4gJHtoaXN0b3J5W2ldLnF1ZXJ5fWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtLmlubmVySFRNTCA9IGhpc3RvcnlbaV0ucXVlcnk7XG4gICAgICB9XG4gICAgICBoaXN0b3J5RWxlbS5hcHBlbmRDaGlsZChlbGVtKTtcbiAgICB9XG4gIH1cblxuICBzZXRTdGVwcyhwb3NzLCBtYXgpIHtcbiAgICBjb25zdCBwb3NzU3RlcHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtjb25maWdzLnBvc3NTdGVwc0VsZW1JZH1gKTtcbiAgICBmb3IgKGNvbnN0IHBvc3NTdGVwIG9mIHBvc3NTdGVwcykge1xuICAgICAgcG9zc1N0ZXAuaW5uZXJIVE1MID0gcG9zcztcbiAgICB9XG5cbiAgICBjb25zdCBtYXhTdGVwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke2NvbmZpZ3MubWF4U3RlcHNFbGVtSWR9YCk7XG4gICAgZm9yIChjb25zdCBtYXhTdGVwIG9mIG1heFN0ZXBzKSB7XG4gICAgICBtYXhTdGVwLmlubmVySFRNTCA9IG1heDtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVTdGVwcyhzdGVwcykge1xuICAgIGNvbnN0IGN1cnJTdGVwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke2NvbmZpZ3MuZWxlbXMuY3VyclN0ZXBzfWApO1xuICAgIGZvciAoY29uc3QgY3VyclN0ZXAgb2YgY3VyclN0ZXBzKSB7XG4gICAgICBjdXJyU3RlcC5pbm5lckhUTUwgPSBzdGVwcztcbiAgICB9XG4gIH1cblxuICBvcGVuRGVmaW5lSW50ZXJmYWNlKHF1ZXJ5LCBjYW5BbnN3ZXIsIGNvdmVyYWdlKSB7XG4gICAgaWYgKHF1ZXJ5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5zdGF0dXMoXCJub3RoaW5nIHRvIGRlZmluZVwiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBkZWZpbmVJbnRlcmZhY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb25maWdzLmVsZW1zLmRlZmluZUludGVyZmFjZSk7XG4gICAgZGVmaW5lSW50ZXJmYWNlLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG5cbiAgICBjb25zdCBkZWZpbmVTdGF0dXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb25maWdzLmVsZW1zLmRlZmluZVN0YXR1cyk7XG4gICAgZGVmaW5lU3RhdHVzLmlubmVySFRNTCA9IGBUZWFjaCBTSFJETFVSTiAke3F1ZXJ5fS5gO1xuXG4gICAgY29uc3QgdG9nZ2xlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29uZmlncy5idXR0b25zLnRvZ2dsZURlZmluZSk7XG4gICAgdG9nZ2xlQnV0dG9uLmlubmVySFRNTCA9IFwiUmV0dXJuXCI7XG5cbiAgICB0aGlzLnJlbW92ZVByb21wdERlZmluZSgpO1xuXG4gICAgdGhpcy50cnlEZWZpbmUocXVlcnksIGZhbHNlLCBjYW5BbnN3ZXIsIGNvdmVyYWdlKTtcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZ3MuZWxlbXMuZGVmaW5lQ29uc29sZSkuZm9jdXMoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGNsb3NlRGVmaW5lSW50ZXJmYWNlKCkge1xuICAgIGNvbnN0IGRlZmluZUludGVyZmFjZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZ3MuZWxlbXMuZGVmaW5lSW50ZXJmYWNlKTtcbiAgICBkZWZpbmVJbnRlcmZhY2UuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcblxuICAgIGNvbnN0IHRvZ2dsZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZ3MuYnV0dG9ucy50b2dnbGVEZWZpbmUpO1xuICAgIHRvZ2dsZUJ1dHRvbi5pbm5lckhUTUwgPSBcIkRlZmluZVwiO1xuXG4gICAgdGhpcy5yZW1vdmVQcm9tcHREZWZpbmUoKTtcblxuICAgIGNvbnN0IGNvbnNvbGVFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29uZmlncy5lbGVtcy5jb25zb2xlKTtcbiAgICBjb25zb2xlRWxlbS5mb2N1cygpO1xuICB9XG5cbiAgdHJ5RGVmaW5lKHF1ZXJ5LCByZWZpbmVEZWZpbmUsIGNhbkFuc3dlciwgY292ZXJhZ2UgPSBbXSwgY29tbWFuZFJlc3BvbnNlID0gW10sIG9sZFF1ZXJ5ID0gXCJcIikge1xuICAgIGNvbnN0IGRlZmluZUhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZ3MuZWxlbXMuZGVmaW5lSGVhZGVyKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb25maWdzLmVsZW1zLmRlZmluZVByb21wdCkuY2xhc3NMaXN0LmFkZChcImhpZGRlblwiKTtcblxuICAgIGlmICghcmVmaW5lRGVmaW5lKSB7XG4gICAgICBpZiAoY2FuQW5zd2VyKSB7XG4gICAgICAgIGRlZmluZUhlYWRlci5pbm5lckhUTUwgPSBgQWxyZWFkeSB1bmRlcnN0YW5kICR7cXVlcnl9LCB0ZWFjaCBhbm90aGVyIG1lYW5pbmc/YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlZmluZUhlYWRlci5pbm5lckhUTUwgPSBgRGlkbid0IHVuZGVyc3RhbmQgXCIke3RoaXMuaW50ZWxIaWdobGlnaHQoY292ZXJhZ2UpfVwiLiBQbGVhc2UgcmVwaHJhc2U6YDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGNhbkFuc3dlcikge1xuICAgICAgICBkZWZpbmVIZWFkZXIuaW5uZXJIVE1MID0gYFNIUkRMVVJOIHVuZGVyc3RhbmRzIHRoZSBkZWZpbml0aW9uLCBcIiR7cXVlcnl9XCIuIElmIHRoaXMgaXMgY29ycmVjdCwgY2xpY2sgXCJkZWZpbmVcIiB0byBzdWJtaXQgdGhlIGRlZmluaXRpb24uYDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlZmluZUhlYWRlci5pbm5lckhUTUwgPSBgU3RpbGwgZG9uJ3QgdW5kZXJzdGFuZCBcIiR7dGhpcy5pbnRlbEhpZ2hsaWdodChjb3ZlcmFnZSl9XCIuIFBsZWFzZSByZXBocmFzZTpgO1xuICAgICAgfVxuXG4gICAgICAvLyBTcGVjaWFsIFN0YXR1c1xuICAgICAgaWYgKGNvbW1hbmRSZXNwb25zZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGRlZkNvcmUgPSBjb21tYW5kUmVzcG9uc2UuaW5kZXhPZihcIkNvcmVcIikgIT09IC0xO1xuICAgICAgICBjb25zdCBkZWZOb0NvdmVyID0gY29tbWFuZFJlc3BvbnNlLmluZGV4T2YoXCJOb0NvdmVyXCIpICE9PSAtMTtcbiAgICAgICAgaWYgKGRlZkNvcmUpIHtcbiAgICAgICAgICAvLyB1cGRhdGVTdGF0dXMoXCJjYW5ub3QgcmVkZWZpbmUgdGhlIGNvcmUgbGFuZ3VhZ2UhXCIpO1xuICAgICAgICAgIGRlZmluZUhlYWRlci5pbm5lckhUTUwgPSBgXCIke29sZFF1ZXJ5fVwiIGlzIHByZWNpc2VseSB1bmRlcnN0b29kLCBhbmQgY2Fubm90IGJlIHJlZGVmaW5lZCBieSBcIiR7dGhpcy5pbnRlbEhpZ2hsaWdodChjb3ZlcmFnZSl9XCIuYDtcbiAgICAgICAgfSBlbHNlIGlmIChkZWZOb0NvdmVyKSB7XG4gICAgICAgICAgLy8gdXBkYXRlU3RhdHVzKFwiU0hSRExSVU4gY2Fubm90IGxlYXJuIGZyb20gdGhpcyBkZWZpbml0aW9uXCIpO1xuICAgICAgICAgIGRlZmluZUhlYWRlci5pbm5lckhUTUwgPSBgTm90aGluZyAoY29sb3JzLCBudW1iZXJzLCBldGMpIGluIFwiJHt0aGlzLmludGVsSGlnaGxpZ2h0KGNvdmVyYWdlKX1cIiBtYXRjaGVzIFwiJHtvbGRRdWVyeX1cIiwgc28gU0hSRExVUk4gY2Fubm90IGxlYXJuIGZyb20gdGhpcy5gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaW50ZWxIaWdobGlnaHQoY292ZXJhZ2UpIHtcbiAgICBsZXQgY29sb3JlZFF1ZXJ5ID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdmVyYWdlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCB0eXBlID0gY292ZXJhZ2VbaV1bMF07XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBcIiRBY3Rpb25TZXFcIjpcbiAgICAgICAgICBjb2xvcmVkUXVlcnkgKz0gXCI8c3BhbiBjbGFzcz0nY29sb3ItZ29vZCc+XCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCIkQWN0aW9uXCI6XG4gICAgICAgICAgY29sb3JlZFF1ZXJ5ICs9IFwiPHNwYW4gY2xhc3M9J2NvbG9yLWdvb2QnPlwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiJENvbmRTZXFcIjpcbiAgICAgICAgICBjb2xvcmVkUXVlcnkgKz0gXCI8c3BhbiBjbGFzcz0nY29sb3ItZ29vZCc+XCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCIkQ29uZFwiOlxuICAgICAgICAgIGNvbG9yZWRRdWVyeSArPSBcIjxzcGFuIGNsYXNzPSdjb2xvci1nb29kJz5cIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIiROdW1iZXJTZXFcIjpcbiAgICAgICAgICBjb2xvcmVkUXVlcnkgKz0gXCI8c3BhbiBjbGFzcz0nY29sb3ItZ29vZCc+XCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCIkTnVtYmVyXCI6XG4gICAgICAgICAgY29sb3JlZFF1ZXJ5ICs9IFwiPHNwYW4gY2xhc3M9J2NvbG9yLWdvb2QnPlwiO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiJENvbG9yXCI6XG4gICAgICAgICAgY29sb3JlZFF1ZXJ5ICs9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOmJsdWU7Jz5cIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIiRLZXl3b3JkXCI6XG4gICAgICAgICAgY29sb3JlZFF1ZXJ5ICs9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOmJsdWU7Jz5cIjtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIiRVTktcIjpcbiAgICAgICAgICBjb2xvcmVkUXVlcnkgKz0gXCI8c3BhbiBzdHlsZT0nY29sb3I6cmVkOyc+XCI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29sb3JlZFF1ZXJ5ICs9IFwiPHNwYW4gc3R5bGU9J2NvbG9yOnJlZDsnPlwiO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBjb3ZlcmFnZVtpXS5sZW5ndGg7IGorKykge1xuICAgICAgICBjb2xvcmVkUXVlcnkgKz0gYCR7Y292ZXJhZ2VbaV1bal19IGA7XG4gICAgICB9XG4gICAgICBjb2xvcmVkUXVlcnkgKz0gXCI8L3NwYW4+XCI7XG4gICAgfVxuICAgIHJldHVybiBjb2xvcmVkUXVlcnk7XG4gIH1cblxuICByZXZlcnRIaXN0b3J5KGluZGV4LCBnYW1lKSB7XG4gICAgY29uc3QgbmV3R2FtZSA9IGdhbWU7XG5cbiAgICBjb25zdCBoaXN0b3J5RWxlbXMgPSBnZXRIaXN0b3J5RWxlbXMoKTtcbiAgICBjb25zdCBzdGF0ZSA9IG5ld0dhbWUuaGlzdG9yeS5maW5kKChoKSA9PiBoLnN0ZXBOID09PSBwYXJzZUludChoaXN0b3J5RWxlbXNbaW5kZXhdLmdldEF0dHJpYnV0ZShcImRhdGEtc3RlcE5cIiksIDEwKSk7XG4gICAgbmV3R2FtZS5jdXJyZW50U3RhdGUgPSBzdGF0ZS5zdGF0ZTtcbiAgICBuZXdHYW1lLnVwZGF0ZSgpO1xuXG4gICAgY29uc3QgbmV3SGlzdG9yeUVsZW1zID0gZ2V0SGlzdG9yeUVsZW1zKCk7XG4gICAgbmV3SGlzdG9yeUVsZW1zW2luZGV4XS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuXG4gICAgcmV0dXJuIG5ld0dhbWU7XG4gIH1cblxuICBwcm9tcHREZWZpbmUoKSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29uZmlncy5lbGVtcy5kZWZpbmVQcm9tcHQpLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XG4gIH1cblxuICByZW1vdmVQcm9tcHREZWZpbmUoKSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29uZmlncy5lbGVtcy5kZWZpbmVQcm9tcHQpLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gIH1cblxuICBzZXRTa2lwcyhza2lwc0xlZnQpIHtcbiAgICBjb25zdCBza2lwc0xlZnRFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJza2lwc19sZWZ0XCIpO1xuICAgIGlmIChza2lwc0xlZnQgIT09IDApIHtcbiAgICAgIHNraXBzTGVmdEVsZW0uaW5uZXJIVE1MID0gc2tpcHNMZWZ0O1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNraXBfYnV0dG9uXCIpLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgfVxuICB9XG5cbiAgcHJvbXB0QWNjZXB0KCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZ3MuZWxlbXMuY29uc29sZUdyb3VwKS5jbGFzc0xpc3QuYWRkKFwiYWNjZXB0aW5nXCIpO1xuICB9XG5cbiAgcmVtb3ZlQWNjZXB0KCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZ3MuZWxlbXMuY29uc29sZUdyb3VwKS5jbGFzc0xpc3QucmVtb3ZlKFwiYWNjZXB0aW5nXCIpO1xuICB9XG5cbiAgcHJvbXB0VHJ5RGVmaW5lKCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZ3MuYnV0dG9ucy50cnlEZWZpbmUpLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gIH1cblxuICB0b2dnbGVEZWZpbmVCdXR0b24oKSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29uZmlncy5idXR0b25zLmRlZmluZSkuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgfVxuXG4gIHJvdGF0ZShyb3RhdGlvbikge1xuICAgIHRoaXMucm90YXRpb25hbCA9IHBhcnNlSW50KHJvdGF0aW9uLCAxMCk7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2FwcC9qcy9zZXR0aW5nLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==');
},function(module,exports){eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L2V2ZW50cy9ldmVudHMuanM/N2M3MSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEdBQUc7QUFDSCxvQkFBb0IsU0FBUztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSIsImZpbGUiOiIxMy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fTtcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gdGhpcy5fbWF4TGlzdGVuZXJzIHx8IHVuZGVmaW5lZDtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xuXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG4vLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxuRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblxuLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXG4vLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24obikge1xuICBpZiAoIWlzTnVtYmVyKG4pIHx8IG4gPCAwIHx8IGlzTmFOKG4pKVxuICAgIHRocm93IFR5cGVFcnJvcignbiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gIHRoaXMuX21heExpc3RlbmVycyA9IG47XG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIgZXIsIGhhbmRsZXIsIGxlbiwgYXJncywgaSwgbGlzdGVuZXJzO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXG4gIC8vIElmIHRoZXJlIGlzIG5vICdlcnJvcicgZXZlbnQgbGlzdGVuZXIgdGhlbiB0aHJvdy5cbiAgaWYgKHR5cGUgPT09ICdlcnJvcicpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50cy5lcnJvciB8fFxuICAgICAgICAoaXNPYmplY3QodGhpcy5fZXZlbnRzLmVycm9yKSAmJiAhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpIHtcbiAgICAgIGVyID0gYXJndW1lbnRzWzFdO1xuICAgICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG4gICAgICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCBcImVycm9yXCIgZXZlbnQuICgnICsgZXIgKyAnKScpO1xuICAgICAgICBlcnIuY29udGV4dCA9IGVyO1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICBpZiAoaXNVbmRlZmluZWQoaGFuZGxlcikpXG4gICAgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAvLyBmYXN0IGNhc2VzXG4gICAgICBjYXNlIDE6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBzbG93ZXJcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICBoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdChoYW5kbGVyKSkge1xuICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIGxpc3RlbmVycyA9IGhhbmRsZXIuc2xpY2UoKTtcbiAgICBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKylcbiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBtO1xuXG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcblxuICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSBcIm5ld0xpc3RlbmVyXCIhIEJlZm9yZVxuICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gIGlmICh0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpXG4gICAgdGhpcy5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsXG4gICAgICAgICAgICAgIGlzRnVuY3Rpb24obGlzdGVuZXIubGlzdGVuZXIpID9cbiAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7XG4gIGVsc2UgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkpXG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5wdXNoKGxpc3RlbmVyKTtcbiAgZWxzZVxuICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IFt0aGlzLl9ldmVudHNbdHlwZV0sIGxpc3RlbmVyXTtcblxuICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVha1xuICBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSAmJiAhdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCkge1xuICAgIGlmICghaXNVbmRlZmluZWQodGhpcy5fbWF4TGlzdGVuZXJzKSkge1xuICAgICAgbSA9IHRoaXMuX21heExpc3RlbmVycztcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO1xuICAgIH1cblxuICAgIGlmIChtICYmIG0gPiAwICYmIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGggPiBtKSB7XG4gICAgICB0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkID0gdHJ1ZTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJyhub2RlKSB3YXJuaW5nOiBwb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5ICcgK1xuICAgICAgICAgICAgICAgICAgICAnbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgJ1VzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0LicsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGgpO1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLnRyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgaW4gSUUgMTBcbiAgICAgICAgY29uc29sZS50cmFjZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICB2YXIgZmlyZWQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBnKCkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgZyk7XG5cbiAgICBpZiAoIWZpcmVkKSB7XG4gICAgICBmaXJlZCA9IHRydWU7XG4gICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuXG4gIGcubGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgdGhpcy5vbih0eXBlLCBnKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIGVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZmYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIGxpc3QsIHBvc2l0aW9uLCBsZW5ndGgsIGk7XG5cbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgbGlzdCA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgbGVuZ3RoID0gbGlzdC5sZW5ndGg7XG4gIHBvc2l0aW9uID0gLTE7XG5cbiAgaWYgKGxpc3QgPT09IGxpc3RlbmVyIHx8XG4gICAgICAoaXNGdW5jdGlvbihsaXN0Lmxpc3RlbmVyKSAmJiBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuXG4gIH0gZWxzZSBpZiAoaXNPYmplY3QobGlzdCkpIHtcbiAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSA+IDA7KSB7XG4gICAgICBpZiAobGlzdFtpXSA9PT0gbGlzdGVuZXIgfHxcbiAgICAgICAgICAobGlzdFtpXS5saXN0ZW5lciAmJiBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICAgICAgcG9zaXRpb24gPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgIGxpc3QubGVuZ3RoID0gMDtcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpc3Quc3BsaWNlKHBvc2l0aW9uLCAxKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBrZXksIGxpc3RlbmVycztcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICByZXR1cm4gdGhpcztcblxuICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gIGlmICghdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG4gICAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICBlbHNlIGlmICh0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgZm9yIChrZXkgaW4gdGhpcy5fZXZlbnRzKSB7XG4gICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTtcbiAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgfVxuICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpO1xuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVycykpIHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gIH0gZWxzZSBpZiAobGlzdGVuZXJzKSB7XG4gICAgLy8gTElGTyBvcmRlclxuICAgIHdoaWxlIChsaXN0ZW5lcnMubGVuZ3RoKVxuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbbGlzdGVuZXJzLmxlbmd0aCAtIDFdKTtcbiAgfVxuICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciByZXQ7XG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0ID0gW107XG4gIGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpcy5fZXZlbnRzW3R5cGVdKSlcbiAgICByZXQgPSBbdGhpcy5fZXZlbnRzW3R5cGVdXTtcbiAgZWxzZVxuICAgIHJldCA9IHRoaXMuX2V2ZW50c1t0eXBlXS5zbGljZSgpO1xuICByZXR1cm4gcmV0O1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24odHlwZSkge1xuICBpZiAodGhpcy5fZXZlbnRzKSB7XG4gICAgdmFyIGV2bGlzdGVuZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgICBpZiAoaXNGdW5jdGlvbihldmxpc3RlbmVyKSlcbiAgICAgIHJldHVybiAxO1xuICAgIGVsc2UgaWYgKGV2bGlzdGVuZXIpXG4gICAgICByZXR1cm4gZXZsaXN0ZW5lci5sZW5ndGg7XG4gIH1cbiAgcmV0dXJuIDA7XG59O1xuXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJDb3VudCh0eXBlKTtcbn07XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IHZvaWQgMDtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9ldmVudHMvZXZlbnRzLmpzXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9")},function(module,exports,__webpack_require__){eval("/**\n * Entry point for the Isomer API\n */\nmodule.exports = __webpack_require__(17);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L2lzb21lci9pbmRleC5qcz9iYjNhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6IjE0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBFbnRyeSBwb2ludCBmb3IgdGhlIElzb21lciBBUElcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2pzL2lzb21lcicpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2lzb21lci9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports){eval("function Canvas(elem) {\n  this.elem = elem;\n  this.ctx = this.elem.getContext('2d');\n\n  this.width = elem.width;\n  this.height = elem.height;\n}\n\nCanvas.prototype.clear = function() {\n  this.ctx.clearRect(0, 0, this.width, this.height);\n};\n\nCanvas.prototype.path = function(points, color) {\n  this.ctx.beginPath();\n  this.ctx.moveTo(points[0].x, points[0].y);\n\n  for (var i = 1; i < points.length; i++) {\n    this.ctx.lineTo(points[i].x, points[i].y);\n  }\n\n  this.ctx.closePath();\n\n  /* Set the strokeStyle and fillStyle */\n  this.ctx.save();\n\n  this.ctx.globalAlpha = color.a;\n  this.ctx.fillStyle = this.ctx.strokeStyle = color.toHex();\n  this.ctx.stroke();\n  this.ctx.fill();\n  this.ctx.restore();\n};\n\nmodule.exports = Canvas;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L2lzb21lci9qcy9jYW52YXMuanM/ODkwNiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsaUJBQWlCLG1CQUFtQjtBQUNwQztBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjE1LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gQ2FudmFzKGVsZW0pIHtcbiAgdGhpcy5lbGVtID0gZWxlbTtcbiAgdGhpcy5jdHggPSB0aGlzLmVsZW0uZ2V0Q29udGV4dCgnMmQnKTtcblxuICB0aGlzLndpZHRoID0gZWxlbS53aWR0aDtcbiAgdGhpcy5oZWlnaHQgPSBlbGVtLmhlaWdodDtcbn1cblxuQ2FudmFzLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xufTtcblxuQ2FudmFzLnByb3RvdHlwZS5wYXRoID0gZnVuY3Rpb24ocG9pbnRzLCBjb2xvcikge1xuICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgdGhpcy5jdHgubW92ZVRvKHBvaW50c1swXS54LCBwb2ludHNbMF0ueSk7XG5cbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICB0aGlzLmN0eC5saW5lVG8ocG9pbnRzW2ldLngsIHBvaW50c1tpXS55KTtcbiAgfVxuXG4gIHRoaXMuY3R4LmNsb3NlUGF0aCgpO1xuXG4gIC8qIFNldCB0aGUgc3Ryb2tlU3R5bGUgYW5kIGZpbGxTdHlsZSAqL1xuICB0aGlzLmN0eC5zYXZlKCk7XG5cbiAgdGhpcy5jdHguZ2xvYmFsQWxwaGEgPSBjb2xvci5hO1xuICB0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IGNvbG9yLnRvSGV4KCk7XG4gIHRoaXMuY3R4LnN0cm9rZSgpO1xuICB0aGlzLmN0eC5maWxsKCk7XG4gIHRoaXMuY3R4LnJlc3RvcmUoKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQ2FudmFzO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2lzb21lci9qcy9jYW52YXMuanNcbi8vIG1vZHVsZSBpZCA9IDE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports){eval("/**\n * A color instantiated with RGB between 0-255\n *\n * Also holds HSL values\n */\nfunction Color(r, g, b, a) {\n  this.r = parseInt(r || 0);\n  this.g = parseInt(g || 0);\n  this.b = parseInt(b || 0);\n  this.a = parseFloat((Math.round(a * 100) / 100 || 1));\n\n  this.loadHSL();\n};\n\nColor.prototype.toHex = function() {\n  // Pad with 0s\n  var hex = (this.r * 256 * 256 + this.g * 256 + this.b).toString(16);\n\n  if (hex.length < 6) {\n    hex = new Array(6 - hex.length + 1).join('0') + hex;\n  }\n\n  return '#' + hex;\n};\n\n\n/**\n * Returns a lightened color based on a given percentage and an optional\n * light color\n */\nColor.prototype.lighten = function(percentage, lightColor) {\n  lightColor = lightColor || new Color(255, 255, 255);\n\n  var newColor = new Color(\n    (lightColor.r / 255) * this.r,\n    (lightColor.g / 255) * this.g,\n    (lightColor.b / 255) * this.b,\n    this.a\n  );\n\n  newColor.l = Math.min(newColor.l + percentage, 1);\n\n  newColor.loadRGB();\n  return newColor;\n};\n\n\n/**\n * Loads HSL values using the current RGB values\n * Converted from:\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\n */\nColor.prototype.loadHSL = function() {\n  var r = this.r / 255;\n  var g = this.g / 255;\n  var b = this.b / 255;\n\n  var max = Math.max(r, g, b);\n  var min = Math.min(r, g, b);\n\n  var h, s, l = (max + min) / 2;\n\n  if (max === min) {\n    h = s = 0;  // achromatic\n  } else {\n    var d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    switch (max) {\n      case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n      case g: h = (b - r) / d + 2; break;\n      case b: h = (r - g) / d + 4; break;\n    }\n\n    h /= 6;\n  }\n\n  this.h = h;\n  this.s = s;\n  this.l = l;\n};\n\n\n/**\n * Reloads RGB using HSL values\n * Converted from:\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\n */\nColor.prototype.loadRGB = function() {\n  var r, g, b;\n  var h = this.h;\n  var s = this.s;\n  var l = this.l;\n\n  if (s === 0) {\n    r = g = b = l;  // achromatic\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n    r = this._hue2rgb(p, q, h + 1 / 3);\n    g = this._hue2rgb(p, q, h);\n    b = this._hue2rgb(p, q, h - 1 / 3);\n  }\n\n  this.r = parseInt(r * 255);\n  this.g = parseInt(g * 255);\n  this.b = parseInt(b * 255);\n};\n\n\n/**\n * Helper function to convert hue to rgb\n * Taken from:\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\n */\nColor.prototype._hue2rgb = function(p, q, t) {\n  if (t < 0) t += 1;\n  if (t > 1) t -= 1;\n  if (t < 1 / 6) return p + (q - p) * 6 * t;\n  if (t < 1 / 2) return q;\n  if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n  return p;\n};\n\nmodule.exports = Color;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L2lzb21lci9qcy9jb2xvci5qcz8yODMzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxjQUFjO0FBQ2QsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRCxrQ0FBa0M7QUFDbEMsa0NBQWtDO0FBQ2xDOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWtCO0FBQ2xCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBIiwiZmlsZSI6IjE2LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBIGNvbG9yIGluc3RhbnRpYXRlZCB3aXRoIFJHQiBiZXR3ZWVuIDAtMjU1XG4gKlxuICogQWxzbyBob2xkcyBIU0wgdmFsdWVzXG4gKi9cbmZ1bmN0aW9uIENvbG9yKHIsIGcsIGIsIGEpIHtcbiAgdGhpcy5yID0gcGFyc2VJbnQociB8fCAwKTtcbiAgdGhpcy5nID0gcGFyc2VJbnQoZyB8fCAwKTtcbiAgdGhpcy5iID0gcGFyc2VJbnQoYiB8fCAwKTtcbiAgdGhpcy5hID0gcGFyc2VGbG9hdCgoTWF0aC5yb3VuZChhICogMTAwKSAvIDEwMCB8fCAxKSk7XG5cbiAgdGhpcy5sb2FkSFNMKCk7XG59O1xuXG5Db2xvci5wcm90b3R5cGUudG9IZXggPSBmdW5jdGlvbigpIHtcbiAgLy8gUGFkIHdpdGggMHNcbiAgdmFyIGhleCA9ICh0aGlzLnIgKiAyNTYgKiAyNTYgKyB0aGlzLmcgKiAyNTYgKyB0aGlzLmIpLnRvU3RyaW5nKDE2KTtcblxuICBpZiAoaGV4Lmxlbmd0aCA8IDYpIHtcbiAgICBoZXggPSBuZXcgQXJyYXkoNiAtIGhleC5sZW5ndGggKyAxKS5qb2luKCcwJykgKyBoZXg7XG4gIH1cblxuICByZXR1cm4gJyMnICsgaGV4O1xufTtcblxuXG4vKipcbiAqIFJldHVybnMgYSBsaWdodGVuZWQgY29sb3IgYmFzZWQgb24gYSBnaXZlbiBwZXJjZW50YWdlIGFuZCBhbiBvcHRpb25hbFxuICogbGlnaHQgY29sb3JcbiAqL1xuQ29sb3IucHJvdG90eXBlLmxpZ2h0ZW4gPSBmdW5jdGlvbihwZXJjZW50YWdlLCBsaWdodENvbG9yKSB7XG4gIGxpZ2h0Q29sb3IgPSBsaWdodENvbG9yIHx8IG5ldyBDb2xvcigyNTUsIDI1NSwgMjU1KTtcblxuICB2YXIgbmV3Q29sb3IgPSBuZXcgQ29sb3IoXG4gICAgKGxpZ2h0Q29sb3IuciAvIDI1NSkgKiB0aGlzLnIsXG4gICAgKGxpZ2h0Q29sb3IuZyAvIDI1NSkgKiB0aGlzLmcsXG4gICAgKGxpZ2h0Q29sb3IuYiAvIDI1NSkgKiB0aGlzLmIsXG4gICAgdGhpcy5hXG4gICk7XG5cbiAgbmV3Q29sb3IubCA9IE1hdGgubWluKG5ld0NvbG9yLmwgKyBwZXJjZW50YWdlLCAxKTtcblxuICBuZXdDb2xvci5sb2FkUkdCKCk7XG4gIHJldHVybiBuZXdDb2xvcjtcbn07XG5cblxuLyoqXG4gKiBMb2FkcyBIU0wgdmFsdWVzIHVzaW5nIHRoZSBjdXJyZW50IFJHQiB2YWx1ZXNcbiAqIENvbnZlcnRlZCBmcm9tOlxuICogaHR0cDovL2F4b25mbHV4LmNvbS9oYW5keS1yZ2ItdG8taHNsLWFuZC1yZ2ItdG8taHN2LWNvbG9yLW1vZGVsLWNcbiAqL1xuQ29sb3IucHJvdG90eXBlLmxvYWRIU0wgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHIgPSB0aGlzLnIgLyAyNTU7XG4gIHZhciBnID0gdGhpcy5nIC8gMjU1O1xuICB2YXIgYiA9IHRoaXMuYiAvIDI1NTtcblxuICB2YXIgbWF4ID0gTWF0aC5tYXgociwgZywgYik7XG4gIHZhciBtaW4gPSBNYXRoLm1pbihyLCBnLCBiKTtcblxuICB2YXIgaCwgcywgbCA9IChtYXggKyBtaW4pIC8gMjtcblxuICBpZiAobWF4ID09PSBtaW4pIHtcbiAgICBoID0gcyA9IDA7ICAvLyBhY2hyb21hdGljXG4gIH0gZWxzZSB7XG4gICAgdmFyIGQgPSBtYXggLSBtaW47XG4gICAgcyA9IGwgPiAwLjUgPyBkIC8gKDIgLSBtYXggLSBtaW4pIDogZCAvIChtYXggKyBtaW4pO1xuICAgIHN3aXRjaCAobWF4KSB7XG4gICAgICBjYXNlIHI6IGggPSAoZyAtIGIpIC8gZCArIChnIDwgYiA/IDYgOiAwKTsgYnJlYWs7XG4gICAgICBjYXNlIGc6IGggPSAoYiAtIHIpIC8gZCArIDI7IGJyZWFrO1xuICAgICAgY2FzZSBiOiBoID0gKHIgLSBnKSAvIGQgKyA0OyBicmVhaztcbiAgICB9XG5cbiAgICBoIC89IDY7XG4gIH1cblxuICB0aGlzLmggPSBoO1xuICB0aGlzLnMgPSBzO1xuICB0aGlzLmwgPSBsO1xufTtcblxuXG4vKipcbiAqIFJlbG9hZHMgUkdCIHVzaW5nIEhTTCB2YWx1ZXNcbiAqIENvbnZlcnRlZCBmcm9tOlxuICogaHR0cDovL2F4b25mbHV4LmNvbS9oYW5keS1yZ2ItdG8taHNsLWFuZC1yZ2ItdG8taHN2LWNvbG9yLW1vZGVsLWNcbiAqL1xuQ29sb3IucHJvdG90eXBlLmxvYWRSR0IgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHIsIGcsIGI7XG4gIHZhciBoID0gdGhpcy5oO1xuICB2YXIgcyA9IHRoaXMucztcbiAgdmFyIGwgPSB0aGlzLmw7XG5cbiAgaWYgKHMgPT09IDApIHtcbiAgICByID0gZyA9IGIgPSBsOyAgLy8gYWNocm9tYXRpY1xuICB9IGVsc2Uge1xuICAgIHZhciBxID0gbCA8IDAuNSA/IGwgKiAoMSArIHMpIDogbCArIHMgLSBsICogcztcbiAgICB2YXIgcCA9IDIgKiBsIC0gcTtcbiAgICByID0gdGhpcy5faHVlMnJnYihwLCBxLCBoICsgMSAvIDMpO1xuICAgIGcgPSB0aGlzLl9odWUycmdiKHAsIHEsIGgpO1xuICAgIGIgPSB0aGlzLl9odWUycmdiKHAsIHEsIGggLSAxIC8gMyk7XG4gIH1cblxuICB0aGlzLnIgPSBwYXJzZUludChyICogMjU1KTtcbiAgdGhpcy5nID0gcGFyc2VJbnQoZyAqIDI1NSk7XG4gIHRoaXMuYiA9IHBhcnNlSW50KGIgKiAyNTUpO1xufTtcblxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBjb252ZXJ0IGh1ZSB0byByZ2JcbiAqIFRha2VuIGZyb206XG4gKiBodHRwOi8vYXhvbmZsdXguY29tL2hhbmR5LXJnYi10by1oc2wtYW5kLXJnYi10by1oc3YtY29sb3ItbW9kZWwtY1xuICovXG5Db2xvci5wcm90b3R5cGUuX2h1ZTJyZ2IgPSBmdW5jdGlvbihwLCBxLCB0KSB7XG4gIGlmICh0IDwgMCkgdCArPSAxO1xuICBpZiAodCA+IDEpIHQgLT0gMTtcbiAgaWYgKHQgPCAxIC8gNikgcmV0dXJuIHAgKyAocSAtIHApICogNiAqIHQ7XG4gIGlmICh0IDwgMSAvIDIpIHJldHVybiBxO1xuICBpZiAodCA8IDIgLyAzKSByZXR1cm4gcCArIChxIC0gcCkgKiAoMiAvIDMgLSB0KSAqIDY7XG4gIHJldHVybiBwO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDb2xvcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9pc29tZXIvanMvY29sb3IuanNcbi8vIG1vZHVsZSBpZCA9IDE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=");
},function(module,exports,__webpack_require__){eval("var Canvas = __webpack_require__(15);\nvar Color = __webpack_require__(16);\nvar Path = __webpack_require__(3);\nvar Point = __webpack_require__(2);\nvar Shape = __webpack_require__(18);\nvar Vector = __webpack_require__(19);\n\n\n/**\n * The Isomer class\n *\n * This file contains the Isomer base definition\n */\nfunction Isomer(canvasId, options) {\n  options = options || {};\n\n  this.canvas = new Canvas(canvasId);\n  this.angle = Math.PI / 6;\n\n  this.scale = options.scale || 70;\n\n  this._calculateTransformation();\n\n  this.originX = options.originX || this.canvas.width / 2;\n  this.originY = options.originY || this.canvas.height * 0.9;\n\n  /**\n   * Light source as defined as the angle from\n   * the object to the source.\n   *\n   * We'll define somewhat arbitrarily for now.\n   */\n  this.lightPosition = options.lightPosition || new Vector(2, -1, 3);\n  this.lightAngle = this.lightPosition.normalize();\n\n  /**\n   * The maximum color difference from shading\n   */\n  this.colorDifference = 0.20;\n  this.lightColor = options.lightColor || new Color(255, 255, 255);\n}\n\n/**\n * Sets the light position for drawing.\n */\nIsomer.prototype.setLightPosition = function(x, y, z) {\n  this.lightPosition = new Vector(x, y, z);\n  this.lightAngle = this.lightPosition.normalize();\n};\n\nIsomer.prototype._translatePoint = function(point) {\n  /**\n   * X rides along the angle extended from the origin\n   * Y rides perpendicular to this angle (in isometric view: PI - angle)\n   * Z affects the y coordinate of the drawn point\n   */\n  var xMap = new Point(point.x * this.transformation[0][0],\n                       point.x * this.transformation[0][1]);\n\n  var yMap = new Point(point.y * this.transformation[1][0],\n                       point.y * this.transformation[1][1]);\n\n  var x = this.originX + xMap.x + yMap.x;\n  var y = this.originY - xMap.y - yMap.y - (point.z * this.scale);\n  return new Point(x, y);\n};\n\n\n/**\n * Adds a shape or path to the scene\n *\n * This method also accepts arrays\n */\nIsomer.prototype.add = function(item, baseColor) {\n  if (Object.prototype.toString.call(item) == '[object Array]') {\n    for (var i = 0; i < item.length; i++) {\n      this.add(item[i], baseColor);\n    }\n  } else if (item instanceof Path) {\n    this._addPath(item, baseColor);\n  } else if (item instanceof Shape) {\n    /* Fetch paths ordered by distance to prevent overlaps */\n    var paths = item.orderedPaths();\n\n    for (var j = 0; j < paths.length; j++) {\n      this._addPath(paths[j], baseColor);\n    }\n  }\n};\n\n\n/**\n * Adds a path to the scene\n */\nIsomer.prototype._addPath = function(path, baseColor) {\n  /* Default baseColor */\n  baseColor = baseColor || new Color(120, 120, 120);\n\n  /* Compute color */\n  var v1 = Vector.fromTwoPoints(path.points[1], path.points[0]);\n  var v2 = Vector.fromTwoPoints(path.points[2], path.points[1]);\n\n  var normal = Vector.crossProduct(v1, v2).normalize();\n\n  /**\n   * Brightness is between -1 and 1 and is computed based\n   * on the dot product between the light source vector and normal.\n   */\n  var brightness = Vector.dotProduct(normal, this.lightAngle);\n  var color = baseColor.lighten(brightness * this.colorDifference, this.lightColor);\n\n  this.canvas.path(path.points.map(this._translatePoint.bind(this)), color);\n};\n\n/**\n * Precalculates transformation values based on the current angle and scale\n * which in theory reduces costly cos and sin calls\n */\nIsomer.prototype._calculateTransformation = function() {\n  this.transformation = [\n    [\n      this.scale * Math.cos(this.angle),\n      this.scale * Math.sin(this.angle)\n    ],\n    [\n      this.scale * Math.cos(Math.PI - this.angle),\n      this.scale * Math.sin(Math.PI - this.angle)\n    ]\n  ];\n};\n\n/* Namespace our primitives */\nIsomer.Canvas = Canvas;\nIsomer.Color = Color;\nIsomer.Path = Path;\nIsomer.Point = Point;\nIsomer.Shape = Shape;\nIsomer.Vector = Vector;\n\n/* Expose Isomer API */\nmodule.exports = Isomer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L2lzb21lci9qcy9pc29tZXIuanM/NzVhOCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGlCQUFpQjtBQUNwQztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUEsbUJBQW1CLGtCQUFrQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBIiwiZmlsZSI6IjE3LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIENhbnZhcyA9IHJlcXVpcmUoJy4vY2FudmFzJyk7XG52YXIgQ29sb3IgPSByZXF1aXJlKCcuL2NvbG9yJyk7XG52YXIgUGF0aCA9IHJlcXVpcmUoJy4vcGF0aCcpO1xudmFyIFBvaW50ID0gcmVxdWlyZSgnLi9wb2ludCcpO1xudmFyIFNoYXBlID0gcmVxdWlyZSgnLi9zaGFwZScpO1xudmFyIFZlY3RvciA9IHJlcXVpcmUoJy4vdmVjdG9yJyk7XG5cblxuLyoqXG4gKiBUaGUgSXNvbWVyIGNsYXNzXG4gKlxuICogVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBJc29tZXIgYmFzZSBkZWZpbml0aW9uXG4gKi9cbmZ1bmN0aW9uIElzb21lcihjYW52YXNJZCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICB0aGlzLmNhbnZhcyA9IG5ldyBDYW52YXMoY2FudmFzSWQpO1xuICB0aGlzLmFuZ2xlID0gTWF0aC5QSSAvIDY7XG5cbiAgdGhpcy5zY2FsZSA9IG9wdGlvbnMuc2NhbGUgfHwgNzA7XG5cbiAgdGhpcy5fY2FsY3VsYXRlVHJhbnNmb3JtYXRpb24oKTtcblxuICB0aGlzLm9yaWdpblggPSBvcHRpb25zLm9yaWdpblggfHwgdGhpcy5jYW52YXMud2lkdGggLyAyO1xuICB0aGlzLm9yaWdpblkgPSBvcHRpb25zLm9yaWdpblkgfHwgdGhpcy5jYW52YXMuaGVpZ2h0ICogMC45O1xuXG4gIC8qKlxuICAgKiBMaWdodCBzb3VyY2UgYXMgZGVmaW5lZCBhcyB0aGUgYW5nbGUgZnJvbVxuICAgKiB0aGUgb2JqZWN0IHRvIHRoZSBzb3VyY2UuXG4gICAqXG4gICAqIFdlJ2xsIGRlZmluZSBzb21ld2hhdCBhcmJpdHJhcmlseSBmb3Igbm93LlxuICAgKi9cbiAgdGhpcy5saWdodFBvc2l0aW9uID0gb3B0aW9ucy5saWdodFBvc2l0aW9uIHx8IG5ldyBWZWN0b3IoMiwgLTEsIDMpO1xuICB0aGlzLmxpZ2h0QW5nbGUgPSB0aGlzLmxpZ2h0UG9zaXRpb24ubm9ybWFsaXplKCk7XG5cbiAgLyoqXG4gICAqIFRoZSBtYXhpbXVtIGNvbG9yIGRpZmZlcmVuY2UgZnJvbSBzaGFkaW5nXG4gICAqL1xuICB0aGlzLmNvbG9yRGlmZmVyZW5jZSA9IDAuMjA7XG4gIHRoaXMubGlnaHRDb2xvciA9IG9wdGlvbnMubGlnaHRDb2xvciB8fCBuZXcgQ29sb3IoMjU1LCAyNTUsIDI1NSk7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgbGlnaHQgcG9zaXRpb24gZm9yIGRyYXdpbmcuXG4gKi9cbklzb21lci5wcm90b3R5cGUuc2V0TGlnaHRQb3NpdGlvbiA9IGZ1bmN0aW9uKHgsIHksIHopIHtcbiAgdGhpcy5saWdodFBvc2l0aW9uID0gbmV3IFZlY3Rvcih4LCB5LCB6KTtcbiAgdGhpcy5saWdodEFuZ2xlID0gdGhpcy5saWdodFBvc2l0aW9uLm5vcm1hbGl6ZSgpO1xufTtcblxuSXNvbWVyLnByb3RvdHlwZS5fdHJhbnNsYXRlUG9pbnQgPSBmdW5jdGlvbihwb2ludCkge1xuICAvKipcbiAgICogWCByaWRlcyBhbG9uZyB0aGUgYW5nbGUgZXh0ZW5kZWQgZnJvbSB0aGUgb3JpZ2luXG4gICAqIFkgcmlkZXMgcGVycGVuZGljdWxhciB0byB0aGlzIGFuZ2xlIChpbiBpc29tZXRyaWMgdmlldzogUEkgLSBhbmdsZSlcbiAgICogWiBhZmZlY3RzIHRoZSB5IGNvb3JkaW5hdGUgb2YgdGhlIGRyYXduIHBvaW50XG4gICAqL1xuICB2YXIgeE1hcCA9IG5ldyBQb2ludChwb2ludC54ICogdGhpcy50cmFuc2Zvcm1hdGlvblswXVswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQueCAqIHRoaXMudHJhbnNmb3JtYXRpb25bMF1bMV0pO1xuXG4gIHZhciB5TWFwID0gbmV3IFBvaW50KHBvaW50LnkgKiB0aGlzLnRyYW5zZm9ybWF0aW9uWzFdWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICBwb2ludC55ICogdGhpcy50cmFuc2Zvcm1hdGlvblsxXVsxXSk7XG5cbiAgdmFyIHggPSB0aGlzLm9yaWdpblggKyB4TWFwLnggKyB5TWFwLng7XG4gIHZhciB5ID0gdGhpcy5vcmlnaW5ZIC0geE1hcC55IC0geU1hcC55IC0gKHBvaW50LnogKiB0aGlzLnNjYWxlKTtcbiAgcmV0dXJuIG5ldyBQb2ludCh4LCB5KTtcbn07XG5cblxuLyoqXG4gKiBBZGRzIGEgc2hhcGUgb3IgcGF0aCB0byB0aGUgc2NlbmVcbiAqXG4gKiBUaGlzIG1ldGhvZCBhbHNvIGFjY2VwdHMgYXJyYXlzXG4gKi9cbklzb21lci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24oaXRlbSwgYmFzZUNvbG9yKSB7XG4gIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlbSkgPT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbS5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5hZGQoaXRlbVtpXSwgYmFzZUNvbG9yKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXRlbSBpbnN0YW5jZW9mIFBhdGgpIHtcbiAgICB0aGlzLl9hZGRQYXRoKGl0ZW0sIGJhc2VDb2xvcik7XG4gIH0gZWxzZSBpZiAoaXRlbSBpbnN0YW5jZW9mIFNoYXBlKSB7XG4gICAgLyogRmV0Y2ggcGF0aHMgb3JkZXJlZCBieSBkaXN0YW5jZSB0byBwcmV2ZW50IG92ZXJsYXBzICovXG4gICAgdmFyIHBhdGhzID0gaXRlbS5vcmRlcmVkUGF0aHMoKTtcblxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgcGF0aHMubGVuZ3RoOyBqKyspIHtcbiAgICAgIHRoaXMuX2FkZFBhdGgocGF0aHNbal0sIGJhc2VDb2xvcik7XG4gICAgfVxuICB9XG59O1xuXG5cbi8qKlxuICogQWRkcyBhIHBhdGggdG8gdGhlIHNjZW5lXG4gKi9cbklzb21lci5wcm90b3R5cGUuX2FkZFBhdGggPSBmdW5jdGlvbihwYXRoLCBiYXNlQ29sb3IpIHtcbiAgLyogRGVmYXVsdCBiYXNlQ29sb3IgKi9cbiAgYmFzZUNvbG9yID0gYmFzZUNvbG9yIHx8IG5ldyBDb2xvcigxMjAsIDEyMCwgMTIwKTtcblxuICAvKiBDb21wdXRlIGNvbG9yICovXG4gIHZhciB2MSA9IFZlY3Rvci5mcm9tVHdvUG9pbnRzKHBhdGgucG9pbnRzWzFdLCBwYXRoLnBvaW50c1swXSk7XG4gIHZhciB2MiA9IFZlY3Rvci5mcm9tVHdvUG9pbnRzKHBhdGgucG9pbnRzWzJdLCBwYXRoLnBvaW50c1sxXSk7XG5cbiAgdmFyIG5vcm1hbCA9IFZlY3Rvci5jcm9zc1Byb2R1Y3QodjEsIHYyKS5ub3JtYWxpemUoKTtcblxuICAvKipcbiAgICogQnJpZ2h0bmVzcyBpcyBiZXR3ZWVuIC0xIGFuZCAxIGFuZCBpcyBjb21wdXRlZCBiYXNlZFxuICAgKiBvbiB0aGUgZG90IHByb2R1Y3QgYmV0d2VlbiB0aGUgbGlnaHQgc291cmNlIHZlY3RvciBhbmQgbm9ybWFsLlxuICAgKi9cbiAgdmFyIGJyaWdodG5lc3MgPSBWZWN0b3IuZG90UHJvZHVjdChub3JtYWwsIHRoaXMubGlnaHRBbmdsZSk7XG4gIHZhciBjb2xvciA9IGJhc2VDb2xvci5saWdodGVuKGJyaWdodG5lc3MgKiB0aGlzLmNvbG9yRGlmZmVyZW5jZSwgdGhpcy5saWdodENvbG9yKTtcblxuICB0aGlzLmNhbnZhcy5wYXRoKHBhdGgucG9pbnRzLm1hcCh0aGlzLl90cmFuc2xhdGVQb2ludC5iaW5kKHRoaXMpKSwgY29sb3IpO1xufTtcblxuLyoqXG4gKiBQcmVjYWxjdWxhdGVzIHRyYW5zZm9ybWF0aW9uIHZhbHVlcyBiYXNlZCBvbiB0aGUgY3VycmVudCBhbmdsZSBhbmQgc2NhbGVcbiAqIHdoaWNoIGluIHRoZW9yeSByZWR1Y2VzIGNvc3RseSBjb3MgYW5kIHNpbiBjYWxsc1xuICovXG5Jc29tZXIucHJvdG90eXBlLl9jYWxjdWxhdGVUcmFuc2Zvcm1hdGlvbiA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnRyYW5zZm9ybWF0aW9uID0gW1xuICAgIFtcbiAgICAgIHRoaXMuc2NhbGUgKiBNYXRoLmNvcyh0aGlzLmFuZ2xlKSxcbiAgICAgIHRoaXMuc2NhbGUgKiBNYXRoLnNpbih0aGlzLmFuZ2xlKVxuICAgIF0sXG4gICAgW1xuICAgICAgdGhpcy5zY2FsZSAqIE1hdGguY29zKE1hdGguUEkgLSB0aGlzLmFuZ2xlKSxcbiAgICAgIHRoaXMuc2NhbGUgKiBNYXRoLnNpbihNYXRoLlBJIC0gdGhpcy5hbmdsZSlcbiAgICBdXG4gIF07XG59O1xuXG4vKiBOYW1lc3BhY2Ugb3VyIHByaW1pdGl2ZXMgKi9cbklzb21lci5DYW52YXMgPSBDYW52YXM7XG5Jc29tZXIuQ29sb3IgPSBDb2xvcjtcbklzb21lci5QYXRoID0gUGF0aDtcbklzb21lci5Qb2ludCA9IFBvaW50O1xuSXNvbWVyLlNoYXBlID0gU2hhcGU7XG5Jc29tZXIuVmVjdG9yID0gVmVjdG9yO1xuXG4vKiBFeHBvc2UgSXNvbWVyIEFQSSAqL1xubW9kdWxlLmV4cG9ydHMgPSBJc29tZXI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vaXNvbWVyL2pzL2lzb21lci5qc1xuLy8gbW9kdWxlIGlkID0gMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==")},function(module,exports,__webpack_require__){eval("var Path = __webpack_require__(3);\nvar Point = __webpack_require__(2);\n\n/**\n * Shape utility class\n *\n * An Isomer.Shape consists of a list of Isomer.Path's\n */\nfunction Shape(paths) {\n  if (Object.prototype.toString.call(paths) === '[object Array]') {\n    this.paths = paths;\n  } else {\n    this.paths = Array.prototype.slice.call(arguments);\n  }\n}\n\n\n/**\n * Pushes a path onto the end of the Shape\n */\nShape.prototype.push = function(path) {\n  this.paths.push(path);\n};\n\n\n/**\n * Translates a given shape\n *\n * Simply a forward to Path#translate\n */\nShape.prototype.translate = function() {\n  var args = arguments;\n\n  return new Shape(this.paths.map(function(path) {\n    return path.translate.apply(path, args);\n  }));\n};\n\n/**\n * Rotates a given shape along the X axis around a given origin\n *\n * Simply a forward to Path#rotateX\n */\nShape.prototype.rotateX = function() {\n  var args = arguments;\n\n  return new Shape(this.paths.map(function(path) {\n    return path.rotateX.apply(path, args);\n  }));\n};\n\n/**\n * Rotates a given shape along the Y axis around a given origin\n *\n * Simply a forward to Path#rotateY\n */\nShape.prototype.rotateY = function() {\n  var args = arguments;\n\n  return new Shape(this.paths.map(function(path) {\n    return path.rotateY.apply(path, args);\n  }));\n};\n\n/**\n * Rotates a given shape along the Z axis around a given origin\n *\n * Simply a forward to Path#rotateZ\n */\nShape.prototype.rotateZ = function() {\n  var args = arguments;\n\n  return new Shape(this.paths.map(function(path) {\n    return path.rotateZ.apply(path, args);\n  }));\n};\n\n/**\n * Scales a path about a given origin\n *\n * Simply a forward to Point#scale\n */\nShape.prototype.scale = function() {\n  var args = arguments;\n\n  return new Shape(this.paths.map(function(path) {\n    return path.scale.apply(path, args);\n  }));\n};\n\n\n/**\n * Produces a list of the shape's paths ordered by distance to\n * prevent overlaps when drawing\n */\nShape.prototype.orderedPaths = function() {\n  var paths = this.paths.slice();\n\n  /**\n   * Sort the list of faces by distance then map the entries, returning\n   * only the path and not the added \"further point\" from earlier.\n   */\n  return paths.sort(function(pathA, pathB) {\n    return pathB.depth() - pathA.depth();\n  });\n};\n\n\n/**\n * Utility function to create a 3D object by raising a 2D path\n * along the z-axis\n */\nShape.extrude = function(path, height) {\n  height = (typeof height === 'number') ? height : 1;\n\n  var i, topPath = path.translate(0, 0, height);\n  var shape = new Shape();\n\n  /* Push the top and bottom faces, top face must be oriented correctly */\n  shape.push(path.reverse());\n  shape.push(topPath);\n\n  /* Push each side face */\n  for (i = 0; i < path.points.length; i++) {\n    shape.push(new Path([\n      topPath.points[i],\n      path.points[i],\n      path.points[(i + 1) % path.points.length],\n      topPath.points[(i + 1) % topPath.points.length]\n    ]));\n  }\n\n  return shape;\n};\n\n\n/**\n * Some shapes to play with\n */\n\n/**\n * A prism located at origin with dimensions dx, dy, dz\n */\nShape.Prism = function(origin, dx, dy, dz) {\n  dx = (typeof dx === 'number') ? dx : 1;\n  dy = (typeof dy === 'number') ? dy : 1;\n  dz = (typeof dz === 'number') ? dz : 1;\n\n  /* The shape we will return */\n  var prism = new Shape();\n\n  /* Squares parallel to the x-axis */\n  var face1 = new Path([\n    origin,\n    new Point(origin.x + dx, origin.y, origin.z),\n    new Point(origin.x + dx, origin.y, origin.z + dz),\n    new Point(origin.x, origin.y, origin.z + dz)\n  ]);\n\n  /* Push this face and its opposite */\n  prism.push(face1);\n  prism.push(face1.reverse().translate(0, dy, 0));\n\n  /* Square parallel to the y-axis */\n  var face2 = new Path([\n    origin,\n    new Point(origin.x, origin.y, origin.z + dz),\n    new Point(origin.x, origin.y + dy, origin.z + dz),\n    new Point(origin.x, origin.y + dy, origin.z)\n  ]);\n  prism.push(face2);\n  prism.push(face2.reverse().translate(dx, 0, 0));\n\n  /* Square parallel to the xy-plane */\n  var face3 = new Path([\n    origin,\n    new Point(origin.x + dx, origin.y, origin.z),\n    new Point(origin.x + dx, origin.y + dy, origin.z),\n    new Point(origin.x, origin.y + dy, origin.z)\n  ]);\n  /* This surface is oriented backwards, so we need to reverse the points */\n  prism.push(face3.reverse());\n  prism.push(face3.translate(0, 0, dz));\n\n  return prism;\n};\n\n\nShape.Pyramid = function(origin, dx, dy, dz) {\n  dx = (typeof dx === 'number') ? dx : 1;\n  dy = (typeof dy === 'number') ? dy : 1;\n  dz = (typeof dz === 'number') ? dz : 1;\n\n  var pyramid = new Shape();\n\n  /* Path parallel to the x-axis */\n  var face1 = new Path([\n    origin,\n    new Point(origin.x + dx, origin.y, origin.z),\n    new Point(origin.x + dx / 2, origin.y + dy / 2, origin.z + dz)\n  ]);\n  /* Push the face, and its opposite face, by rotating around the Z-axis */\n  pyramid.push(face1);\n  pyramid.push(face1.rotateZ(origin.translate(dx / 2, dy / 2), Math.PI));\n\n  /* Path parallel to the y-axis */\n  var face2 = new Path([\n    origin,\n    new Point(origin.x + dx / 2, origin.y + dy / 2, origin.z + dz),\n    new Point(origin.x, origin.y + dy, origin.z)\n  ]);\n  pyramid.push(face2);\n  pyramid.push(face2.rotateZ(origin.translate(dx / 2, dy / 2), Math.PI));\n\n  return pyramid;\n};\n\n\nShape.Cylinder = function(origin, radius, vertices, height) {\n  radius = (typeof radius === 'number') ? radius : 1;\n\n  var circle = Path.Circle(origin, radius, vertices);\n  var cylinder = Shape.extrude(circle, height);\n\n  return cylinder;\n};\n\n\nmodule.exports = Shape;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L2lzb21lci9qcy9zaGFwZS5qcz8xNWE1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxhQUFhLHdCQUF3QjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQSIsImZpbGUiOiIxOC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBQYXRoID0gcmVxdWlyZSgnLi9wYXRoJyk7XG52YXIgUG9pbnQgPSByZXF1aXJlKCcuL3BvaW50Jyk7XG5cbi8qKlxuICogU2hhcGUgdXRpbGl0eSBjbGFzc1xuICpcbiAqIEFuIElzb21lci5TaGFwZSBjb25zaXN0cyBvZiBhIGxpc3Qgb2YgSXNvbWVyLlBhdGgnc1xuICovXG5mdW5jdGlvbiBTaGFwZShwYXRocykge1xuICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHBhdGhzKSA9PT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgIHRoaXMucGF0aHMgPSBwYXRocztcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnBhdGhzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgfVxufVxuXG5cbi8qKlxuICogUHVzaGVzIGEgcGF0aCBvbnRvIHRoZSBlbmQgb2YgdGhlIFNoYXBlXG4gKi9cblNoYXBlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24ocGF0aCkge1xuICB0aGlzLnBhdGhzLnB1c2gocGF0aCk7XG59O1xuXG5cbi8qKlxuICogVHJhbnNsYXRlcyBhIGdpdmVuIHNoYXBlXG4gKlxuICogU2ltcGx5IGEgZm9yd2FyZCB0byBQYXRoI3RyYW5zbGF0ZVxuICovXG5TaGFwZS5wcm90b3R5cGUudHJhbnNsYXRlID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhcmdzID0gYXJndW1lbnRzO1xuXG4gIHJldHVybiBuZXcgU2hhcGUodGhpcy5wYXRocy5tYXAoZnVuY3Rpb24ocGF0aCkge1xuICAgIHJldHVybiBwYXRoLnRyYW5zbGF0ZS5hcHBseShwYXRoLCBhcmdzKTtcbiAgfSkpO1xufTtcblxuLyoqXG4gKiBSb3RhdGVzIGEgZ2l2ZW4gc2hhcGUgYWxvbmcgdGhlIFggYXhpcyBhcm91bmQgYSBnaXZlbiBvcmlnaW5cbiAqXG4gKiBTaW1wbHkgYSBmb3J3YXJkIHRvIFBhdGgjcm90YXRlWFxuICovXG5TaGFwZS5wcm90b3R5cGUucm90YXRlWCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYXJncyA9IGFyZ3VtZW50cztcblxuICByZXR1cm4gbmV3IFNoYXBlKHRoaXMucGF0aHMubWFwKGZ1bmN0aW9uKHBhdGgpIHtcbiAgICByZXR1cm4gcGF0aC5yb3RhdGVYLmFwcGx5KHBhdGgsIGFyZ3MpO1xuICB9KSk7XG59O1xuXG4vKipcbiAqIFJvdGF0ZXMgYSBnaXZlbiBzaGFwZSBhbG9uZyB0aGUgWSBheGlzIGFyb3VuZCBhIGdpdmVuIG9yaWdpblxuICpcbiAqIFNpbXBseSBhIGZvcndhcmQgdG8gUGF0aCNyb3RhdGVZXG4gKi9cblNoYXBlLnByb3RvdHlwZS5yb3RhdGVZID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhcmdzID0gYXJndW1lbnRzO1xuXG4gIHJldHVybiBuZXcgU2hhcGUodGhpcy5wYXRocy5tYXAoZnVuY3Rpb24ocGF0aCkge1xuICAgIHJldHVybiBwYXRoLnJvdGF0ZVkuYXBwbHkocGF0aCwgYXJncyk7XG4gIH0pKTtcbn07XG5cbi8qKlxuICogUm90YXRlcyBhIGdpdmVuIHNoYXBlIGFsb25nIHRoZSBaIGF4aXMgYXJvdW5kIGEgZ2l2ZW4gb3JpZ2luXG4gKlxuICogU2ltcGx5IGEgZm9yd2FyZCB0byBQYXRoI3JvdGF0ZVpcbiAqL1xuU2hhcGUucHJvdG90eXBlLnJvdGF0ZVogPSBmdW5jdGlvbigpIHtcbiAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG5cbiAgcmV0dXJuIG5ldyBTaGFwZSh0aGlzLnBhdGhzLm1hcChmdW5jdGlvbihwYXRoKSB7XG4gICAgcmV0dXJuIHBhdGgucm90YXRlWi5hcHBseShwYXRoLCBhcmdzKTtcbiAgfSkpO1xufTtcblxuLyoqXG4gKiBTY2FsZXMgYSBwYXRoIGFib3V0IGEgZ2l2ZW4gb3JpZ2luXG4gKlxuICogU2ltcGx5IGEgZm9yd2FyZCB0byBQb2ludCNzY2FsZVxuICovXG5TaGFwZS5wcm90b3R5cGUuc2NhbGUgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG5cbiAgcmV0dXJuIG5ldyBTaGFwZSh0aGlzLnBhdGhzLm1hcChmdW5jdGlvbihwYXRoKSB7XG4gICAgcmV0dXJuIHBhdGguc2NhbGUuYXBwbHkocGF0aCwgYXJncyk7XG4gIH0pKTtcbn07XG5cblxuLyoqXG4gKiBQcm9kdWNlcyBhIGxpc3Qgb2YgdGhlIHNoYXBlJ3MgcGF0aHMgb3JkZXJlZCBieSBkaXN0YW5jZSB0b1xuICogcHJldmVudCBvdmVybGFwcyB3aGVuIGRyYXdpbmdcbiAqL1xuU2hhcGUucHJvdG90eXBlLm9yZGVyZWRQYXRocyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcGF0aHMgPSB0aGlzLnBhdGhzLnNsaWNlKCk7XG5cbiAgLyoqXG4gICAqIFNvcnQgdGhlIGxpc3Qgb2YgZmFjZXMgYnkgZGlzdGFuY2UgdGhlbiBtYXAgdGhlIGVudHJpZXMsIHJldHVybmluZ1xuICAgKiBvbmx5IHRoZSBwYXRoIGFuZCBub3QgdGhlIGFkZGVkIFwiZnVydGhlciBwb2ludFwiIGZyb20gZWFybGllci5cbiAgICovXG4gIHJldHVybiBwYXRocy5zb3J0KGZ1bmN0aW9uKHBhdGhBLCBwYXRoQikge1xuICAgIHJldHVybiBwYXRoQi5kZXB0aCgpIC0gcGF0aEEuZGVwdGgoKTtcbiAgfSk7XG59O1xuXG5cbi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbiB0byBjcmVhdGUgYSAzRCBvYmplY3QgYnkgcmFpc2luZyBhIDJEIHBhdGhcbiAqIGFsb25nIHRoZSB6LWF4aXNcbiAqL1xuU2hhcGUuZXh0cnVkZSA9IGZ1bmN0aW9uKHBhdGgsIGhlaWdodCkge1xuICBoZWlnaHQgPSAodHlwZW9mIGhlaWdodCA9PT0gJ251bWJlcicpID8gaGVpZ2h0IDogMTtcblxuICB2YXIgaSwgdG9wUGF0aCA9IHBhdGgudHJhbnNsYXRlKDAsIDAsIGhlaWdodCk7XG4gIHZhciBzaGFwZSA9IG5ldyBTaGFwZSgpO1xuXG4gIC8qIFB1c2ggdGhlIHRvcCBhbmQgYm90dG9tIGZhY2VzLCB0b3AgZmFjZSBtdXN0IGJlIG9yaWVudGVkIGNvcnJlY3RseSAqL1xuICBzaGFwZS5wdXNoKHBhdGgucmV2ZXJzZSgpKTtcbiAgc2hhcGUucHVzaCh0b3BQYXRoKTtcblxuICAvKiBQdXNoIGVhY2ggc2lkZSBmYWNlICovXG4gIGZvciAoaSA9IDA7IGkgPCBwYXRoLnBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgIHNoYXBlLnB1c2gobmV3IFBhdGgoW1xuICAgICAgdG9wUGF0aC5wb2ludHNbaV0sXG4gICAgICBwYXRoLnBvaW50c1tpXSxcbiAgICAgIHBhdGgucG9pbnRzWyhpICsgMSkgJSBwYXRoLnBvaW50cy5sZW5ndGhdLFxuICAgICAgdG9wUGF0aC5wb2ludHNbKGkgKyAxKSAlIHRvcFBhdGgucG9pbnRzLmxlbmd0aF1cbiAgICBdKSk7XG4gIH1cblxuICByZXR1cm4gc2hhcGU7XG59O1xuXG5cbi8qKlxuICogU29tZSBzaGFwZXMgdG8gcGxheSB3aXRoXG4gKi9cblxuLyoqXG4gKiBBIHByaXNtIGxvY2F0ZWQgYXQgb3JpZ2luIHdpdGggZGltZW5zaW9ucyBkeCwgZHksIGR6XG4gKi9cblNoYXBlLlByaXNtID0gZnVuY3Rpb24ob3JpZ2luLCBkeCwgZHksIGR6KSB7XG4gIGR4ID0gKHR5cGVvZiBkeCA9PT0gJ251bWJlcicpID8gZHggOiAxO1xuICBkeSA9ICh0eXBlb2YgZHkgPT09ICdudW1iZXInKSA/IGR5IDogMTtcbiAgZHogPSAodHlwZW9mIGR6ID09PSAnbnVtYmVyJykgPyBkeiA6IDE7XG5cbiAgLyogVGhlIHNoYXBlIHdlIHdpbGwgcmV0dXJuICovXG4gIHZhciBwcmlzbSA9IG5ldyBTaGFwZSgpO1xuXG4gIC8qIFNxdWFyZXMgcGFyYWxsZWwgdG8gdGhlIHgtYXhpcyAqL1xuICB2YXIgZmFjZTEgPSBuZXcgUGF0aChbXG4gICAgb3JpZ2luLFxuICAgIG5ldyBQb2ludChvcmlnaW4ueCArIGR4LCBvcmlnaW4ueSwgb3JpZ2luLnopLFxuICAgIG5ldyBQb2ludChvcmlnaW4ueCArIGR4LCBvcmlnaW4ueSwgb3JpZ2luLnogKyBkeiksXG4gICAgbmV3IFBvaW50KG9yaWdpbi54LCBvcmlnaW4ueSwgb3JpZ2luLnogKyBkeilcbiAgXSk7XG5cbiAgLyogUHVzaCB0aGlzIGZhY2UgYW5kIGl0cyBvcHBvc2l0ZSAqL1xuICBwcmlzbS5wdXNoKGZhY2UxKTtcbiAgcHJpc20ucHVzaChmYWNlMS5yZXZlcnNlKCkudHJhbnNsYXRlKDAsIGR5LCAwKSk7XG5cbiAgLyogU3F1YXJlIHBhcmFsbGVsIHRvIHRoZSB5LWF4aXMgKi9cbiAgdmFyIGZhY2UyID0gbmV3IFBhdGgoW1xuICAgIG9yaWdpbixcbiAgICBuZXcgUG9pbnQob3JpZ2luLngsIG9yaWdpbi55LCBvcmlnaW4ueiArIGR6KSxcbiAgICBuZXcgUG9pbnQob3JpZ2luLngsIG9yaWdpbi55ICsgZHksIG9yaWdpbi56ICsgZHopLFxuICAgIG5ldyBQb2ludChvcmlnaW4ueCwgb3JpZ2luLnkgKyBkeSwgb3JpZ2luLnopXG4gIF0pO1xuICBwcmlzbS5wdXNoKGZhY2UyKTtcbiAgcHJpc20ucHVzaChmYWNlMi5yZXZlcnNlKCkudHJhbnNsYXRlKGR4LCAwLCAwKSk7XG5cbiAgLyogU3F1YXJlIHBhcmFsbGVsIHRvIHRoZSB4eS1wbGFuZSAqL1xuICB2YXIgZmFjZTMgPSBuZXcgUGF0aChbXG4gICAgb3JpZ2luLFxuICAgIG5ldyBQb2ludChvcmlnaW4ueCArIGR4LCBvcmlnaW4ueSwgb3JpZ2luLnopLFxuICAgIG5ldyBQb2ludChvcmlnaW4ueCArIGR4LCBvcmlnaW4ueSArIGR5LCBvcmlnaW4ueiksXG4gICAgbmV3IFBvaW50KG9yaWdpbi54LCBvcmlnaW4ueSArIGR5LCBvcmlnaW4ueilcbiAgXSk7XG4gIC8qIFRoaXMgc3VyZmFjZSBpcyBvcmllbnRlZCBiYWNrd2FyZHMsIHNvIHdlIG5lZWQgdG8gcmV2ZXJzZSB0aGUgcG9pbnRzICovXG4gIHByaXNtLnB1c2goZmFjZTMucmV2ZXJzZSgpKTtcbiAgcHJpc20ucHVzaChmYWNlMy50cmFuc2xhdGUoMCwgMCwgZHopKTtcblxuICByZXR1cm4gcHJpc207XG59O1xuXG5cblNoYXBlLlB5cmFtaWQgPSBmdW5jdGlvbihvcmlnaW4sIGR4LCBkeSwgZHopIHtcbiAgZHggPSAodHlwZW9mIGR4ID09PSAnbnVtYmVyJykgPyBkeCA6IDE7XG4gIGR5ID0gKHR5cGVvZiBkeSA9PT0gJ251bWJlcicpID8gZHkgOiAxO1xuICBkeiA9ICh0eXBlb2YgZHogPT09ICdudW1iZXInKSA/IGR6IDogMTtcblxuICB2YXIgcHlyYW1pZCA9IG5ldyBTaGFwZSgpO1xuXG4gIC8qIFBhdGggcGFyYWxsZWwgdG8gdGhlIHgtYXhpcyAqL1xuICB2YXIgZmFjZTEgPSBuZXcgUGF0aChbXG4gICAgb3JpZ2luLFxuICAgIG5ldyBQb2ludChvcmlnaW4ueCArIGR4LCBvcmlnaW4ueSwgb3JpZ2luLnopLFxuICAgIG5ldyBQb2ludChvcmlnaW4ueCArIGR4IC8gMiwgb3JpZ2luLnkgKyBkeSAvIDIsIG9yaWdpbi56ICsgZHopXG4gIF0pO1xuICAvKiBQdXNoIHRoZSBmYWNlLCBhbmQgaXRzIG9wcG9zaXRlIGZhY2UsIGJ5IHJvdGF0aW5nIGFyb3VuZCB0aGUgWi1heGlzICovXG4gIHB5cmFtaWQucHVzaChmYWNlMSk7XG4gIHB5cmFtaWQucHVzaChmYWNlMS5yb3RhdGVaKG9yaWdpbi50cmFuc2xhdGUoZHggLyAyLCBkeSAvIDIpLCBNYXRoLlBJKSk7XG5cbiAgLyogUGF0aCBwYXJhbGxlbCB0byB0aGUgeS1heGlzICovXG4gIHZhciBmYWNlMiA9IG5ldyBQYXRoKFtcbiAgICBvcmlnaW4sXG4gICAgbmV3IFBvaW50KG9yaWdpbi54ICsgZHggLyAyLCBvcmlnaW4ueSArIGR5IC8gMiwgb3JpZ2luLnogKyBkeiksXG4gICAgbmV3IFBvaW50KG9yaWdpbi54LCBvcmlnaW4ueSArIGR5LCBvcmlnaW4ueilcbiAgXSk7XG4gIHB5cmFtaWQucHVzaChmYWNlMik7XG4gIHB5cmFtaWQucHVzaChmYWNlMi5yb3RhdGVaKG9yaWdpbi50cmFuc2xhdGUoZHggLyAyLCBkeSAvIDIpLCBNYXRoLlBJKSk7XG5cbiAgcmV0dXJuIHB5cmFtaWQ7XG59O1xuXG5cblNoYXBlLkN5bGluZGVyID0gZnVuY3Rpb24ob3JpZ2luLCByYWRpdXMsIHZlcnRpY2VzLCBoZWlnaHQpIHtcbiAgcmFkaXVzID0gKHR5cGVvZiByYWRpdXMgPT09ICdudW1iZXInKSA/IHJhZGl1cyA6IDE7XG5cbiAgdmFyIGNpcmNsZSA9IFBhdGguQ2lyY2xlKG9yaWdpbiwgcmFkaXVzLCB2ZXJ0aWNlcyk7XG4gIHZhciBjeWxpbmRlciA9IFNoYXBlLmV4dHJ1ZGUoY2lyY2xlLCBoZWlnaHQpO1xuXG4gIHJldHVybiBjeWxpbmRlcjtcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBTaGFwZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9pc29tZXIvanMvc2hhcGUuanNcbi8vIG1vZHVsZSBpZCA9IDE4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports){eval("function Vector (i, j, k) {\n  this.i = (typeof i === 'number') ? i : 0;\n  this.j = (typeof j === 'number') ? j : 0;\n  this.k = (typeof k === 'number') ? k : 0;\n}\n\n/**\n * Alternate constructor\n */\nVector.fromTwoPoints = function(p1, p2) {\n  return new Vector(p2.x - p1.x, p2.y - p1.y, p2.z - p1.z);\n};\n\nVector.crossProduct = function(v1, v2) {\n  var i = v1.j * v2.k - v2.j * v1.k;\n  var j = -1 * (v1.i * v2.k - v2.i * v1.k);\n  var k = v1.i * v2.j - v2.i * v1.j;\n\n  return new Vector(i, j, k);\n};\n\nVector.dotProduct = function(v1, v2) {\n  return v1.i * v2.i + v1.j * v2.j + v1.k * v2.k;\n};\n\nVector.prototype.magnitude = function() {\n  return Math.sqrt(this.i * this.i + this.j * this.j + this.k * this.k);\n};\n\nVector.prototype.normalize = function() {\n  var magnitude = this.magnitude();\n  /**\n   * If the magnitude is 0 then return the zero vector instead of dividing by 0\n   */\n  if (magnitude === 0) {\n    return new Vector(0, 0, 0);\n  }\n  return new Vector(this.i / magnitude, this.j / magnitude, this.k / magnitude);\n};\n\nmodule.exports = Vector;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L2lzb21lci9qcy92ZWN0b3IuanM/YTAxMyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEiLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBWZWN0b3IgKGksIGosIGspIHtcbiAgdGhpcy5pID0gKHR5cGVvZiBpID09PSAnbnVtYmVyJykgPyBpIDogMDtcbiAgdGhpcy5qID0gKHR5cGVvZiBqID09PSAnbnVtYmVyJykgPyBqIDogMDtcbiAgdGhpcy5rID0gKHR5cGVvZiBrID09PSAnbnVtYmVyJykgPyBrIDogMDtcbn1cblxuLyoqXG4gKiBBbHRlcm5hdGUgY29uc3RydWN0b3JcbiAqL1xuVmVjdG9yLmZyb21Ud29Qb2ludHMgPSBmdW5jdGlvbihwMSwgcDIpIHtcbiAgcmV0dXJuIG5ldyBWZWN0b3IocDIueCAtIHAxLngsIHAyLnkgLSBwMS55LCBwMi56IC0gcDEueik7XG59O1xuXG5WZWN0b3IuY3Jvc3NQcm9kdWN0ID0gZnVuY3Rpb24odjEsIHYyKSB7XG4gIHZhciBpID0gdjEuaiAqIHYyLmsgLSB2Mi5qICogdjEuaztcbiAgdmFyIGogPSAtMSAqICh2MS5pICogdjIuayAtIHYyLmkgKiB2MS5rKTtcbiAgdmFyIGsgPSB2MS5pICogdjIuaiAtIHYyLmkgKiB2MS5qO1xuXG4gIHJldHVybiBuZXcgVmVjdG9yKGksIGosIGspO1xufTtcblxuVmVjdG9yLmRvdFByb2R1Y3QgPSBmdW5jdGlvbih2MSwgdjIpIHtcbiAgcmV0dXJuIHYxLmkgKiB2Mi5pICsgdjEuaiAqIHYyLmogKyB2MS5rICogdjIuaztcbn07XG5cblZlY3Rvci5wcm90b3R5cGUubWFnbml0dWRlID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBNYXRoLnNxcnQodGhpcy5pICogdGhpcy5pICsgdGhpcy5qICogdGhpcy5qICsgdGhpcy5rICogdGhpcy5rKTtcbn07XG5cblZlY3Rvci5wcm90b3R5cGUubm9ybWFsaXplID0gZnVuY3Rpb24oKSB7XG4gIHZhciBtYWduaXR1ZGUgPSB0aGlzLm1hZ25pdHVkZSgpO1xuICAvKipcbiAgICogSWYgdGhlIG1hZ25pdHVkZSBpcyAwIHRoZW4gcmV0dXJuIHRoZSB6ZXJvIHZlY3RvciBpbnN0ZWFkIG9mIGRpdmlkaW5nIGJ5IDBcbiAgICovXG4gIGlmIChtYWduaXR1ZGUgPT09IDApIHtcbiAgICByZXR1cm4gbmV3IFZlY3RvcigwLCAwLCAwKTtcbiAgfVxuICByZXR1cm4gbmV3IFZlY3Rvcih0aGlzLmkgLyBtYWduaXR1ZGUsIHRoaXMuaiAvIG1hZ25pdHVkZSwgdGhpcy5rIC8gbWFnbml0dWRlKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gVmVjdG9yO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2lzb21lci9qcy92ZWN0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDE5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=")},function(module,exports,__webpack_require__){eval('(function(exports){\n"use strict";\n\nvar _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nObject.defineProperty(exports, "__esModule", {\n  value: true\n});\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\n// Phoenix Channels JavaScript client\n//\n// ## Socket Connection\n//\n// A single connection is established to the server and\n// channels are multiplexed over the connection.\n// Connect to the server using the `Socket` class:\n//\n//     let socket = new Socket("/ws", {params: {userToken: "123"}})\n//     socket.connect()\n//\n// The `Socket` constructor takes the mount point of the socket,\n// the authentication params, as well as options that can be found in\n// the Socket docs, such as configuring the `LongPoll` transport, and\n// heartbeat.\n//\n// ## Channels\n//\n// Channels are isolated, concurrent processes on the server that\n// subscribe to topics and broker events between the client and server.\n// To join a channel, you must provide the topic, and channel params for\n// authorization. Here\'s an example chat room example where `"new_msg"`\n// events are listened for, messages are pushed to the server, and\n// the channel is joined with ok/error/timeout matches:\n//\n//     let channel = socket.channel("room:123", {token: roomToken})\n//     channel.on("new_msg", msg => console.log("Got message", msg) )\n//     $input.onEnter( e => {\n//       channel.push("new_msg", {body: e.target.val}, 10000)\n//        .receive("ok", (msg) => console.log("created message", msg) )\n//        .receive("error", (reasons) => console.log("create failed", reasons) )\n//        .receive("timeout", () => console.log("Networking issue...") )\n//     })\n//     channel.join()\n//       .receive("ok", ({messages}) => console.log("catching up", messages) )\n//       .receive("error", ({reason}) => console.log("failed join", reason) )\n//       .receive("timeout", () => console.log("Networking issue. Still waiting...") )\n//\n//\n// ## Joining\n//\n// Creating a channel with `socket.channel(topic, params)`, binds the params to\n// `channel.params`, which are sent up on `channel.join()`.\n// Subsequent rejoins will send up the modified params for\n// updating authorization params, or passing up last_message_id information.\n// Successful joins receive an "ok" status, while unsuccessful joins\n// receive "error".\n//\n// ## Duplicate Join Subscriptions\n//\n// While the client may join any number of topics on any number of channels,\n// the client may only hold a single subscription for each unique topic at any\n// given time. When attempting to create a duplicate subscription,\n// the server will close the existing channel, log a warning, and\n// spawn a new channel for the topic. The client will have their\n// `channel.onClose` callbacks fired for the existing channel, and the new\n// channel join will have its receive hooks processed as normal.\n//\n// ## Pushing Messages\n//\n// From the previous example, we can see that pushing messages to the server\n// can be done with `channel.push(eventName, payload)` and we can optionally\n// receive responses from the push. Additionally, we can use\n// `receive("timeout", callback)` to abort waiting for our other `receive` hooks\n//  and take action after some period of waiting. The default timeout is 5000ms.\n//\n//\n// ## Socket Hooks\n//\n// Lifecycle events of the multiplexed connection can be hooked into via\n// `socket.onError()` and `socket.onClose()` events, ie:\n//\n//     socket.onError( () => console.log("there was an error with the connection!") )\n//     socket.onClose( () => console.log("the connection dropped") )\n//\n//\n// ## Channel Hooks\n//\n// For each joined channel, you can bind to `onError` and `onClose` events\n// to monitor the channel lifecycle, ie:\n//\n//     channel.onError( () => console.log("there was an error!") )\n//     channel.onClose( () => console.log("the channel has gone away gracefully") )\n//\n// ### onError hooks\n//\n// `onError` hooks are invoked if the socket connection drops, or the channel\n// crashes on the server. In either case, a channel rejoin is attempted\n// automatically in an exponential backoff manner.\n//\n// ### onClose hooks\n//\n// `onClose` hooks are invoked only in two cases. 1) the channel explicitly\n// closed on the server, or 2). The client explicitly closed, by calling\n// `channel.leave()`\n//\n//\n// ## Presence\n//\n// The `Presence` object provides features for syncing presence information\n// from the server with the client and handling presences joining and leaving.\n//\n// ### Syncing initial state from the server\n//\n// `Presence.syncState` is used to sync the list of presences on the server\n// with the client\'s state. An optional `onJoin` and `onLeave` callback can\n// be provided to react to changes in the client\'s local presences across\n// disconnects and reconnects with the server.\n//\n// `Presence.syncDiff` is used to sync a diff of presence join and leave\n// events from the server, as they happen. Like `syncState`, `syncDiff`\n// accepts optional `onJoin` and `onLeave` callbacks to react to a user\n// joining or leaving from a device.\n//\n// ### Listing Presences\n//\n// `Presence.list` is used to return a list of presence information\n// based on the local state of metadata. By default, all presence\n// metadata is returned, but a `listBy` function can be supplied to\n// allow the client to select which metadata to use for a given presence.\n// For example, you may have a user online from different devices with a\n// a metadata status of "online", but they have set themselves to "away"\n// on another device. In this case, they app may choose to use the "away"\n// status for what appears on the UI. The example below defines a `listBy`\n// function which prioritizes the first metadata which was registered for\n// each user. This could be the first tab they opened, or the first device\n// they came online from:\n//\n//     let state = {}\n//     state = Presence.syncState(state, stateFromServer)\n//     let listBy = (id, {metas: [first, ...rest]}) => {\n//       first.count = rest.length + 1 // count of this user\'s presences\n//       first.id = id\n//       return first\n//     }\n//     let onlineUsers = Presence.list(state, listBy)\n//\n//\n// ### Example Usage\n//\n//     // detect if user has joined for the 1st time or from another tab/device\n//     let onJoin = (id, current, newPres) => {\n//       if(!current){\n//         console.log("user has entered for the first time", newPres)\n//       } else {\n//         console.log("user additional presence", newPres)\n//       }\n//     }\n//     // detect if user has left from all tabs/devices, or is still present\n//     let onLeave = (id, current, leftPres) => {\n//       if(current.metas.length === 0){\n//         console.log("user has left from all devices", leftPres)\n//       } else {\n//         console.log("user left from a device", leftPres)\n//       }\n//     }\n//     let presences = {} // client\'s initial empty presence state\n//     // receive initial presence data from server, sent after join\n//     myChannel.on("presences", state => {\n//       presences = Presence.syncState(presences, state, onJoin, onLeave)\n//       displayUsers(Presence.list(presences))\n//     })\n//     // receive "presence_diff" from server, containing join/leave events\n//     myChannel.on("presence_diff", diff => {\n//       presences = Presence.syncDiff(presences, diff, onJoin, onLeave)\n//       this.setState({users: Presence.list(room.presences, listBy)})\n//     })\n//\nvar VSN = "1.0.0";\nvar SOCKET_STATES = { connecting: 0, open: 1, closing: 2, closed: 3 };\nvar DEFAULT_TIMEOUT = 10000;\nvar CHANNEL_STATES = {\n  closed: "closed",\n  errored: "errored",\n  joined: "joined",\n  joining: "joining",\n  leaving: "leaving"\n};\nvar CHANNEL_EVENTS = {\n  close: "phx_close",\n  error: "phx_error",\n  join: "phx_join",\n  reply: "phx_reply",\n  leave: "phx_leave"\n};\nvar TRANSPORTS = {\n  longpoll: "longpoll",\n  websocket: "websocket"\n};\n\nvar Push = function () {\n\n  // Initializes the Push\n  //\n  // channel - The Channel\n  // event - The event, for example `"phx_join"`\n  // payload - The payload, for example `{user_id: 123}`\n  // timeout - The push timeout in milliseconds\n  //\n\n  function Push(channel, event, payload, timeout) {\n    _classCallCheck(this, Push);\n\n    this.channel = channel;\n    this.event = event;\n    this.payload = payload || {};\n    this.receivedResp = null;\n    this.timeout = timeout;\n    this.timeoutTimer = null;\n    this.recHooks = [];\n    this.sent = false;\n  }\n\n  _createClass(Push, [{\n    key: "resend",\n    value: function resend(timeout) {\n      this.timeout = timeout;\n      this.cancelRefEvent();\n      this.ref = null;\n      this.refEvent = null;\n      this.receivedResp = null;\n      this.sent = false;\n      this.send();\n    }\n  }, {\n    key: "send",\n    value: function send() {\n      if (this.hasReceived("timeout")) {\n        return;\n      }\n      this.startTimeout();\n      this.sent = true;\n      this.channel.socket.push({\n        topic: this.channel.topic,\n        event: this.event,\n        payload: this.payload,\n        ref: this.ref\n      });\n    }\n  }, {\n    key: "receive",\n    value: function receive(status, callback) {\n      if (this.hasReceived(status)) {\n        callback(this.receivedResp.response);\n      }\n\n      this.recHooks.push({ status: status, callback: callback });\n      return this;\n    }\n\n    // private\n\n  }, {\n    key: "matchReceive",\n    value: function matchReceive(_ref) {\n      var status = _ref.status;\n      var response = _ref.response;\n      var ref = _ref.ref;\n\n      this.recHooks.filter(function (h) {\n        return h.status === status;\n      }).forEach(function (h) {\n        return h.callback(response);\n      });\n    }\n  }, {\n    key: "cancelRefEvent",\n    value: function cancelRefEvent() {\n      if (!this.refEvent) {\n        return;\n      }\n      this.channel.off(this.refEvent);\n    }\n  }, {\n    key: "cancelTimeout",\n    value: function cancelTimeout() {\n      clearTimeout(this.timeoutTimer);\n      this.timeoutTimer = null;\n    }\n  }, {\n    key: "startTimeout",\n    value: function startTimeout() {\n      var _this = this;\n\n      if (this.timeoutTimer) {\n        return;\n      }\n      this.ref = this.channel.socket.makeRef();\n      this.refEvent = this.channel.replyEventName(this.ref);\n\n      this.channel.on(this.refEvent, function (payload) {\n        _this.cancelRefEvent();\n        _this.cancelTimeout();\n        _this.receivedResp = payload;\n        _this.matchReceive(payload);\n      });\n\n      this.timeoutTimer = setTimeout(function () {\n        _this.trigger("timeout", {});\n      }, this.timeout);\n    }\n  }, {\n    key: "hasReceived",\n    value: function hasReceived(status) {\n      return this.receivedResp && this.receivedResp.status === status;\n    }\n  }, {\n    key: "trigger",\n    value: function trigger(status, response) {\n      this.channel.trigger(this.refEvent, { status: status, response: response });\n    }\n  }]);\n\n  return Push;\n}();\n\nvar Channel = exports.Channel = function () {\n  function Channel(topic, params, socket) {\n    var _this2 = this;\n\n    _classCallCheck(this, Channel);\n\n    this.state = CHANNEL_STATES.closed;\n    this.topic = topic;\n    this.params = params || {};\n    this.socket = socket;\n    this.bindings = [];\n    this.timeout = this.socket.timeout;\n    this.joinedOnce = false;\n    this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout);\n    this.pushBuffer = [];\n    this.rejoinTimer = new Timer(function () {\n      return _this2.rejoinUntilConnected();\n    }, this.socket.reconnectAfterMs);\n    this.joinPush.receive("ok", function () {\n      _this2.state = CHANNEL_STATES.joined;\n      _this2.rejoinTimer.reset();\n      _this2.pushBuffer.forEach(function (pushEvent) {\n        return pushEvent.send();\n      });\n      _this2.pushBuffer = [];\n    });\n    this.onClose(function () {\n      _this2.rejoinTimer.reset();\n      _this2.socket.log("channel", "close " + _this2.topic + " " + _this2.joinRef());\n      _this2.state = CHANNEL_STATES.closed;\n      _this2.socket.remove(_this2);\n    });\n    this.onError(function (reason) {\n      if (_this2.isLeaving() || _this2.isClosed()) {\n        return;\n      }\n      _this2.socket.log("channel", "error " + _this2.topic, reason);\n      _this2.state = CHANNEL_STATES.errored;\n      _this2.rejoinTimer.scheduleTimeout();\n    });\n    this.joinPush.receive("timeout", function () {\n      if (!_this2.isJoining()) {\n        return;\n      }\n      _this2.socket.log("channel", "timeout " + _this2.topic, _this2.joinPush.timeout);\n      _this2.state = CHANNEL_STATES.errored;\n      _this2.rejoinTimer.scheduleTimeout();\n    });\n    this.on(CHANNEL_EVENTS.reply, function (payload, ref) {\n      _this2.trigger(_this2.replyEventName(ref), payload);\n    });\n  }\n\n  _createClass(Channel, [{\n    key: "rejoinUntilConnected",\n    value: function rejoinUntilConnected() {\n      this.rejoinTimer.scheduleTimeout();\n      if (this.socket.isConnected()) {\n        this.rejoin();\n      }\n    }\n  }, {\n    key: "join",\n    value: function join() {\n      var timeout = arguments.length <= 0 || arguments[0] === undefined ? this.timeout : arguments[0];\n\n      if (this.joinedOnce) {\n        throw "tried to join multiple times. \'join\' can only be called a single time per channel instance";\n      } else {\n        this.joinedOnce = true;\n        this.rejoin(timeout);\n        return this.joinPush;\n      }\n    }\n  }, {\n    key: "onClose",\n    value: function onClose(callback) {\n      this.on(CHANNEL_EVENTS.close, callback);\n    }\n  }, {\n    key: "onError",\n    value: function onError(callback) {\n      this.on(CHANNEL_EVENTS.error, function (reason) {\n        return callback(reason);\n      });\n    }\n  }, {\n    key: "on",\n    value: function on(event, callback) {\n      this.bindings.push({ event: event, callback: callback });\n    }\n  }, {\n    key: "off",\n    value: function off(event) {\n      this.bindings = this.bindings.filter(function (bind) {\n        return bind.event !== event;\n      });\n    }\n  }, {\n    key: "canPush",\n    value: function canPush() {\n      return this.socket.isConnected() && this.isJoined();\n    }\n  }, {\n    key: "push",\n    value: function push(event, payload) {\n      var timeout = arguments.length <= 2 || arguments[2] === undefined ? this.timeout : arguments[2];\n\n      if (!this.joinedOnce) {\n        throw "tried to push \'" + event + "\' to \'" + this.topic + "\' before joining. Use channel.join() before pushing events";\n      }\n      var pushEvent = new Push(this, event, payload, timeout);\n      if (this.canPush()) {\n        pushEvent.send();\n      } else {\n        pushEvent.startTimeout();\n        this.pushBuffer.push(pushEvent);\n      }\n\n      return pushEvent;\n    }\n\n    // Leaves the channel\n    //\n    // Unsubscribes from server events, and\n    // instructs channel to terminate on server\n    //\n    // Triggers onClose() hooks\n    //\n    // To receive leave acknowledgements, use the a `receive`\n    // hook to bind to the server ack, ie:\n    //\n    //     channel.leave().receive("ok", () => alert("left!") )\n    //\n\n  }, {\n    key: "leave",\n    value: function leave() {\n      var _this3 = this;\n\n      var timeout = arguments.length <= 0 || arguments[0] === undefined ? this.timeout : arguments[0];\n\n      this.state = CHANNEL_STATES.leaving;\n      var onClose = function onClose() {\n        _this3.socket.log("channel", "leave " + _this3.topic);\n        _this3.trigger(CHANNEL_EVENTS.close, "leave", _this3.joinRef());\n      };\n      var leavePush = new Push(this, CHANNEL_EVENTS.leave, {}, timeout);\n      leavePush.receive("ok", function () {\n        return onClose();\n      }).receive("timeout", function () {\n        return onClose();\n      });\n      leavePush.send();\n      if (!this.canPush()) {\n        leavePush.trigger("ok", {});\n      }\n\n      return leavePush;\n    }\n\n    // Overridable message hook\n    //\n    // Receives all events for specialized message handling\n    // before dispatching to the channel callbacks.\n    //\n    // Must return the payload, modified or unmodified\n\n  }, {\n    key: "onMessage",\n    value: function onMessage(event, payload, ref) {\n      return payload;\n    }\n\n    // private\n\n  }, {\n    key: "isMember",\n    value: function isMember(topic) {\n      return this.topic === topic;\n    }\n  }, {\n    key: "joinRef",\n    value: function joinRef() {\n      return this.joinPush.ref;\n    }\n  }, {\n    key: "sendJoin",\n    value: function sendJoin(timeout) {\n      this.state = CHANNEL_STATES.joining;\n      this.joinPush.resend(timeout);\n    }\n  }, {\n    key: "rejoin",\n    value: function rejoin() {\n      var timeout = arguments.length <= 0 || arguments[0] === undefined ? this.timeout : arguments[0];\n      if (this.isLeaving()) {\n        return;\n      }\n      this.sendJoin(timeout);\n    }\n  }, {\n    key: "trigger",\n    value: function trigger(event, payload, ref) {\n      var close = CHANNEL_EVENTS.close;\n      var error = CHANNEL_EVENTS.error;\n      var leave = CHANNEL_EVENTS.leave;\n      var join = CHANNEL_EVENTS.join;\n\n      if (ref && [close, error, leave, join].indexOf(event) >= 0 && ref !== this.joinRef()) {\n        return;\n      }\n      var handledPayload = this.onMessage(event, payload, ref);\n      if (payload && !handledPayload) {\n        throw "channel onMessage callbacks must return the payload, modified or unmodified";\n      }\n\n      this.bindings.filter(function (bind) {\n        return bind.event === event;\n      }).map(function (bind) {\n        return bind.callback(handledPayload, ref);\n      });\n    }\n  }, {\n    key: "replyEventName",\n    value: function replyEventName(ref) {\n      return "chan_reply_" + ref;\n    }\n  }, {\n    key: "isClosed",\n    value: function isClosed() {\n      return this.state === CHANNEL_STATES.closed;\n    }\n  }, {\n    key: "isErrored",\n    value: function isErrored() {\n      return this.state === CHANNEL_STATES.errored;\n    }\n  }, {\n    key: "isJoined",\n    value: function isJoined() {\n      return this.state === CHANNEL_STATES.joined;\n    }\n  }, {\n    key: "isJoining",\n    value: function isJoining() {\n      return this.state === CHANNEL_STATES.joining;\n    }\n  }, {\n    key: "isLeaving",\n    value: function isLeaving() {\n      return this.state === CHANNEL_STATES.leaving;\n    }\n  }]);\n\n  return Channel;\n}();\n\nvar Socket = exports.Socket = function () {\n\n  // Initializes the Socket\n  //\n  // endPoint - The string WebSocket endpoint, ie, "ws://example.com/ws",\n  //                                               "wss://example.com"\n  //                                               "/ws" (inherited host & protocol)\n  // opts - Optional configuration\n  //   transport - The Websocket Transport, for example WebSocket or Phoenix.LongPoll.\n  //               Defaults to WebSocket with automatic LongPoll fallback.\n  //   timeout - The default timeout in milliseconds to trigger push timeouts.\n  //             Defaults `DEFAULT_TIMEOUT`\n  //   heartbeatIntervalMs - The millisec interval to send a heartbeat message\n  //   reconnectAfterMs - The optional function that returns the millsec\n  //                      reconnect interval. Defaults to stepped backoff of:\n  //\n  //     function(tries){\n  //       return [1000, 5000, 10000][tries - 1] || 10000\n  //     }\n  //\n  //   logger - The optional function for specialized logging, ie:\n  //     `logger: (kind, msg, data) => { console.log(`${kind}: ${msg}`, data) }\n  //\n  //   longpollerTimeout - The maximum timeout of a long poll AJAX request.\n  //                        Defaults to 20s (double the server long poll timer).\n  //\n  //   params - The optional params to pass when connecting\n  //\n  // For IE8 support use an ES5-shim (https://github.com/es-shims/es5-shim)\n  //\n\n  function Socket(endPoint) {\n    var _this4 = this;\n\n    var opts = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    _classCallCheck(this, Socket);\n\n    this.stateChangeCallbacks = { open: [], close: [], error: [], message: [] };\n    this.channels = [];\n    this.sendBuffer = [];\n    this.ref = 0;\n    this.timeout = opts.timeout || DEFAULT_TIMEOUT;\n    this.transport = opts.transport || window.WebSocket || LongPoll;\n    this.heartbeatIntervalMs = opts.heartbeatIntervalMs || 30000;\n    this.reconnectAfterMs = opts.reconnectAfterMs || function (tries) {\n      return [1000, 2000, 5000, 10000][tries - 1] || 10000;\n    };\n    this.logger = opts.logger || function () {}; // noop\n    this.longpollerTimeout = opts.longpollerTimeout || 20000;\n    this.params = opts.params || {};\n    this.endPoint = endPoint + "/" + TRANSPORTS.websocket;\n    this.reconnectTimer = new Timer(function () {\n      _this4.disconnect(function () {\n        return _this4.connect();\n      });\n    }, this.reconnectAfterMs);\n  }\n\n  _createClass(Socket, [{\n    key: "protocol",\n    value: function protocol() {\n      return location.protocol.match(/^https/) ? "wss" : "ws";\n    }\n  }, {\n    key: "endPointURL",\n    value: function endPointURL() {\n      var uri = Ajax.appendParams(Ajax.appendParams(this.endPoint, this.params), { vsn: VSN });\n      if (uri.charAt(0) !== "/") {\n        return uri;\n      }\n      if (uri.charAt(1) === "/") {\n        return this.protocol() + ":" + uri;\n      }\n\n      return this.protocol() + "://" + location.host + uri;\n    }\n  }, {\n    key: "disconnect",\n    value: function disconnect(callback, code, reason) {\n      if (this.conn) {\n        this.conn.onclose = function () {}; // noop\n        if (code) {\n          this.conn.close(code, reason || "");\n        } else {\n          this.conn.close();\n        }\n        this.conn = null;\n      }\n      callback && callback();\n    }\n\n    // params - The params to send when connecting, for example `{user_id: userToken}`\n\n  }, {\n    key: "connect",\n    value: function connect(params) {\n      var _this5 = this;\n\n      if (params) {\n        console && console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor");\n        this.params = params;\n      }\n      if (this.conn) {\n        return;\n      }\n\n      this.conn = new this.transport(this.endPointURL());\n      this.conn.timeout = this.longpollerTimeout;\n      this.conn.onopen = function () {\n        return _this5.onConnOpen();\n      };\n      this.conn.onerror = function (error) {\n        return _this5.onConnError(error);\n      };\n      this.conn.onmessage = function (event) {\n        return _this5.onConnMessage(event);\n      };\n      this.conn.onclose = function (event) {\n        return _this5.onConnClose(event);\n      };\n    }\n\n    // Logs the message. Override `this.logger` for specialized logging. noops by default\n\n  }, {\n    key: "log",\n    value: function log(kind, msg, data) {\n      this.logger(kind, msg, data);\n    }\n\n    // Registers callbacks for connection state change events\n    //\n    // Examples\n    //\n    //    socket.onError(function(error){ alert("An error occurred") })\n    //\n\n  }, {\n    key: "onOpen",\n    value: function onOpen(callback) {\n      this.stateChangeCallbacks.open.push(callback);\n    }\n  }, {\n    key: "onClose",\n    value: function onClose(callback) {\n      this.stateChangeCallbacks.close.push(callback);\n    }\n  }, {\n    key: "onError",\n    value: function onError(callback) {\n      this.stateChangeCallbacks.error.push(callback);\n    }\n  }, {\n    key: "onMessage",\n    value: function onMessage(callback) {\n      this.stateChangeCallbacks.message.push(callback);\n    }\n  }, {\n    key: "onConnOpen",\n    value: function onConnOpen() {\n      var _this6 = this;\n\n      this.log("transport", "connected to " + this.endPointURL(), this.transport.prototype);\n      this.flushSendBuffer();\n      this.reconnectTimer.reset();\n      if (!this.conn.skipHeartbeat) {\n        clearInterval(this.heartbeatTimer);\n        this.heartbeatTimer = setInterval(function () {\n          return _this6.sendHeartbeat();\n        }, this.heartbeatIntervalMs);\n      }\n      this.stateChangeCallbacks.open.forEach(function (callback) {\n        return callback();\n      });\n    }\n  }, {\n    key: "onConnClose",\n    value: function onConnClose(event) {\n      this.log("transport", "close", event);\n      this.triggerChanError();\n      clearInterval(this.heartbeatTimer);\n      this.reconnectTimer.scheduleTimeout();\n      this.stateChangeCallbacks.close.forEach(function (callback) {\n        return callback(event);\n      });\n    }\n  }, {\n    key: "onConnError",\n    value: function onConnError(error) {\n      this.log("transport", error);\n      this.triggerChanError();\n      this.stateChangeCallbacks.error.forEach(function (callback) {\n        return callback(error);\n      });\n    }\n  }, {\n    key: "triggerChanError",\n    value: function triggerChanError() {\n      this.channels.forEach(function (channel) {\n        return channel.trigger(CHANNEL_EVENTS.error);\n      });\n    }\n  }, {\n    key: "connectionState",\n    value: function connectionState() {\n      switch (this.conn && this.conn.readyState) {\n        case SOCKET_STATES.connecting:\n          return "connecting";\n        case SOCKET_STATES.open:\n          return "open";\n        case SOCKET_STATES.closing:\n          return "closing";\n        default:\n          return "closed";\n      }\n    }\n  }, {\n    key: "isConnected",\n    value: function isConnected() {\n      return this.connectionState() === "open";\n    }\n  }, {\n    key: "remove",\n    value: function remove(channel) {\n      this.channels = this.channels.filter(function (c) {\n        return c.joinRef() !== channel.joinRef();\n      });\n    }\n  }, {\n    key: "channel",\n    value: function channel(topic) {\n      var chanParams = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var chan = new Channel(topic, chanParams, this);\n      this.channels.push(chan);\n      return chan;\n    }\n  }, {\n    key: "push",\n    value: function push(data) {\n      var _this7 = this;\n\n      var topic = data.topic;\n      var event = data.event;\n      var payload = data.payload;\n      var ref = data.ref;\n\n      var callback = function callback() {\n        return _this7.conn.send(JSON.stringify(data));\n      };\n      this.log("push", topic + " " + event + " (" + ref + ")", payload);\n      if (this.isConnected()) {\n        callback();\n      } else {\n        this.sendBuffer.push(callback);\n      }\n    }\n\n    // Return the next message ref, accounting for overflows\n\n  }, {\n    key: "makeRef",\n    value: function makeRef() {\n      var newRef = this.ref + 1;\n      if (newRef === this.ref) {\n        this.ref = 0;\n      } else {\n        this.ref = newRef;\n      }\n\n      return this.ref.toString();\n    }\n  }, {\n    key: "sendHeartbeat",\n    value: function sendHeartbeat() {\n      if (!this.isConnected()) {\n        return;\n      }\n      this.push({ topic: "phoenix", event: "heartbeat", payload: {}, ref: this.makeRef() });\n    }\n  }, {\n    key: "flushSendBuffer",\n    value: function flushSendBuffer() {\n      if (this.isConnected() && this.sendBuffer.length > 0) {\n        this.sendBuffer.forEach(function (callback) {\n          return callback();\n        });\n        this.sendBuffer = [];\n      }\n    }\n  }, {\n    key: "onConnMessage",\n    value: function onConnMessage(rawMessage) {\n      var msg = JSON.parse(rawMessage.data);\n      var topic = msg.topic;\n      var event = msg.event;\n      var payload = msg.payload;\n      var ref = msg.ref;\n\n      this.log("receive", (payload.status || "") + " " + topic + " " + event + " " + (ref && "(" + ref + ")" || ""), payload);\n      this.channels.filter(function (channel) {\n        return channel.isMember(topic);\n      }).forEach(function (channel) {\n        return channel.trigger(event, payload, ref);\n      });\n      this.stateChangeCallbacks.message.forEach(function (callback) {\n        return callback(msg);\n      });\n    }\n  }]);\n\n  return Socket;\n}();\n\nvar LongPoll = exports.LongPoll = function () {\n  function LongPoll(endPoint) {\n    _classCallCheck(this, LongPoll);\n\n    this.endPoint = null;\n    this.token = null;\n    this.skipHeartbeat = true;\n    this.onopen = function () {}; // noop\n    this.onerror = function () {}; // noop\n    this.onmessage = function () {}; // noop\n    this.onclose = function () {}; // noop\n    this.pollEndpoint = this.normalizeEndpoint(endPoint);\n    this.readyState = SOCKET_STATES.connecting;\n\n    this.poll();\n  }\n\n  _createClass(LongPoll, [{\n    key: "normalizeEndpoint",\n    value: function normalizeEndpoint(endPoint) {\n      return endPoint.replace("ws://", "http://").replace("wss://", "https://").replace(new RegExp("(.*)\\/" + TRANSPORTS.websocket), "$1/" + TRANSPORTS.longpoll);\n    }\n  }, {\n    key: "endpointURL",\n    value: function endpointURL() {\n      return Ajax.appendParams(this.pollEndpoint, { token: this.token });\n    }\n  }, {\n    key: "closeAndRetry",\n    value: function closeAndRetry() {\n      this.close();\n      this.readyState = SOCKET_STATES.connecting;\n    }\n  }, {\n    key: "ontimeout",\n    value: function ontimeout() {\n      this.onerror("timeout");\n      this.closeAndRetry();\n    }\n  }, {\n    key: "poll",\n    value: function poll() {\n      var _this8 = this;\n\n      if (!(this.readyState === SOCKET_STATES.open || this.readyState === SOCKET_STATES.connecting)) {\n        return;\n      }\n\n      Ajax.request("GET", this.endpointURL(), "application/json", null, this.timeout, this.ontimeout.bind(this), function (resp) {\n        if (resp) {\n          var status = resp.status;\n          var token = resp.token;\n          var messages = resp.messages;\n\n          _this8.token = token;\n        } else {\n          var status = 0;\n        }\n\n        switch (status) {\n          case 200:\n            messages.forEach(function (msg) {\n              return _this8.onmessage({ data: JSON.stringify(msg) });\n            });\n            _this8.poll();\n            break;\n          case 204:\n            _this8.poll();\n            break;\n          case 410:\n            _this8.readyState = SOCKET_STATES.open;\n            _this8.onopen();\n            _this8.poll();\n            break;\n          case 0:\n          case 500:\n            _this8.onerror();\n            _this8.closeAndRetry();\n            break;\n          default:\n            throw "unhandled poll status " + status;\n        }\n      });\n    }\n  }, {\n    key: "send",\n    value: function send(body) {\n      var _this9 = this;\n\n      Ajax.request("POST", this.endpointURL(), "application/json", body, this.timeout, this.onerror.bind(this, "timeout"), function (resp) {\n        if (!resp || resp.status !== 200) {\n          _this9.onerror(status);\n          _this9.closeAndRetry();\n        }\n      });\n    }\n  }, {\n    key: "close",\n    value: function close(code, reason) {\n      this.readyState = SOCKET_STATES.closed;\n      this.onclose();\n    }\n  }]);\n\n  return LongPoll;\n}();\n\nvar Ajax = exports.Ajax = function () {\n  function Ajax() {\n    _classCallCheck(this, Ajax);\n  }\n\n  _createClass(Ajax, null, [{\n    key: "request",\n    value: function request(method, endPoint, accept, body, timeout, ontimeout, callback) {\n      if (window.XDomainRequest) {\n        var req = new XDomainRequest(); // IE8, IE9\n        this.xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback);\n      } else {\n        var req = window.XMLHttpRequest ? new XMLHttpRequest() : // IE7+, Firefox, Chrome, Opera, Safari\n        new ActiveXObject("Microsoft.XMLHTTP"); // IE6, IE5\n        this.xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback);\n      }\n    }\n  }, {\n    key: "xdomainRequest",\n    value: function xdomainRequest(req, method, endPoint, body, timeout, ontimeout, callback) {\n      var _this10 = this;\n\n      req.timeout = timeout;\n      req.open(method, endPoint);\n      req.onload = function () {\n        var response = _this10.parseJSON(req.responseText);\n        callback && callback(response);\n      };\n      if (ontimeout) {\n        req.ontimeout = ontimeout;\n      }\n\n      // Work around bug in IE9 that requires an attached onprogress handler\n      req.onprogress = function () {};\n\n      req.send(body);\n    }\n  }, {\n    key: "xhrRequest",\n    value: function xhrRequest(req, method, endPoint, accept, body, timeout, ontimeout, callback) {\n      var _this11 = this;\n\n      req.timeout = timeout;\n      req.open(method, endPoint, true);\n      req.setRequestHeader("Content-Type", accept);\n      req.onerror = function () {\n        callback && callback(null);\n      };\n      req.onreadystatechange = function () {\n        if (req.readyState === _this11.states.complete && callback) {\n          var response = _this11.parseJSON(req.responseText);\n          callback(response);\n        }\n      };\n      if (ontimeout) {\n        req.ontimeout = ontimeout;\n      }\n\n      req.send(body);\n    }\n  }, {\n    key: "parseJSON",\n    value: function parseJSON(resp) {\n      return resp && resp !== "" ? JSON.parse(resp) : null;\n    }\n  }, {\n    key: "serialize",\n    value: function serialize(obj, parentKey) {\n      var queryStr = [];\n      for (var key in obj) {\n        if (!obj.hasOwnProperty(key)) {\n          continue;\n        }\n        var paramKey = parentKey ? parentKey + "[" + key + "]" : key;\n        var paramVal = obj[key];\n        if ((typeof paramVal === "undefined" ? "undefined" : _typeof(paramVal)) === "object") {\n          queryStr.push(this.serialize(paramVal, paramKey));\n        } else {\n          queryStr.push(encodeURIComponent(paramKey) + "=" + encodeURIComponent(paramVal));\n        }\n      }\n      return queryStr.join("&");\n    }\n  }, {\n    key: "appendParams",\n    value: function appendParams(url, params) {\n      if (Object.keys(params).length === 0) {\n        return url;\n      }\n\n      var prefix = url.match(/\\?/) ? "&" : "?";\n      return "" + url + prefix + this.serialize(params);\n    }\n  }]);\n\n  return Ajax;\n}();\n\nAjax.states = { complete: 4 };\n\nvar Presence = exports.Presence = {\n  syncState: function syncState(currentState, newState, onJoin, onLeave) {\n    var _this12 = this;\n\n    var state = this.clone(currentState);\n    var joins = {};\n    var leaves = {};\n\n    this.map(state, function (key, presence) {\n      if (!newState[key]) {\n        leaves[key] = presence;\n      }\n    });\n    this.map(newState, function (key, newPresence) {\n      var currentPresence = state[key];\n      if (currentPresence) {\n        (function () {\n          var newRefs = newPresence.metas.map(function (m) {\n            return m.phx_ref;\n          });\n          var curRefs = currentPresence.metas.map(function (m) {\n            return m.phx_ref;\n          });\n          var joinedMetas = newPresence.metas.filter(function (m) {\n            return curRefs.indexOf(m.phx_ref) < 0;\n          });\n          var leftMetas = currentPresence.metas.filter(function (m) {\n            return newRefs.indexOf(m.phx_ref) < 0;\n          });\n          if (joinedMetas.length > 0) {\n            joins[key] = newPresence;\n            joins[key].metas = joinedMetas;\n          }\n          if (leftMetas.length > 0) {\n            leaves[key] = _this12.clone(currentPresence);\n            leaves[key].metas = leftMetas;\n          }\n        })();\n      } else {\n        joins[key] = newPresence;\n      }\n    });\n    return this.syncDiff(state, { joins: joins, leaves: leaves }, onJoin, onLeave);\n  },\n  syncDiff: function syncDiff(currentState, _ref2, onJoin, onLeave) {\n    var joins = _ref2.joins;\n    var leaves = _ref2.leaves;\n\n    var state = this.clone(currentState);\n    if (!onJoin) {\n      onJoin = function onJoin() {};\n    }\n    if (!onLeave) {\n      onLeave = function onLeave() {};\n    }\n\n    this.map(joins, function (key, newPresence) {\n      var currentPresence = state[key];\n      state[key] = newPresence;\n      if (currentPresence) {\n        var _state$key$metas;\n\n        (_state$key$metas = state[key].metas).unshift.apply(_state$key$metas, _toConsumableArray(currentPresence.metas));\n      }\n      onJoin(key, currentPresence, newPresence);\n    });\n    this.map(leaves, function (key, leftPresence) {\n      var currentPresence = state[key];\n      if (!currentPresence) {\n        return;\n      }\n      var refsToRemove = leftPresence.metas.map(function (m) {\n        return m.phx_ref;\n      });\n      currentPresence.metas = currentPresence.metas.filter(function (p) {\n        return refsToRemove.indexOf(p.phx_ref) < 0;\n      });\n      onLeave(key, currentPresence, leftPresence);\n      if (currentPresence.metas.length === 0) {\n        delete state[key];\n      }\n    });\n    return state;\n  },\n  list: function list(presences, chooser) {\n    if (!chooser) {\n      chooser = function chooser(key, pres) {\n        return pres;\n      };\n    }\n\n    return this.map(presences, function (key, presence) {\n      return chooser(key, presence);\n    });\n  },\n\n  // private\n\n  map: function map(obj, func) {\n    return Object.getOwnPropertyNames(obj).map(function (key) {\n      return func(key, obj[key]);\n    });\n  },\n  clone: function clone(obj) {\n    return JSON.parse(JSON.stringify(obj));\n  }\n};\n\n// Creates a timer that accepts a `timerCalc` function to perform\n// calculated timeout retries, such as exponential backoff.\n//\n// ## Examples\n//\n//    let reconnectTimer = new Timer(() => this.connect(), function(tries){\n//      return [1000, 5000, 10000][tries - 1] || 10000\n//    })\n//    reconnectTimer.scheduleTimeout() // fires after 1000\n//    reconnectTimer.scheduleTimeout() // fires after 5000\n//    reconnectTimer.reset()\n//    reconnectTimer.scheduleTimeout() // fires after 1000\n//\n\nvar Timer = function () {\n  function Timer(callback, timerCalc) {\n    _classCallCheck(this, Timer);\n\n    this.callback = callback;\n    this.timerCalc = timerCalc;\n    this.timer = null;\n    this.tries = 0;\n  }\n\n  _createClass(Timer, [{\n    key: "reset",\n    value: function reset() {\n      this.tries = 0;\n      clearTimeout(this.timer);\n    }\n\n    // Cancels any previous scheduleTimeout and schedules callback\n\n  }, {\n    key: "scheduleTimeout",\n    value: function scheduleTimeout() {\n      var _this13 = this;\n\n      clearTimeout(this.timer);\n\n      this.timer = setTimeout(function () {\n        _this13.tries = _this13.tries + 1;\n        _this13.callback();\n      }, this.timerCalc(this.tries + 1));\n    }\n  }]);\n\n  return Timer;\n}();\n\n})( false ? window.Phoenix = window.Phoenix || {} : exports);\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L3Bob2VuaXgvcHJpdi9zdGF0aWMvcGhvZW5peC5qcz85NmZmIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7O0FBRUEsb0dBQW9HLG1CQUFtQixFQUFFLG1CQUFtQixrR0FBa0c7O0FBRTlPLGdDQUFnQywyQ0FBMkMsZ0JBQWdCLGtCQUFrQixPQUFPLDJCQUEyQix3REFBd0QsZ0NBQWdDLHVEQUF1RCwyREFBMkQsRUFBRSxFQUFFLHlEQUF5RCxxRUFBcUUsNkRBQTZELG9CQUFvQixHQUFHLEVBQUU7O0FBRWpqQjtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxrQ0FBa0MsMEJBQTBCLDBDQUEwQyxnQkFBZ0IsT0FBTyxrQkFBa0IsRUFBRSxhQUFhLEVBQUUsT0FBTyx3QkFBd0IsRUFBRTs7QUFFak0saURBQWlELDBDQUEwQywwREFBMEQsRUFBRTs7QUFFdko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxTQUFTLGtCQUFrQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxpQkFBaUI7QUFDbEU7QUFDQTtBQUNBLGtDQUFrQyxtQkFBbUI7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsMEJBQTBCLFNBQVM7QUFDbkMsNkJBQTZCLE9BQU87QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsd0JBQXdCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNkNBQTZDO0FBQ3JFLFFBQVE7QUFDUjtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLGFBQWE7QUFDdkQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDBCQUEwQixxQ0FBcUM7QUFDL0Q7QUFDQTs7QUFFQTs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQSxtQ0FBbUM7QUFDbkMsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSwyQ0FBMkMscUNBQXFDO0FBQ2hGO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSwwQkFBMEIsbUNBQW1DO0FBQzdEO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RDtBQUM3RDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7O0FBRUg7QUFDQSxDQUFDOztBQUVELENBQUMsZ0RBQXlFIiwiZmlsZSI6IjIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuLy8gUGhvZW5peCBDaGFubmVscyBKYXZhU2NyaXB0IGNsaWVudFxuLy9cbi8vICMjIFNvY2tldCBDb25uZWN0aW9uXG4vL1xuLy8gQSBzaW5nbGUgY29ubmVjdGlvbiBpcyBlc3RhYmxpc2hlZCB0byB0aGUgc2VydmVyIGFuZFxuLy8gY2hhbm5lbHMgYXJlIG11bHRpcGxleGVkIG92ZXIgdGhlIGNvbm5lY3Rpb24uXG4vLyBDb25uZWN0IHRvIHRoZSBzZXJ2ZXIgdXNpbmcgdGhlIGBTb2NrZXRgIGNsYXNzOlxuLy9cbi8vICAgICBsZXQgc29ja2V0ID0gbmV3IFNvY2tldChcIi93c1wiLCB7cGFyYW1zOiB7dXNlclRva2VuOiBcIjEyM1wifX0pXG4vLyAgICAgc29ja2V0LmNvbm5lY3QoKVxuLy9cbi8vIFRoZSBgU29ja2V0YCBjb25zdHJ1Y3RvciB0YWtlcyB0aGUgbW91bnQgcG9pbnQgb2YgdGhlIHNvY2tldCxcbi8vIHRoZSBhdXRoZW50aWNhdGlvbiBwYXJhbXMsIGFzIHdlbGwgYXMgb3B0aW9ucyB0aGF0IGNhbiBiZSBmb3VuZCBpblxuLy8gdGhlIFNvY2tldCBkb2NzLCBzdWNoIGFzIGNvbmZpZ3VyaW5nIHRoZSBgTG9uZ1BvbGxgIHRyYW5zcG9ydCwgYW5kXG4vLyBoZWFydGJlYXQuXG4vL1xuLy8gIyMgQ2hhbm5lbHNcbi8vXG4vLyBDaGFubmVscyBhcmUgaXNvbGF0ZWQsIGNvbmN1cnJlbnQgcHJvY2Vzc2VzIG9uIHRoZSBzZXJ2ZXIgdGhhdFxuLy8gc3Vic2NyaWJlIHRvIHRvcGljcyBhbmQgYnJva2VyIGV2ZW50cyBiZXR3ZWVuIHRoZSBjbGllbnQgYW5kIHNlcnZlci5cbi8vIFRvIGpvaW4gYSBjaGFubmVsLCB5b3UgbXVzdCBwcm92aWRlIHRoZSB0b3BpYywgYW5kIGNoYW5uZWwgcGFyYW1zIGZvclxuLy8gYXV0aG9yaXphdGlvbi4gSGVyZSdzIGFuIGV4YW1wbGUgY2hhdCByb29tIGV4YW1wbGUgd2hlcmUgYFwibmV3X21zZ1wiYFxuLy8gZXZlbnRzIGFyZSBsaXN0ZW5lZCBmb3IsIG1lc3NhZ2VzIGFyZSBwdXNoZWQgdG8gdGhlIHNlcnZlciwgYW5kXG4vLyB0aGUgY2hhbm5lbCBpcyBqb2luZWQgd2l0aCBvay9lcnJvci90aW1lb3V0IG1hdGNoZXM6XG4vL1xuLy8gICAgIGxldCBjaGFubmVsID0gc29ja2V0LmNoYW5uZWwoXCJyb29tOjEyM1wiLCB7dG9rZW46IHJvb21Ub2tlbn0pXG4vLyAgICAgY2hhbm5lbC5vbihcIm5ld19tc2dcIiwgbXNnID0+IGNvbnNvbGUubG9nKFwiR290IG1lc3NhZ2VcIiwgbXNnKSApXG4vLyAgICAgJGlucHV0Lm9uRW50ZXIoIGUgPT4ge1xuLy8gICAgICAgY2hhbm5lbC5wdXNoKFwibmV3X21zZ1wiLCB7Ym9keTogZS50YXJnZXQudmFsfSwgMTAwMDApXG4vLyAgICAgICAgLnJlY2VpdmUoXCJva1wiLCAobXNnKSA9PiBjb25zb2xlLmxvZyhcImNyZWF0ZWQgbWVzc2FnZVwiLCBtc2cpIClcbi8vICAgICAgICAucmVjZWl2ZShcImVycm9yXCIsIChyZWFzb25zKSA9PiBjb25zb2xlLmxvZyhcImNyZWF0ZSBmYWlsZWRcIiwgcmVhc29ucykgKVxuLy8gICAgICAgIC5yZWNlaXZlKFwidGltZW91dFwiLCAoKSA9PiBjb25zb2xlLmxvZyhcIk5ldHdvcmtpbmcgaXNzdWUuLi5cIikgKVxuLy8gICAgIH0pXG4vLyAgICAgY2hhbm5lbC5qb2luKClcbi8vICAgICAgIC5yZWNlaXZlKFwib2tcIiwgKHttZXNzYWdlc30pID0+IGNvbnNvbGUubG9nKFwiY2F0Y2hpbmcgdXBcIiwgbWVzc2FnZXMpIClcbi8vICAgICAgIC5yZWNlaXZlKFwiZXJyb3JcIiwgKHtyZWFzb259KSA9PiBjb25zb2xlLmxvZyhcImZhaWxlZCBqb2luXCIsIHJlYXNvbikgKVxuLy8gICAgICAgLnJlY2VpdmUoXCJ0aW1lb3V0XCIsICgpID0+IGNvbnNvbGUubG9nKFwiTmV0d29ya2luZyBpc3N1ZS4gU3RpbGwgd2FpdGluZy4uLlwiKSApXG4vL1xuLy9cbi8vICMjIEpvaW5pbmdcbi8vXG4vLyBDcmVhdGluZyBhIGNoYW5uZWwgd2l0aCBgc29ja2V0LmNoYW5uZWwodG9waWMsIHBhcmFtcylgLCBiaW5kcyB0aGUgcGFyYW1zIHRvXG4vLyBgY2hhbm5lbC5wYXJhbXNgLCB3aGljaCBhcmUgc2VudCB1cCBvbiBgY2hhbm5lbC5qb2luKClgLlxuLy8gU3Vic2VxdWVudCByZWpvaW5zIHdpbGwgc2VuZCB1cCB0aGUgbW9kaWZpZWQgcGFyYW1zIGZvclxuLy8gdXBkYXRpbmcgYXV0aG9yaXphdGlvbiBwYXJhbXMsIG9yIHBhc3NpbmcgdXAgbGFzdF9tZXNzYWdlX2lkIGluZm9ybWF0aW9uLlxuLy8gU3VjY2Vzc2Z1bCBqb2lucyByZWNlaXZlIGFuIFwib2tcIiBzdGF0dXMsIHdoaWxlIHVuc3VjY2Vzc2Z1bCBqb2luc1xuLy8gcmVjZWl2ZSBcImVycm9yXCIuXG4vL1xuLy8gIyMgRHVwbGljYXRlIEpvaW4gU3Vic2NyaXB0aW9uc1xuLy9cbi8vIFdoaWxlIHRoZSBjbGllbnQgbWF5IGpvaW4gYW55IG51bWJlciBvZiB0b3BpY3Mgb24gYW55IG51bWJlciBvZiBjaGFubmVscyxcbi8vIHRoZSBjbGllbnQgbWF5IG9ubHkgaG9sZCBhIHNpbmdsZSBzdWJzY3JpcHRpb24gZm9yIGVhY2ggdW5pcXVlIHRvcGljIGF0IGFueVxuLy8gZ2l2ZW4gdGltZS4gV2hlbiBhdHRlbXB0aW5nIHRvIGNyZWF0ZSBhIGR1cGxpY2F0ZSBzdWJzY3JpcHRpb24sXG4vLyB0aGUgc2VydmVyIHdpbGwgY2xvc2UgdGhlIGV4aXN0aW5nIGNoYW5uZWwsIGxvZyBhIHdhcm5pbmcsIGFuZFxuLy8gc3Bhd24gYSBuZXcgY2hhbm5lbCBmb3IgdGhlIHRvcGljLiBUaGUgY2xpZW50IHdpbGwgaGF2ZSB0aGVpclxuLy8gYGNoYW5uZWwub25DbG9zZWAgY2FsbGJhY2tzIGZpcmVkIGZvciB0aGUgZXhpc3RpbmcgY2hhbm5lbCwgYW5kIHRoZSBuZXdcbi8vIGNoYW5uZWwgam9pbiB3aWxsIGhhdmUgaXRzIHJlY2VpdmUgaG9va3MgcHJvY2Vzc2VkIGFzIG5vcm1hbC5cbi8vXG4vLyAjIyBQdXNoaW5nIE1lc3NhZ2VzXG4vL1xuLy8gRnJvbSB0aGUgcHJldmlvdXMgZXhhbXBsZSwgd2UgY2FuIHNlZSB0aGF0IHB1c2hpbmcgbWVzc2FnZXMgdG8gdGhlIHNlcnZlclxuLy8gY2FuIGJlIGRvbmUgd2l0aCBgY2hhbm5lbC5wdXNoKGV2ZW50TmFtZSwgcGF5bG9hZClgIGFuZCB3ZSBjYW4gb3B0aW9uYWxseVxuLy8gcmVjZWl2ZSByZXNwb25zZXMgZnJvbSB0aGUgcHVzaC4gQWRkaXRpb25hbGx5LCB3ZSBjYW4gdXNlXG4vLyBgcmVjZWl2ZShcInRpbWVvdXRcIiwgY2FsbGJhY2spYCB0byBhYm9ydCB3YWl0aW5nIGZvciBvdXIgb3RoZXIgYHJlY2VpdmVgIGhvb2tzXG4vLyAgYW5kIHRha2UgYWN0aW9uIGFmdGVyIHNvbWUgcGVyaW9kIG9mIHdhaXRpbmcuIFRoZSBkZWZhdWx0IHRpbWVvdXQgaXMgNTAwMG1zLlxuLy9cbi8vXG4vLyAjIyBTb2NrZXQgSG9va3Ncbi8vXG4vLyBMaWZlY3ljbGUgZXZlbnRzIG9mIHRoZSBtdWx0aXBsZXhlZCBjb25uZWN0aW9uIGNhbiBiZSBob29rZWQgaW50byB2aWFcbi8vIGBzb2NrZXQub25FcnJvcigpYCBhbmQgYHNvY2tldC5vbkNsb3NlKClgIGV2ZW50cywgaWU6XG4vL1xuLy8gICAgIHNvY2tldC5vbkVycm9yKCAoKSA9PiBjb25zb2xlLmxvZyhcInRoZXJlIHdhcyBhbiBlcnJvciB3aXRoIHRoZSBjb25uZWN0aW9uIVwiKSApXG4vLyAgICAgc29ja2V0Lm9uQ2xvc2UoICgpID0+IGNvbnNvbGUubG9nKFwidGhlIGNvbm5lY3Rpb24gZHJvcHBlZFwiKSApXG4vL1xuLy9cbi8vICMjIENoYW5uZWwgSG9va3Ncbi8vXG4vLyBGb3IgZWFjaCBqb2luZWQgY2hhbm5lbCwgeW91IGNhbiBiaW5kIHRvIGBvbkVycm9yYCBhbmQgYG9uQ2xvc2VgIGV2ZW50c1xuLy8gdG8gbW9uaXRvciB0aGUgY2hhbm5lbCBsaWZlY3ljbGUsIGllOlxuLy9cbi8vICAgICBjaGFubmVsLm9uRXJyb3IoICgpID0+IGNvbnNvbGUubG9nKFwidGhlcmUgd2FzIGFuIGVycm9yIVwiKSApXG4vLyAgICAgY2hhbm5lbC5vbkNsb3NlKCAoKSA9PiBjb25zb2xlLmxvZyhcInRoZSBjaGFubmVsIGhhcyBnb25lIGF3YXkgZ3JhY2VmdWxseVwiKSApXG4vL1xuLy8gIyMjIG9uRXJyb3IgaG9va3Ncbi8vXG4vLyBgb25FcnJvcmAgaG9va3MgYXJlIGludm9rZWQgaWYgdGhlIHNvY2tldCBjb25uZWN0aW9uIGRyb3BzLCBvciB0aGUgY2hhbm5lbFxuLy8gY3Jhc2hlcyBvbiB0aGUgc2VydmVyLiBJbiBlaXRoZXIgY2FzZSwgYSBjaGFubmVsIHJlam9pbiBpcyBhdHRlbXB0ZWRcbi8vIGF1dG9tYXRpY2FsbHkgaW4gYW4gZXhwb25lbnRpYWwgYmFja29mZiBtYW5uZXIuXG4vL1xuLy8gIyMjIG9uQ2xvc2UgaG9va3Ncbi8vXG4vLyBgb25DbG9zZWAgaG9va3MgYXJlIGludm9rZWQgb25seSBpbiB0d28gY2FzZXMuIDEpIHRoZSBjaGFubmVsIGV4cGxpY2l0bHlcbi8vIGNsb3NlZCBvbiB0aGUgc2VydmVyLCBvciAyKS4gVGhlIGNsaWVudCBleHBsaWNpdGx5IGNsb3NlZCwgYnkgY2FsbGluZ1xuLy8gYGNoYW5uZWwubGVhdmUoKWBcbi8vXG4vL1xuLy8gIyMgUHJlc2VuY2Vcbi8vXG4vLyBUaGUgYFByZXNlbmNlYCBvYmplY3QgcHJvdmlkZXMgZmVhdHVyZXMgZm9yIHN5bmNpbmcgcHJlc2VuY2UgaW5mb3JtYXRpb25cbi8vIGZyb20gdGhlIHNlcnZlciB3aXRoIHRoZSBjbGllbnQgYW5kIGhhbmRsaW5nIHByZXNlbmNlcyBqb2luaW5nIGFuZCBsZWF2aW5nLlxuLy9cbi8vICMjIyBTeW5jaW5nIGluaXRpYWwgc3RhdGUgZnJvbSB0aGUgc2VydmVyXG4vL1xuLy8gYFByZXNlbmNlLnN5bmNTdGF0ZWAgaXMgdXNlZCB0byBzeW5jIHRoZSBsaXN0IG9mIHByZXNlbmNlcyBvbiB0aGUgc2VydmVyXG4vLyB3aXRoIHRoZSBjbGllbnQncyBzdGF0ZS4gQW4gb3B0aW9uYWwgYG9uSm9pbmAgYW5kIGBvbkxlYXZlYCBjYWxsYmFjayBjYW5cbi8vIGJlIHByb3ZpZGVkIHRvIHJlYWN0IHRvIGNoYW5nZXMgaW4gdGhlIGNsaWVudCdzIGxvY2FsIHByZXNlbmNlcyBhY3Jvc3Ncbi8vIGRpc2Nvbm5lY3RzIGFuZCByZWNvbm5lY3RzIHdpdGggdGhlIHNlcnZlci5cbi8vXG4vLyBgUHJlc2VuY2Uuc3luY0RpZmZgIGlzIHVzZWQgdG8gc3luYyBhIGRpZmYgb2YgcHJlc2VuY2Ugam9pbiBhbmQgbGVhdmVcbi8vIGV2ZW50cyBmcm9tIHRoZSBzZXJ2ZXIsIGFzIHRoZXkgaGFwcGVuLiBMaWtlIGBzeW5jU3RhdGVgLCBgc3luY0RpZmZgXG4vLyBhY2NlcHRzIG9wdGlvbmFsIGBvbkpvaW5gIGFuZCBgb25MZWF2ZWAgY2FsbGJhY2tzIHRvIHJlYWN0IHRvIGEgdXNlclxuLy8gam9pbmluZyBvciBsZWF2aW5nIGZyb20gYSBkZXZpY2UuXG4vL1xuLy8gIyMjIExpc3RpbmcgUHJlc2VuY2VzXG4vL1xuLy8gYFByZXNlbmNlLmxpc3RgIGlzIHVzZWQgdG8gcmV0dXJuIGEgbGlzdCBvZiBwcmVzZW5jZSBpbmZvcm1hdGlvblxuLy8gYmFzZWQgb24gdGhlIGxvY2FsIHN0YXRlIG9mIG1ldGFkYXRhLiBCeSBkZWZhdWx0LCBhbGwgcHJlc2VuY2Vcbi8vIG1ldGFkYXRhIGlzIHJldHVybmVkLCBidXQgYSBgbGlzdEJ5YCBmdW5jdGlvbiBjYW4gYmUgc3VwcGxpZWQgdG9cbi8vIGFsbG93IHRoZSBjbGllbnQgdG8gc2VsZWN0IHdoaWNoIG1ldGFkYXRhIHRvIHVzZSBmb3IgYSBnaXZlbiBwcmVzZW5jZS5cbi8vIEZvciBleGFtcGxlLCB5b3UgbWF5IGhhdmUgYSB1c2VyIG9ubGluZSBmcm9tIGRpZmZlcmVudCBkZXZpY2VzIHdpdGggYVxuLy8gYSBtZXRhZGF0YSBzdGF0dXMgb2YgXCJvbmxpbmVcIiwgYnV0IHRoZXkgaGF2ZSBzZXQgdGhlbXNlbHZlcyB0byBcImF3YXlcIlxuLy8gb24gYW5vdGhlciBkZXZpY2UuIEluIHRoaXMgY2FzZSwgdGhleSBhcHAgbWF5IGNob29zZSB0byB1c2UgdGhlIFwiYXdheVwiXG4vLyBzdGF0dXMgZm9yIHdoYXQgYXBwZWFycyBvbiB0aGUgVUkuIFRoZSBleGFtcGxlIGJlbG93IGRlZmluZXMgYSBgbGlzdEJ5YFxuLy8gZnVuY3Rpb24gd2hpY2ggcHJpb3JpdGl6ZXMgdGhlIGZpcnN0IG1ldGFkYXRhIHdoaWNoIHdhcyByZWdpc3RlcmVkIGZvclxuLy8gZWFjaCB1c2VyLiBUaGlzIGNvdWxkIGJlIHRoZSBmaXJzdCB0YWIgdGhleSBvcGVuZWQsIG9yIHRoZSBmaXJzdCBkZXZpY2Vcbi8vIHRoZXkgY2FtZSBvbmxpbmUgZnJvbTpcbi8vXG4vLyAgICAgbGV0IHN0YXRlID0ge31cbi8vICAgICBzdGF0ZSA9IFByZXNlbmNlLnN5bmNTdGF0ZShzdGF0ZSwgc3RhdGVGcm9tU2VydmVyKVxuLy8gICAgIGxldCBsaXN0QnkgPSAoaWQsIHttZXRhczogW2ZpcnN0LCAuLi5yZXN0XX0pID0+IHtcbi8vICAgICAgIGZpcnN0LmNvdW50ID0gcmVzdC5sZW5ndGggKyAxIC8vIGNvdW50IG9mIHRoaXMgdXNlcidzIHByZXNlbmNlc1xuLy8gICAgICAgZmlyc3QuaWQgPSBpZFxuLy8gICAgICAgcmV0dXJuIGZpcnN0XG4vLyAgICAgfVxuLy8gICAgIGxldCBvbmxpbmVVc2VycyA9IFByZXNlbmNlLmxpc3Qoc3RhdGUsIGxpc3RCeSlcbi8vXG4vL1xuLy8gIyMjIEV4YW1wbGUgVXNhZ2Vcbi8vXG4vLyAgICAgLy8gZGV0ZWN0IGlmIHVzZXIgaGFzIGpvaW5lZCBmb3IgdGhlIDFzdCB0aW1lIG9yIGZyb20gYW5vdGhlciB0YWIvZGV2aWNlXG4vLyAgICAgbGV0IG9uSm9pbiA9IChpZCwgY3VycmVudCwgbmV3UHJlcykgPT4ge1xuLy8gICAgICAgaWYoIWN1cnJlbnQpe1xuLy8gICAgICAgICBjb25zb2xlLmxvZyhcInVzZXIgaGFzIGVudGVyZWQgZm9yIHRoZSBmaXJzdCB0aW1lXCIsIG5ld1ByZXMpXG4vLyAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICBjb25zb2xlLmxvZyhcInVzZXIgYWRkaXRpb25hbCBwcmVzZW5jZVwiLCBuZXdQcmVzKVxuLy8gICAgICAgfVxuLy8gICAgIH1cbi8vICAgICAvLyBkZXRlY3QgaWYgdXNlciBoYXMgbGVmdCBmcm9tIGFsbCB0YWJzL2RldmljZXMsIG9yIGlzIHN0aWxsIHByZXNlbnRcbi8vICAgICBsZXQgb25MZWF2ZSA9IChpZCwgY3VycmVudCwgbGVmdFByZXMpID0+IHtcbi8vICAgICAgIGlmKGN1cnJlbnQubWV0YXMubGVuZ3RoID09PSAwKXtcbi8vICAgICAgICAgY29uc29sZS5sb2coXCJ1c2VyIGhhcyBsZWZ0IGZyb20gYWxsIGRldmljZXNcIiwgbGVmdFByZXMpXG4vLyAgICAgICB9IGVsc2Uge1xuLy8gICAgICAgICBjb25zb2xlLmxvZyhcInVzZXIgbGVmdCBmcm9tIGEgZGV2aWNlXCIsIGxlZnRQcmVzKVxuLy8gICAgICAgfVxuLy8gICAgIH1cbi8vICAgICBsZXQgcHJlc2VuY2VzID0ge30gLy8gY2xpZW50J3MgaW5pdGlhbCBlbXB0eSBwcmVzZW5jZSBzdGF0ZVxuLy8gICAgIC8vIHJlY2VpdmUgaW5pdGlhbCBwcmVzZW5jZSBkYXRhIGZyb20gc2VydmVyLCBzZW50IGFmdGVyIGpvaW5cbi8vICAgICBteUNoYW5uZWwub24oXCJwcmVzZW5jZXNcIiwgc3RhdGUgPT4ge1xuLy8gICAgICAgcHJlc2VuY2VzID0gUHJlc2VuY2Uuc3luY1N0YXRlKHByZXNlbmNlcywgc3RhdGUsIG9uSm9pbiwgb25MZWF2ZSlcbi8vICAgICAgIGRpc3BsYXlVc2VycyhQcmVzZW5jZS5saXN0KHByZXNlbmNlcykpXG4vLyAgICAgfSlcbi8vICAgICAvLyByZWNlaXZlIFwicHJlc2VuY2VfZGlmZlwiIGZyb20gc2VydmVyLCBjb250YWluaW5nIGpvaW4vbGVhdmUgZXZlbnRzXG4vLyAgICAgbXlDaGFubmVsLm9uKFwicHJlc2VuY2VfZGlmZlwiLCBkaWZmID0+IHtcbi8vICAgICAgIHByZXNlbmNlcyA9IFByZXNlbmNlLnN5bmNEaWZmKHByZXNlbmNlcywgZGlmZiwgb25Kb2luLCBvbkxlYXZlKVxuLy8gICAgICAgdGhpcy5zZXRTdGF0ZSh7dXNlcnM6IFByZXNlbmNlLmxpc3Qocm9vbS5wcmVzZW5jZXMsIGxpc3RCeSl9KVxuLy8gICAgIH0pXG4vL1xudmFyIFZTTiA9IFwiMS4wLjBcIjtcbnZhciBTT0NLRVRfU1RBVEVTID0geyBjb25uZWN0aW5nOiAwLCBvcGVuOiAxLCBjbG9zaW5nOiAyLCBjbG9zZWQ6IDMgfTtcbnZhciBERUZBVUxUX1RJTUVPVVQgPSAxMDAwMDtcbnZhciBDSEFOTkVMX1NUQVRFUyA9IHtcbiAgY2xvc2VkOiBcImNsb3NlZFwiLFxuICBlcnJvcmVkOiBcImVycm9yZWRcIixcbiAgam9pbmVkOiBcImpvaW5lZFwiLFxuICBqb2luaW5nOiBcImpvaW5pbmdcIixcbiAgbGVhdmluZzogXCJsZWF2aW5nXCJcbn07XG52YXIgQ0hBTk5FTF9FVkVOVFMgPSB7XG4gIGNsb3NlOiBcInBoeF9jbG9zZVwiLFxuICBlcnJvcjogXCJwaHhfZXJyb3JcIixcbiAgam9pbjogXCJwaHhfam9pblwiLFxuICByZXBseTogXCJwaHhfcmVwbHlcIixcbiAgbGVhdmU6IFwicGh4X2xlYXZlXCJcbn07XG52YXIgVFJBTlNQT1JUUyA9IHtcbiAgbG9uZ3BvbGw6IFwibG9uZ3BvbGxcIixcbiAgd2Vic29ja2V0OiBcIndlYnNvY2tldFwiXG59O1xuXG52YXIgUHVzaCA9IGZ1bmN0aW9uICgpIHtcblxuICAvLyBJbml0aWFsaXplcyB0aGUgUHVzaFxuICAvL1xuICAvLyBjaGFubmVsIC0gVGhlIENoYW5uZWxcbiAgLy8gZXZlbnQgLSBUaGUgZXZlbnQsIGZvciBleGFtcGxlIGBcInBoeF9qb2luXCJgXG4gIC8vIHBheWxvYWQgLSBUaGUgcGF5bG9hZCwgZm9yIGV4YW1wbGUgYHt1c2VyX2lkOiAxMjN9YFxuICAvLyB0aW1lb3V0IC0gVGhlIHB1c2ggdGltZW91dCBpbiBtaWxsaXNlY29uZHNcbiAgLy9cblxuICBmdW5jdGlvbiBQdXNoKGNoYW5uZWwsIGV2ZW50LCBwYXlsb2FkLCB0aW1lb3V0KSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFB1c2gpO1xuXG4gICAgdGhpcy5jaGFubmVsID0gY2hhbm5lbDtcbiAgICB0aGlzLmV2ZW50ID0gZXZlbnQ7XG4gICAgdGhpcy5wYXlsb2FkID0gcGF5bG9hZCB8fCB7fTtcbiAgICB0aGlzLnJlY2VpdmVkUmVzcCA9IG51bGw7XG4gICAgdGhpcy50aW1lb3V0ID0gdGltZW91dDtcbiAgICB0aGlzLnRpbWVvdXRUaW1lciA9IG51bGw7XG4gICAgdGhpcy5yZWNIb29rcyA9IFtdO1xuICAgIHRoaXMuc2VudCA9IGZhbHNlO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFB1c2gsIFt7XG4gICAga2V5OiBcInJlc2VuZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXNlbmQodGltZW91dCkge1xuICAgICAgdGhpcy50aW1lb3V0ID0gdGltZW91dDtcbiAgICAgIHRoaXMuY2FuY2VsUmVmRXZlbnQoKTtcbiAgICAgIHRoaXMucmVmID0gbnVsbDtcbiAgICAgIHRoaXMucmVmRXZlbnQgPSBudWxsO1xuICAgICAgdGhpcy5yZWNlaXZlZFJlc3AgPSBudWxsO1xuICAgICAgdGhpcy5zZW50ID0gZmFsc2U7XG4gICAgICB0aGlzLnNlbmQoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2VuZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZW5kKCkge1xuICAgICAgaWYgKHRoaXMuaGFzUmVjZWl2ZWQoXCJ0aW1lb3V0XCIpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhcnRUaW1lb3V0KCk7XG4gICAgICB0aGlzLnNlbnQgPSB0cnVlO1xuICAgICAgdGhpcy5jaGFubmVsLnNvY2tldC5wdXNoKHtcbiAgICAgICAgdG9waWM6IHRoaXMuY2hhbm5lbC50b3BpYyxcbiAgICAgICAgZXZlbnQ6IHRoaXMuZXZlbnQsXG4gICAgICAgIHBheWxvYWQ6IHRoaXMucGF5bG9hZCxcbiAgICAgICAgcmVmOiB0aGlzLnJlZlxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlY2VpdmVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVjZWl2ZShzdGF0dXMsIGNhbGxiYWNrKSB7XG4gICAgICBpZiAodGhpcy5oYXNSZWNlaXZlZChzdGF0dXMpKSB7XG4gICAgICAgIGNhbGxiYWNrKHRoaXMucmVjZWl2ZWRSZXNwLnJlc3BvbnNlKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZWNIb29rcy5wdXNoKHsgc3RhdHVzOiBzdGF0dXMsIGNhbGxiYWNrOiBjYWxsYmFjayB9KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIHByaXZhdGVcblxuICB9LCB7XG4gICAga2V5OiBcIm1hdGNoUmVjZWl2ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtYXRjaFJlY2VpdmUoX3JlZikge1xuICAgICAgdmFyIHN0YXR1cyA9IF9yZWYuc3RhdHVzO1xuICAgICAgdmFyIHJlc3BvbnNlID0gX3JlZi5yZXNwb25zZTtcbiAgICAgIHZhciByZWYgPSBfcmVmLnJlZjtcblxuICAgICAgdGhpcy5yZWNIb29rcy5maWx0ZXIoZnVuY3Rpb24gKGgpIHtcbiAgICAgICAgcmV0dXJuIGguc3RhdHVzID09PSBzdGF0dXM7XG4gICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChoKSB7XG4gICAgICAgIHJldHVybiBoLmNhbGxiYWNrKHJlc3BvbnNlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjYW5jZWxSZWZFdmVudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5jZWxSZWZFdmVudCgpIHtcbiAgICAgIGlmICghdGhpcy5yZWZFdmVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLmNoYW5uZWwub2ZmKHRoaXMucmVmRXZlbnQpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjYW5jZWxUaW1lb3V0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNhbmNlbFRpbWVvdXQoKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0VGltZXIpO1xuICAgICAgdGhpcy50aW1lb3V0VGltZXIgPSBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzdGFydFRpbWVvdXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnRUaW1lb3V0KCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMudGltZW91dFRpbWVyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVmID0gdGhpcy5jaGFubmVsLnNvY2tldC5tYWtlUmVmKCk7XG4gICAgICB0aGlzLnJlZkV2ZW50ID0gdGhpcy5jaGFubmVsLnJlcGx5RXZlbnROYW1lKHRoaXMucmVmKTtcblxuICAgICAgdGhpcy5jaGFubmVsLm9uKHRoaXMucmVmRXZlbnQsIGZ1bmN0aW9uIChwYXlsb2FkKSB7XG4gICAgICAgIF90aGlzLmNhbmNlbFJlZkV2ZW50KCk7XG4gICAgICAgIF90aGlzLmNhbmNlbFRpbWVvdXQoKTtcbiAgICAgICAgX3RoaXMucmVjZWl2ZWRSZXNwID0gcGF5bG9hZDtcbiAgICAgICAgX3RoaXMubWF0Y2hSZWNlaXZlKHBheWxvYWQpO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMudGltZW91dFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzLnRyaWdnZXIoXCJ0aW1lb3V0XCIsIHt9KTtcbiAgICAgIH0sIHRoaXMudGltZW91dCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImhhc1JlY2VpdmVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhc1JlY2VpdmVkKHN0YXR1cykge1xuICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZWRSZXNwICYmIHRoaXMucmVjZWl2ZWRSZXNwLnN0YXR1cyA9PT0gc3RhdHVzO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJ0cmlnZ2VyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRyaWdnZXIoc3RhdHVzLCByZXNwb25zZSkge1xuICAgICAgdGhpcy5jaGFubmVsLnRyaWdnZXIodGhpcy5yZWZFdmVudCwgeyBzdGF0dXM6IHN0YXR1cywgcmVzcG9uc2U6IHJlc3BvbnNlIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQdXNoO1xufSgpO1xuXG52YXIgQ2hhbm5lbCA9IGV4cG9ydHMuQ2hhbm5lbCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQ2hhbm5lbCh0b3BpYywgcGFyYW1zLCBzb2NrZXQpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDaGFubmVsKTtcblxuICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5jbG9zZWQ7XG4gICAgdGhpcy50b3BpYyA9IHRvcGljO1xuICAgIHRoaXMucGFyYW1zID0gcGFyYW1zIHx8IHt9O1xuICAgIHRoaXMuc29ja2V0ID0gc29ja2V0O1xuICAgIHRoaXMuYmluZGluZ3MgPSBbXTtcbiAgICB0aGlzLnRpbWVvdXQgPSB0aGlzLnNvY2tldC50aW1lb3V0O1xuICAgIHRoaXMuam9pbmVkT25jZSA9IGZhbHNlO1xuICAgIHRoaXMuam9pblB1c2ggPSBuZXcgUHVzaCh0aGlzLCBDSEFOTkVMX0VWRU5UUy5qb2luLCB0aGlzLnBhcmFtcywgdGhpcy50aW1lb3V0KTtcbiAgICB0aGlzLnB1c2hCdWZmZXIgPSBbXTtcbiAgICB0aGlzLnJlam9pblRpbWVyID0gbmV3IFRpbWVyKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBfdGhpczIucmVqb2luVW50aWxDb25uZWN0ZWQoKTtcbiAgICB9LCB0aGlzLnNvY2tldC5yZWNvbm5lY3RBZnRlck1zKTtcbiAgICB0aGlzLmpvaW5QdXNoLnJlY2VpdmUoXCJva1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBfdGhpczIuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5qb2luZWQ7XG4gICAgICBfdGhpczIucmVqb2luVGltZXIucmVzZXQoKTtcbiAgICAgIF90aGlzMi5wdXNoQnVmZmVyLmZvckVhY2goZnVuY3Rpb24gKHB1c2hFdmVudCkge1xuICAgICAgICByZXR1cm4gcHVzaEV2ZW50LnNlbmQoKTtcbiAgICAgIH0pO1xuICAgICAgX3RoaXMyLnB1c2hCdWZmZXIgPSBbXTtcbiAgICB9KTtcbiAgICB0aGlzLm9uQ2xvc2UoZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMyLnJlam9pblRpbWVyLnJlc2V0KCk7XG4gICAgICBfdGhpczIuc29ja2V0LmxvZyhcImNoYW5uZWxcIiwgXCJjbG9zZSBcIiArIF90aGlzMi50b3BpYyArIFwiIFwiICsgX3RoaXMyLmpvaW5SZWYoKSk7XG4gICAgICBfdGhpczIuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5jbG9zZWQ7XG4gICAgICBfdGhpczIuc29ja2V0LnJlbW92ZShfdGhpczIpO1xuICAgIH0pO1xuICAgIHRoaXMub25FcnJvcihmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICBpZiAoX3RoaXMyLmlzTGVhdmluZygpIHx8IF90aGlzMi5pc0Nsb3NlZCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIF90aGlzMi5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLCBcImVycm9yIFwiICsgX3RoaXMyLnRvcGljLCByZWFzb24pO1xuICAgICAgX3RoaXMyLnN0YXRlID0gQ0hBTk5FTF9TVEFURVMuZXJyb3JlZDtcbiAgICAgIF90aGlzMi5yZWpvaW5UaW1lci5zY2hlZHVsZVRpbWVvdXQoKTtcbiAgICB9KTtcbiAgICB0aGlzLmpvaW5QdXNoLnJlY2VpdmUoXCJ0aW1lb3V0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghX3RoaXMyLmlzSm9pbmluZygpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIF90aGlzMi5zb2NrZXQubG9nKFwiY2hhbm5lbFwiLCBcInRpbWVvdXQgXCIgKyBfdGhpczIudG9waWMsIF90aGlzMi5qb2luUHVzaC50aW1lb3V0KTtcbiAgICAgIF90aGlzMi5zdGF0ZSA9IENIQU5ORUxfU1RBVEVTLmVycm9yZWQ7XG4gICAgICBfdGhpczIucmVqb2luVGltZXIuc2NoZWR1bGVUaW1lb3V0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5vbihDSEFOTkVMX0VWRU5UUy5yZXBseSwgZnVuY3Rpb24gKHBheWxvYWQsIHJlZikge1xuICAgICAgX3RoaXMyLnRyaWdnZXIoX3RoaXMyLnJlcGx5RXZlbnROYW1lKHJlZiksIHBheWxvYWQpO1xuICAgIH0pO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKENoYW5uZWwsIFt7XG4gICAga2V5OiBcInJlam9pblVudGlsQ29ubmVjdGVkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlam9pblVudGlsQ29ubmVjdGVkKCkge1xuICAgICAgdGhpcy5yZWpvaW5UaW1lci5zY2hlZHVsZVRpbWVvdXQoKTtcbiAgICAgIGlmICh0aGlzLnNvY2tldC5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICAgIHRoaXMucmVqb2luKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImpvaW5cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gam9pbigpIHtcbiAgICAgIHZhciB0aW1lb3V0ID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8gdGhpcy50aW1lb3V0IDogYXJndW1lbnRzWzBdO1xuXG4gICAgICBpZiAodGhpcy5qb2luZWRPbmNlKSB7XG4gICAgICAgIHRocm93IFwidHJpZWQgdG8gam9pbiBtdWx0aXBsZSB0aW1lcy4gJ2pvaW4nIGNhbiBvbmx5IGJlIGNhbGxlZCBhIHNpbmdsZSB0aW1lIHBlciBjaGFubmVsIGluc3RhbmNlXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmpvaW5lZE9uY2UgPSB0cnVlO1xuICAgICAgICB0aGlzLnJlam9pbih0aW1lb3V0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuam9pblB1c2g7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uQ2xvc2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25DbG9zZShjYWxsYmFjaykge1xuICAgICAgdGhpcy5vbihDSEFOTkVMX0VWRU5UUy5jbG9zZSwgY2FsbGJhY2spO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkVycm9yXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uRXJyb3IoY2FsbGJhY2spIHtcbiAgICAgIHRoaXMub24oQ0hBTk5FTF9FVkVOVFMuZXJyb3IsIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHJlYXNvbik7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb24oZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLmJpbmRpbmdzLnB1c2goeyBldmVudDogZXZlbnQsIGNhbGxiYWNrOiBjYWxsYmFjayB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib2ZmXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9mZihldmVudCkge1xuICAgICAgdGhpcy5iaW5kaW5ncyA9IHRoaXMuYmluZGluZ3MuZmlsdGVyKGZ1bmN0aW9uIChiaW5kKSB7XG4gICAgICAgIHJldHVybiBiaW5kLmV2ZW50ICE9PSBldmVudDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjYW5QdXNoXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNhblB1c2goKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb2NrZXQuaXNDb25uZWN0ZWQoKSAmJiB0aGlzLmlzSm9pbmVkKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInB1c2hcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcHVzaChldmVudCwgcGF5bG9hZCkge1xuICAgICAgdmFyIHRpbWVvdXQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyB0aGlzLnRpbWVvdXQgOiBhcmd1bWVudHNbMl07XG5cbiAgICAgIGlmICghdGhpcy5qb2luZWRPbmNlKSB7XG4gICAgICAgIHRocm93IFwidHJpZWQgdG8gcHVzaCAnXCIgKyBldmVudCArIFwiJyB0byAnXCIgKyB0aGlzLnRvcGljICsgXCInIGJlZm9yZSBqb2luaW5nLiBVc2UgY2hhbm5lbC5qb2luKCkgYmVmb3JlIHB1c2hpbmcgZXZlbnRzXCI7XG4gICAgICB9XG4gICAgICB2YXIgcHVzaEV2ZW50ID0gbmV3IFB1c2godGhpcywgZXZlbnQsIHBheWxvYWQsIHRpbWVvdXQpO1xuICAgICAgaWYgKHRoaXMuY2FuUHVzaCgpKSB7XG4gICAgICAgIHB1c2hFdmVudC5zZW5kKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwdXNoRXZlbnQuc3RhcnRUaW1lb3V0KCk7XG4gICAgICAgIHRoaXMucHVzaEJ1ZmZlci5wdXNoKHB1c2hFdmVudCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwdXNoRXZlbnQ7XG4gICAgfVxuXG4gICAgLy8gTGVhdmVzIHRoZSBjaGFubmVsXG4gICAgLy9cbiAgICAvLyBVbnN1YnNjcmliZXMgZnJvbSBzZXJ2ZXIgZXZlbnRzLCBhbmRcbiAgICAvLyBpbnN0cnVjdHMgY2hhbm5lbCB0byB0ZXJtaW5hdGUgb24gc2VydmVyXG4gICAgLy9cbiAgICAvLyBUcmlnZ2VycyBvbkNsb3NlKCkgaG9va3NcbiAgICAvL1xuICAgIC8vIFRvIHJlY2VpdmUgbGVhdmUgYWNrbm93bGVkZ2VtZW50cywgdXNlIHRoZSBhIGByZWNlaXZlYFxuICAgIC8vIGhvb2sgdG8gYmluZCB0byB0aGUgc2VydmVyIGFjaywgaWU6XG4gICAgLy9cbiAgICAvLyAgICAgY2hhbm5lbC5sZWF2ZSgpLnJlY2VpdmUoXCJva1wiLCAoKSA9PiBhbGVydChcImxlZnQhXCIpIClcbiAgICAvL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwibGVhdmVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbGVhdmUoKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIHRpbWVvdXQgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB0aGlzLnRpbWVvdXQgOiBhcmd1bWVudHNbMF07XG5cbiAgICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5sZWF2aW5nO1xuICAgICAgdmFyIG9uQ2xvc2UgPSBmdW5jdGlvbiBvbkNsb3NlKCkge1xuICAgICAgICBfdGhpczMuc29ja2V0LmxvZyhcImNoYW5uZWxcIiwgXCJsZWF2ZSBcIiArIF90aGlzMy50b3BpYyk7XG4gICAgICAgIF90aGlzMy50cmlnZ2VyKENIQU5ORUxfRVZFTlRTLmNsb3NlLCBcImxlYXZlXCIsIF90aGlzMy5qb2luUmVmKCkpO1xuICAgICAgfTtcbiAgICAgIHZhciBsZWF2ZVB1c2ggPSBuZXcgUHVzaCh0aGlzLCBDSEFOTkVMX0VWRU5UUy5sZWF2ZSwge30sIHRpbWVvdXQpO1xuICAgICAgbGVhdmVQdXNoLnJlY2VpdmUoXCJva1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBvbkNsb3NlKCk7XG4gICAgICB9KS5yZWNlaXZlKFwidGltZW91dFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBvbkNsb3NlKCk7XG4gICAgICB9KTtcbiAgICAgIGxlYXZlUHVzaC5zZW5kKCk7XG4gICAgICBpZiAoIXRoaXMuY2FuUHVzaCgpKSB7XG4gICAgICAgIGxlYXZlUHVzaC50cmlnZ2VyKFwib2tcIiwge30pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbGVhdmVQdXNoO1xuICAgIH1cblxuICAgIC8vIE92ZXJyaWRhYmxlIG1lc3NhZ2UgaG9va1xuICAgIC8vXG4gICAgLy8gUmVjZWl2ZXMgYWxsIGV2ZW50cyBmb3Igc3BlY2lhbGl6ZWQgbWVzc2FnZSBoYW5kbGluZ1xuICAgIC8vIGJlZm9yZSBkaXNwYXRjaGluZyB0byB0aGUgY2hhbm5lbCBjYWxsYmFja3MuXG4gICAgLy9cbiAgICAvLyBNdXN0IHJldHVybiB0aGUgcGF5bG9hZCwgbW9kaWZpZWQgb3IgdW5tb2RpZmllZFxuXG4gIH0sIHtcbiAgICBrZXk6IFwib25NZXNzYWdlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uTWVzc2FnZShldmVudCwgcGF5bG9hZCwgcmVmKSB7XG4gICAgICByZXR1cm4gcGF5bG9hZDtcbiAgICB9XG5cbiAgICAvLyBwcml2YXRlXG5cbiAgfSwge1xuICAgIGtleTogXCJpc01lbWJlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc01lbWJlcih0b3BpYykge1xuICAgICAgcmV0dXJuIHRoaXMudG9waWMgPT09IHRvcGljO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJqb2luUmVmXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGpvaW5SZWYoKSB7XG4gICAgICByZXR1cm4gdGhpcy5qb2luUHVzaC5yZWY7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNlbmRKb2luXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlbmRKb2luKHRpbWVvdXQpIHtcbiAgICAgIHRoaXMuc3RhdGUgPSBDSEFOTkVMX1NUQVRFUy5qb2luaW5nO1xuICAgICAgdGhpcy5qb2luUHVzaC5yZXNlbmQodGltZW91dCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlam9pblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZWpvaW4oKSB7XG4gICAgICB2YXIgdGltZW91dCA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHRoaXMudGltZW91dCA6IGFyZ3VtZW50c1swXTtcbiAgICAgIGlmICh0aGlzLmlzTGVhdmluZygpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2VuZEpvaW4odGltZW91dCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInRyaWdnZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdHJpZ2dlcihldmVudCwgcGF5bG9hZCwgcmVmKSB7XG4gICAgICB2YXIgY2xvc2UgPSBDSEFOTkVMX0VWRU5UUy5jbG9zZTtcbiAgICAgIHZhciBlcnJvciA9IENIQU5ORUxfRVZFTlRTLmVycm9yO1xuICAgICAgdmFyIGxlYXZlID0gQ0hBTk5FTF9FVkVOVFMubGVhdmU7XG4gICAgICB2YXIgam9pbiA9IENIQU5ORUxfRVZFTlRTLmpvaW47XG5cbiAgICAgIGlmIChyZWYgJiYgW2Nsb3NlLCBlcnJvciwgbGVhdmUsIGpvaW5dLmluZGV4T2YoZXZlbnQpID49IDAgJiYgcmVmICE9PSB0aGlzLmpvaW5SZWYoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgaGFuZGxlZFBheWxvYWQgPSB0aGlzLm9uTWVzc2FnZShldmVudCwgcGF5bG9hZCwgcmVmKTtcbiAgICAgIGlmIChwYXlsb2FkICYmICFoYW5kbGVkUGF5bG9hZCkge1xuICAgICAgICB0aHJvdyBcImNoYW5uZWwgb25NZXNzYWdlIGNhbGxiYWNrcyBtdXN0IHJldHVybiB0aGUgcGF5bG9hZCwgbW9kaWZpZWQgb3IgdW5tb2RpZmllZFwiO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmJpbmRpbmdzLmZpbHRlcihmdW5jdGlvbiAoYmluZCkge1xuICAgICAgICByZXR1cm4gYmluZC5ldmVudCA9PT0gZXZlbnQ7XG4gICAgICB9KS5tYXAoZnVuY3Rpb24gKGJpbmQpIHtcbiAgICAgICAgcmV0dXJuIGJpbmQuY2FsbGJhY2soaGFuZGxlZFBheWxvYWQsIHJlZik7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVwbHlFdmVudE5hbWVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVwbHlFdmVudE5hbWUocmVmKSB7XG4gICAgICByZXR1cm4gXCJjaGFuX3JlcGx5X1wiICsgcmVmO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc0Nsb3NlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc0Nsb3NlZCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnN0YXRlID09PSBDSEFOTkVMX1NUQVRFUy5jbG9zZWQ7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzRXJyb3JlZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc0Vycm9yZWQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMuZXJyb3JlZDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNKb2luZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNKb2luZWQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMuam9pbmVkO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJpc0pvaW5pbmdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNKb2luaW5nKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RhdGUgPT09IENIQU5ORUxfU1RBVEVTLmpvaW5pbmc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImlzTGVhdmluZ1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpc0xlYXZpbmcoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdGF0ZSA9PT0gQ0hBTk5FTF9TVEFURVMubGVhdmluZztcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gQ2hhbm5lbDtcbn0oKTtcblxudmFyIFNvY2tldCA9IGV4cG9ydHMuU29ja2V0ID0gZnVuY3Rpb24gKCkge1xuXG4gIC8vIEluaXRpYWxpemVzIHRoZSBTb2NrZXRcbiAgLy9cbiAgLy8gZW5kUG9pbnQgLSBUaGUgc3RyaW5nIFdlYlNvY2tldCBlbmRwb2ludCwgaWUsIFwid3M6Ly9leGFtcGxlLmNvbS93c1wiLFxuICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ3c3M6Ly9leGFtcGxlLmNvbVwiXG4gIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi93c1wiIChpbmhlcml0ZWQgaG9zdCAmIHByb3RvY29sKVxuICAvLyBvcHRzIC0gT3B0aW9uYWwgY29uZmlndXJhdGlvblxuICAvLyAgIHRyYW5zcG9ydCAtIFRoZSBXZWJzb2NrZXQgVHJhbnNwb3J0LCBmb3IgZXhhbXBsZSBXZWJTb2NrZXQgb3IgUGhvZW5peC5Mb25nUG9sbC5cbiAgLy8gICAgICAgICAgICAgICBEZWZhdWx0cyB0byBXZWJTb2NrZXQgd2l0aCBhdXRvbWF0aWMgTG9uZ1BvbGwgZmFsbGJhY2suXG4gIC8vICAgdGltZW91dCAtIFRoZSBkZWZhdWx0IHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzIHRvIHRyaWdnZXIgcHVzaCB0aW1lb3V0cy5cbiAgLy8gICAgICAgICAgICAgRGVmYXVsdHMgYERFRkFVTFRfVElNRU9VVGBcbiAgLy8gICBoZWFydGJlYXRJbnRlcnZhbE1zIC0gVGhlIG1pbGxpc2VjIGludGVydmFsIHRvIHNlbmQgYSBoZWFydGJlYXQgbWVzc2FnZVxuICAvLyAgIHJlY29ubmVjdEFmdGVyTXMgLSBUaGUgb3B0aW9uYWwgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtaWxsc2VjXG4gIC8vICAgICAgICAgICAgICAgICAgICAgIHJlY29ubmVjdCBpbnRlcnZhbC4gRGVmYXVsdHMgdG8gc3RlcHBlZCBiYWNrb2ZmIG9mOlxuICAvL1xuICAvLyAgICAgZnVuY3Rpb24odHJpZXMpe1xuICAvLyAgICAgICByZXR1cm4gWzEwMDAsIDUwMDAsIDEwMDAwXVt0cmllcyAtIDFdIHx8IDEwMDAwXG4gIC8vICAgICB9XG4gIC8vXG4gIC8vICAgbG9nZ2VyIC0gVGhlIG9wdGlvbmFsIGZ1bmN0aW9uIGZvciBzcGVjaWFsaXplZCBsb2dnaW5nLCBpZTpcbiAgLy8gICAgIGBsb2dnZXI6IChraW5kLCBtc2csIGRhdGEpID0+IHsgY29uc29sZS5sb2coYCR7a2luZH06ICR7bXNnfWAsIGRhdGEpIH1cbiAgLy9cbiAgLy8gICBsb25ncG9sbGVyVGltZW91dCAtIFRoZSBtYXhpbXVtIHRpbWVvdXQgb2YgYSBsb25nIHBvbGwgQUpBWCByZXF1ZXN0LlxuICAvLyAgICAgICAgICAgICAgICAgICAgICAgIERlZmF1bHRzIHRvIDIwcyAoZG91YmxlIHRoZSBzZXJ2ZXIgbG9uZyBwb2xsIHRpbWVyKS5cbiAgLy9cbiAgLy8gICBwYXJhbXMgLSBUaGUgb3B0aW9uYWwgcGFyYW1zIHRvIHBhc3Mgd2hlbiBjb25uZWN0aW5nXG4gIC8vXG4gIC8vIEZvciBJRTggc3VwcG9ydCB1c2UgYW4gRVM1LXNoaW0gKGh0dHBzOi8vZ2l0aHViLmNvbS9lcy1zaGltcy9lczUtc2hpbSlcbiAgLy9cblxuICBmdW5jdGlvbiBTb2NrZXQoZW5kUG9pbnQpIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgIHZhciBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA8PSAxIHx8IGFyZ3VtZW50c1sxXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMV07XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU29ja2V0KTtcblxuICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MgPSB7IG9wZW46IFtdLCBjbG9zZTogW10sIGVycm9yOiBbXSwgbWVzc2FnZTogW10gfTtcbiAgICB0aGlzLmNoYW5uZWxzID0gW107XG4gICAgdGhpcy5zZW5kQnVmZmVyID0gW107XG4gICAgdGhpcy5yZWYgPSAwO1xuICAgIHRoaXMudGltZW91dCA9IG9wdHMudGltZW91dCB8fCBERUZBVUxUX1RJTUVPVVQ7XG4gICAgdGhpcy50cmFuc3BvcnQgPSBvcHRzLnRyYW5zcG9ydCB8fCB3aW5kb3cuV2ViU29ja2V0IHx8IExvbmdQb2xsO1xuICAgIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWxNcyA9IG9wdHMuaGVhcnRiZWF0SW50ZXJ2YWxNcyB8fCAzMDAwMDtcbiAgICB0aGlzLnJlY29ubmVjdEFmdGVyTXMgPSBvcHRzLnJlY29ubmVjdEFmdGVyTXMgfHwgZnVuY3Rpb24gKHRyaWVzKSB7XG4gICAgICByZXR1cm4gWzEwMDAsIDIwMDAsIDUwMDAsIDEwMDAwXVt0cmllcyAtIDFdIHx8IDEwMDAwO1xuICAgIH07XG4gICAgdGhpcy5sb2dnZXIgPSBvcHRzLmxvZ2dlciB8fCBmdW5jdGlvbiAoKSB7fTsgLy8gbm9vcFxuICAgIHRoaXMubG9uZ3BvbGxlclRpbWVvdXQgPSBvcHRzLmxvbmdwb2xsZXJUaW1lb3V0IHx8IDIwMDAwO1xuICAgIHRoaXMucGFyYW1zID0gb3B0cy5wYXJhbXMgfHwge307XG4gICAgdGhpcy5lbmRQb2ludCA9IGVuZFBvaW50ICsgXCIvXCIgKyBUUkFOU1BPUlRTLndlYnNvY2tldDtcbiAgICB0aGlzLnJlY29ubmVjdFRpbWVyID0gbmV3IFRpbWVyKGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzNC5kaXNjb25uZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzNC5jb25uZWN0KCk7XG4gICAgICB9KTtcbiAgICB9LCB0aGlzLnJlY29ubmVjdEFmdGVyTXMpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFNvY2tldCwgW3tcbiAgICBrZXk6IFwicHJvdG9jb2xcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvdG9jb2woKSB7XG4gICAgICByZXR1cm4gbG9jYXRpb24ucHJvdG9jb2wubWF0Y2goL15odHRwcy8pID8gXCJ3c3NcIiA6IFwid3NcIjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZW5kUG9pbnRVUkxcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kUG9pbnRVUkwoKSB7XG4gICAgICB2YXIgdXJpID0gQWpheC5hcHBlbmRQYXJhbXMoQWpheC5hcHBlbmRQYXJhbXModGhpcy5lbmRQb2ludCwgdGhpcy5wYXJhbXMpLCB7IHZzbjogVlNOIH0pO1xuICAgICAgaWYgKHVyaS5jaGFyQXQoMCkgIT09IFwiL1wiKSB7XG4gICAgICAgIHJldHVybiB1cmk7XG4gICAgICB9XG4gICAgICBpZiAodXJpLmNoYXJBdCgxKSA9PT0gXCIvXCIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvdG9jb2woKSArIFwiOlwiICsgdXJpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5wcm90b2NvbCgpICsgXCI6Ly9cIiArIGxvY2F0aW9uLmhvc3QgKyB1cmk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImRpc2Nvbm5lY3RcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzY29ubmVjdChjYWxsYmFjaywgY29kZSwgcmVhc29uKSB7XG4gICAgICBpZiAodGhpcy5jb25uKSB7XG4gICAgICAgIHRoaXMuY29ubi5vbmNsb3NlID0gZnVuY3Rpb24gKCkge307IC8vIG5vb3BcbiAgICAgICAgaWYgKGNvZGUpIHtcbiAgICAgICAgICB0aGlzLmNvbm4uY2xvc2UoY29kZSwgcmVhc29uIHx8IFwiXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuY29ubi5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29ubiA9IG51bGw7XG4gICAgICB9XG4gICAgICBjYWxsYmFjayAmJiBjYWxsYmFjaygpO1xuICAgIH1cblxuICAgIC8vIHBhcmFtcyAtIFRoZSBwYXJhbXMgdG8gc2VuZCB3aGVuIGNvbm5lY3RpbmcsIGZvciBleGFtcGxlIGB7dXNlcl9pZDogdXNlclRva2VufWBcblxuICB9LCB7XG4gICAga2V5OiBcImNvbm5lY3RcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29ubmVjdChwYXJhbXMpIHtcbiAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICBpZiAocGFyYW1zKSB7XG4gICAgICAgIGNvbnNvbGUgJiYgY29uc29sZS5sb2coXCJwYXNzaW5nIHBhcmFtcyB0byBjb25uZWN0IGlzIGRlcHJlY2F0ZWQuIEluc3RlYWQgcGFzcyA6cGFyYW1zIHRvIHRoZSBTb2NrZXQgY29uc3RydWN0b3JcIik7XG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY29ubikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY29ubiA9IG5ldyB0aGlzLnRyYW5zcG9ydCh0aGlzLmVuZFBvaW50VVJMKCkpO1xuICAgICAgdGhpcy5jb25uLnRpbWVvdXQgPSB0aGlzLmxvbmdwb2xsZXJUaW1lb3V0O1xuICAgICAgdGhpcy5jb25uLm9ub3BlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzNS5vbkNvbm5PcGVuKCk7XG4gICAgICB9O1xuICAgICAgdGhpcy5jb25uLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzNS5vbkNvbm5FcnJvcihlcnJvcik7XG4gICAgICB9O1xuICAgICAgdGhpcy5jb25uLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICByZXR1cm4gX3RoaXM1Lm9uQ29ubk1lc3NhZ2UoZXZlbnQpO1xuICAgICAgfTtcbiAgICAgIHRoaXMuY29ubi5vbmNsb3NlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHJldHVybiBfdGhpczUub25Db25uQ2xvc2UoZXZlbnQpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBMb2dzIHRoZSBtZXNzYWdlLiBPdmVycmlkZSBgdGhpcy5sb2dnZXJgIGZvciBzcGVjaWFsaXplZCBsb2dnaW5nLiBub29wcyBieSBkZWZhdWx0XG5cbiAgfSwge1xuICAgIGtleTogXCJsb2dcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbG9nKGtpbmQsIG1zZywgZGF0YSkge1xuICAgICAgdGhpcy5sb2dnZXIoa2luZCwgbXNnLCBkYXRhKTtcbiAgICB9XG5cbiAgICAvLyBSZWdpc3RlcnMgY2FsbGJhY2tzIGZvciBjb25uZWN0aW9uIHN0YXRlIGNoYW5nZSBldmVudHNcbiAgICAvL1xuICAgIC8vIEV4YW1wbGVzXG4gICAgLy9cbiAgICAvLyAgICBzb2NrZXQub25FcnJvcihmdW5jdGlvbihlcnJvcil7IGFsZXJ0KFwiQW4gZXJyb3Igb2NjdXJyZWRcIikgfSlcbiAgICAvL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwib25PcGVuXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uT3BlbihjYWxsYmFjaykge1xuICAgICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5vcGVuLnB1c2goY2FsbGJhY2spO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkNsb3NlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2xvc2UoY2FsbGJhY2spIHtcbiAgICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MuY2xvc2UucHVzaChjYWxsYmFjayk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uRXJyb3JcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25FcnJvcihjYWxsYmFjaykge1xuICAgICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5lcnJvci5wdXNoKGNhbGxiYWNrKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25NZXNzYWdlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uTWVzc2FnZShjYWxsYmFjaykge1xuICAgICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5tZXNzYWdlLnB1c2goY2FsbGJhY2spO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvbkNvbm5PcGVuXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ29ubk9wZW4oKSB7XG4gICAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgICAgdGhpcy5sb2coXCJ0cmFuc3BvcnRcIiwgXCJjb25uZWN0ZWQgdG8gXCIgKyB0aGlzLmVuZFBvaW50VVJMKCksIHRoaXMudHJhbnNwb3J0LnByb3RvdHlwZSk7XG4gICAgICB0aGlzLmZsdXNoU2VuZEJ1ZmZlcigpO1xuICAgICAgdGhpcy5yZWNvbm5lY3RUaW1lci5yZXNldCgpO1xuICAgICAgaWYgKCF0aGlzLmNvbm4uc2tpcEhlYXJ0YmVhdCkge1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaGVhcnRiZWF0VGltZXIpO1xuICAgICAgICB0aGlzLmhlYXJ0YmVhdFRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczYuc2VuZEhlYXJ0YmVhdCgpO1xuICAgICAgICB9LCB0aGlzLmhlYXJ0YmVhdEludGVydmFsTXMpO1xuICAgICAgfVxuICAgICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5vcGVuLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjaygpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uQ29ubkNsb3NlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ29ubkNsb3NlKGV2ZW50KSB7XG4gICAgICB0aGlzLmxvZyhcInRyYW5zcG9ydFwiLCBcImNsb3NlXCIsIGV2ZW50KTtcbiAgICAgIHRoaXMudHJpZ2dlckNoYW5FcnJvcigpO1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmhlYXJ0YmVhdFRpbWVyKTtcbiAgICAgIHRoaXMucmVjb25uZWN0VGltZXIuc2NoZWR1bGVUaW1lb3V0KCk7XG4gICAgICB0aGlzLnN0YXRlQ2hhbmdlQ2FsbGJhY2tzLmNsb3NlLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhldmVudCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib25Db25uRXJyb3JcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Db25uRXJyb3IoZXJyb3IpIHtcbiAgICAgIHRoaXMubG9nKFwidHJhbnNwb3J0XCIsIGVycm9yKTtcbiAgICAgIHRoaXMudHJpZ2dlckNoYW5FcnJvcigpO1xuICAgICAgdGhpcy5zdGF0ZUNoYW5nZUNhbGxiYWNrcy5lcnJvci5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyb3IpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInRyaWdnZXJDaGFuRXJyb3JcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdHJpZ2dlckNoYW5FcnJvcigpIHtcbiAgICAgIHRoaXMuY2hhbm5lbHMuZm9yRWFjaChmdW5jdGlvbiAoY2hhbm5lbCkge1xuICAgICAgICByZXR1cm4gY2hhbm5lbC50cmlnZ2VyKENIQU5ORUxfRVZFTlRTLmVycm9yKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjb25uZWN0aW9uU3RhdGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY29ubmVjdGlvblN0YXRlKCkge1xuICAgICAgc3dpdGNoICh0aGlzLmNvbm4gJiYgdGhpcy5jb25uLnJlYWR5U3RhdGUpIHtcbiAgICAgICAgY2FzZSBTT0NLRVRfU1RBVEVTLmNvbm5lY3Rpbmc6XG4gICAgICAgICAgcmV0dXJuIFwiY29ubmVjdGluZ1wiO1xuICAgICAgICBjYXNlIFNPQ0tFVF9TVEFURVMub3BlbjpcbiAgICAgICAgICByZXR1cm4gXCJvcGVuXCI7XG4gICAgICAgIGNhc2UgU09DS0VUX1NUQVRFUy5jbG9zaW5nOlxuICAgICAgICAgIHJldHVybiBcImNsb3NpbmdcIjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gXCJjbG9zZWRcIjtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaXNDb25uZWN0ZWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNDb25uZWN0ZWQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uU3RhdGUoKSA9PT0gXCJvcGVuXCI7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbW92ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoY2hhbm5lbCkge1xuICAgICAgdGhpcy5jaGFubmVscyA9IHRoaXMuY2hhbm5lbHMuZmlsdGVyKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgIHJldHVybiBjLmpvaW5SZWYoKSAhPT0gY2hhbm5lbC5qb2luUmVmKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY2hhbm5lbFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjaGFubmVsKHRvcGljKSB7XG4gICAgICB2YXIgY2hhblBhcmFtcyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzFdO1xuXG4gICAgICB2YXIgY2hhbiA9IG5ldyBDaGFubmVsKHRvcGljLCBjaGFuUGFyYW1zLCB0aGlzKTtcbiAgICAgIHRoaXMuY2hhbm5lbHMucHVzaChjaGFuKTtcbiAgICAgIHJldHVybiBjaGFuO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJwdXNoXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHB1c2goZGF0YSkge1xuICAgICAgdmFyIF90aGlzNyA9IHRoaXM7XG5cbiAgICAgIHZhciB0b3BpYyA9IGRhdGEudG9waWM7XG4gICAgICB2YXIgZXZlbnQgPSBkYXRhLmV2ZW50O1xuICAgICAgdmFyIHBheWxvYWQgPSBkYXRhLnBheWxvYWQ7XG4gICAgICB2YXIgcmVmID0gZGF0YS5yZWY7XG5cbiAgICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uIGNhbGxiYWNrKCkge1xuICAgICAgICByZXR1cm4gX3RoaXM3LmNvbm4uc2VuZChKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgICB9O1xuICAgICAgdGhpcy5sb2coXCJwdXNoXCIsIHRvcGljICsgXCIgXCIgKyBldmVudCArIFwiIChcIiArIHJlZiArIFwiKVwiLCBwYXlsb2FkKTtcbiAgICAgIGlmICh0aGlzLmlzQ29ubmVjdGVkKCkpIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2VuZEJ1ZmZlci5wdXNoKGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdGhlIG5leHQgbWVzc2FnZSByZWYsIGFjY291bnRpbmcgZm9yIG92ZXJmbG93c1xuXG4gIH0sIHtcbiAgICBrZXk6IFwibWFrZVJlZlwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtYWtlUmVmKCkge1xuICAgICAgdmFyIG5ld1JlZiA9IHRoaXMucmVmICsgMTtcbiAgICAgIGlmIChuZXdSZWYgPT09IHRoaXMucmVmKSB7XG4gICAgICAgIHRoaXMucmVmID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVmID0gbmV3UmVmO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5yZWYudG9TdHJpbmcoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2VuZEhlYXJ0YmVhdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZW5kSGVhcnRiZWF0KCkge1xuICAgICAgaWYgKCF0aGlzLmlzQ29ubmVjdGVkKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5wdXNoKHsgdG9waWM6IFwicGhvZW5peFwiLCBldmVudDogXCJoZWFydGJlYXRcIiwgcGF5bG9hZDoge30sIHJlZjogdGhpcy5tYWtlUmVmKCkgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImZsdXNoU2VuZEJ1ZmZlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmbHVzaFNlbmRCdWZmZXIoKSB7XG4gICAgICBpZiAodGhpcy5pc0Nvbm5lY3RlZCgpICYmIHRoaXMuc2VuZEJ1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuc2VuZEJ1ZmZlci5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgIHJldHVybiBjYWxsYmFjaygpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZW5kQnVmZmVyID0gW107XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm9uQ29ubk1lc3NhZ2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Db25uTWVzc2FnZShyYXdNZXNzYWdlKSB7XG4gICAgICB2YXIgbXNnID0gSlNPTi5wYXJzZShyYXdNZXNzYWdlLmRhdGEpO1xuICAgICAgdmFyIHRvcGljID0gbXNnLnRvcGljO1xuICAgICAgdmFyIGV2ZW50ID0gbXNnLmV2ZW50O1xuICAgICAgdmFyIHBheWxvYWQgPSBtc2cucGF5bG9hZDtcbiAgICAgIHZhciByZWYgPSBtc2cucmVmO1xuXG4gICAgICB0aGlzLmxvZyhcInJlY2VpdmVcIiwgKHBheWxvYWQuc3RhdHVzIHx8IFwiXCIpICsgXCIgXCIgKyB0b3BpYyArIFwiIFwiICsgZXZlbnQgKyBcIiBcIiArIChyZWYgJiYgXCIoXCIgKyByZWYgKyBcIilcIiB8fCBcIlwiKSwgcGF5bG9hZCk7XG4gICAgICB0aGlzLmNoYW5uZWxzLmZpbHRlcihmdW5jdGlvbiAoY2hhbm5lbCkge1xuICAgICAgICByZXR1cm4gY2hhbm5lbC5pc01lbWJlcih0b3BpYyk7XG4gICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChjaGFubmVsKSB7XG4gICAgICAgIHJldHVybiBjaGFubmVsLnRyaWdnZXIoZXZlbnQsIHBheWxvYWQsIHJlZik7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuc3RhdGVDaGFuZ2VDYWxsYmFja3MubWVzc2FnZS5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sobXNnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTb2NrZXQ7XG59KCk7XG5cbnZhciBMb25nUG9sbCA9IGV4cG9ydHMuTG9uZ1BvbGwgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIExvbmdQb2xsKGVuZFBvaW50KSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExvbmdQb2xsKTtcblxuICAgIHRoaXMuZW5kUG9pbnQgPSBudWxsO1xuICAgIHRoaXMudG9rZW4gPSBudWxsO1xuICAgIHRoaXMuc2tpcEhlYXJ0YmVhdCA9IHRydWU7XG4gICAgdGhpcy5vbm9wZW4gPSBmdW5jdGlvbiAoKSB7fTsgLy8gbm9vcFxuICAgIHRoaXMub25lcnJvciA9IGZ1bmN0aW9uICgpIHt9OyAvLyBub29wXG4gICAgdGhpcy5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7fTsgLy8gbm9vcFxuICAgIHRoaXMub25jbG9zZSA9IGZ1bmN0aW9uICgpIHt9OyAvLyBub29wXG4gICAgdGhpcy5wb2xsRW5kcG9pbnQgPSB0aGlzLm5vcm1hbGl6ZUVuZHBvaW50KGVuZFBvaW50KTtcbiAgICB0aGlzLnJlYWR5U3RhdGUgPSBTT0NLRVRfU1RBVEVTLmNvbm5lY3Rpbmc7XG5cbiAgICB0aGlzLnBvbGwoKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhMb25nUG9sbCwgW3tcbiAgICBrZXk6IFwibm9ybWFsaXplRW5kcG9pbnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbm9ybWFsaXplRW5kcG9pbnQoZW5kUG9pbnQpIHtcbiAgICAgIHJldHVybiBlbmRQb2ludC5yZXBsYWNlKFwid3M6Ly9cIiwgXCJodHRwOi8vXCIpLnJlcGxhY2UoXCJ3c3M6Ly9cIiwgXCJodHRwczovL1wiKS5yZXBsYWNlKG5ldyBSZWdFeHAoXCIoLiopXFwvXCIgKyBUUkFOU1BPUlRTLndlYnNvY2tldCksIFwiJDEvXCIgKyBUUkFOU1BPUlRTLmxvbmdwb2xsKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZW5kcG9pbnRVUkxcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnRVUkwoKSB7XG4gICAgICByZXR1cm4gQWpheC5hcHBlbmRQYXJhbXModGhpcy5wb2xsRW5kcG9pbnQsIHsgdG9rZW46IHRoaXMudG9rZW4gfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNsb3NlQW5kUmV0cnlcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2VBbmRSZXRyeSgpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIHRoaXMucmVhZHlTdGF0ZSA9IFNPQ0tFVF9TVEFURVMuY29ubmVjdGluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwib250aW1lb3V0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9udGltZW91dCgpIHtcbiAgICAgIHRoaXMub25lcnJvcihcInRpbWVvdXRcIik7XG4gICAgICB0aGlzLmNsb3NlQW5kUmV0cnkoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicG9sbFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwb2xsKCkge1xuICAgICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cbiAgICAgIGlmICghKHRoaXMucmVhZHlTdGF0ZSA9PT0gU09DS0VUX1NUQVRFUy5vcGVuIHx8IHRoaXMucmVhZHlTdGF0ZSA9PT0gU09DS0VUX1NUQVRFUy5jb25uZWN0aW5nKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIEFqYXgucmVxdWVzdChcIkdFVFwiLCB0aGlzLmVuZHBvaW50VVJMKCksIFwiYXBwbGljYXRpb24vanNvblwiLCBudWxsLCB0aGlzLnRpbWVvdXQsIHRoaXMub250aW1lb3V0LmJpbmQodGhpcyksIGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICAgIGlmIChyZXNwKSB7XG4gICAgICAgICAgdmFyIHN0YXR1cyA9IHJlc3Auc3RhdHVzO1xuICAgICAgICAgIHZhciB0b2tlbiA9IHJlc3AudG9rZW47XG4gICAgICAgICAgdmFyIG1lc3NhZ2VzID0gcmVzcC5tZXNzYWdlcztcblxuICAgICAgICAgIF90aGlzOC50b2tlbiA9IHRva2VuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBzdGF0dXMgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoIChzdGF0dXMpIHtcbiAgICAgICAgICBjYXNlIDIwMDpcbiAgICAgICAgICAgIG1lc3NhZ2VzLmZvckVhY2goZnVuY3Rpb24gKG1zZykge1xuICAgICAgICAgICAgICByZXR1cm4gX3RoaXM4Lm9ubWVzc2FnZSh7IGRhdGE6IEpTT04uc3RyaW5naWZ5KG1zZykgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF90aGlzOC5wb2xsKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDIwNDpcbiAgICAgICAgICAgIF90aGlzOC5wb2xsKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDQxMDpcbiAgICAgICAgICAgIF90aGlzOC5yZWFkeVN0YXRlID0gU09DS0VUX1NUQVRFUy5vcGVuO1xuICAgICAgICAgICAgX3RoaXM4Lm9ub3BlbigpO1xuICAgICAgICAgICAgX3RoaXM4LnBvbGwoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBjYXNlIDUwMDpcbiAgICAgICAgICAgIF90aGlzOC5vbmVycm9yKCk7XG4gICAgICAgICAgICBfdGhpczguY2xvc2VBbmRSZXRyeSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IFwidW5oYW5kbGVkIHBvbGwgc3RhdHVzIFwiICsgc3RhdHVzO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwic2VuZFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZW5kKGJvZHkpIHtcbiAgICAgIHZhciBfdGhpczkgPSB0aGlzO1xuXG4gICAgICBBamF4LnJlcXVlc3QoXCJQT1NUXCIsIHRoaXMuZW5kcG9pbnRVUkwoKSwgXCJhcHBsaWNhdGlvbi9qc29uXCIsIGJvZHksIHRoaXMudGltZW91dCwgdGhpcy5vbmVycm9yLmJpbmQodGhpcywgXCJ0aW1lb3V0XCIpLCBmdW5jdGlvbiAocmVzcCkge1xuICAgICAgICBpZiAoIXJlc3AgfHwgcmVzcC5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgICAgIF90aGlzOS5vbmVycm9yKHN0YXR1cyk7XG4gICAgICAgICAgX3RoaXM5LmNsb3NlQW5kUmV0cnkoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNsb3NlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlKGNvZGUsIHJlYXNvbikge1xuICAgICAgdGhpcy5yZWFkeVN0YXRlID0gU09DS0VUX1NUQVRFUy5jbG9zZWQ7XG4gICAgICB0aGlzLm9uY2xvc2UoKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTG9uZ1BvbGw7XG59KCk7XG5cbnZhciBBamF4ID0gZXhwb3J0cy5BamF4ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBBamF4KCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBamF4KTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhBamF4LCBudWxsLCBbe1xuICAgIGtleTogXCJyZXF1ZXN0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlcXVlc3QobWV0aG9kLCBlbmRQb2ludCwgYWNjZXB0LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKSB7XG4gICAgICBpZiAod2luZG93LlhEb21haW5SZXF1ZXN0KSB7XG4gICAgICAgIHZhciByZXEgPSBuZXcgWERvbWFpblJlcXVlc3QoKTsgLy8gSUU4LCBJRTlcbiAgICAgICAgdGhpcy54ZG9tYWluUmVxdWVzdChyZXEsIG1ldGhvZCwgZW5kUG9pbnQsIGJvZHksIHRpbWVvdXQsIG9udGltZW91dCwgY2FsbGJhY2spO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHJlcSA9IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCA/IG5ldyBYTUxIdHRwUmVxdWVzdCgpIDogLy8gSUU3KywgRmlyZWZveCwgQ2hyb21lLCBPcGVyYSwgU2FmYXJpXG4gICAgICAgIG5ldyBBY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTEhUVFBcIik7IC8vIElFNiwgSUU1XG4gICAgICAgIHRoaXMueGhyUmVxdWVzdChyZXEsIG1ldGhvZCwgZW5kUG9pbnQsIGFjY2VwdCwgYm9keSwgdGltZW91dCwgb250aW1lb3V0LCBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInhkb21haW5SZXF1ZXN0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHhkb21haW5SZXF1ZXN0KHJlcSwgbWV0aG9kLCBlbmRQb2ludCwgYm9keSwgdGltZW91dCwgb250aW1lb3V0LCBjYWxsYmFjaykge1xuICAgICAgdmFyIF90aGlzMTAgPSB0aGlzO1xuXG4gICAgICByZXEudGltZW91dCA9IHRpbWVvdXQ7XG4gICAgICByZXEub3BlbihtZXRob2QsIGVuZFBvaW50KTtcbiAgICAgIHJlcS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXNwb25zZSA9IF90aGlzMTAucGFyc2VKU09OKHJlcS5yZXNwb25zZVRleHQpO1xuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXNwb25zZSk7XG4gICAgICB9O1xuICAgICAgaWYgKG9udGltZW91dCkge1xuICAgICAgICByZXEub250aW1lb3V0ID0gb250aW1lb3V0O1xuICAgICAgfVxuXG4gICAgICAvLyBXb3JrIGFyb3VuZCBidWcgaW4gSUU5IHRoYXQgcmVxdWlyZXMgYW4gYXR0YWNoZWQgb25wcm9ncmVzcyBoYW5kbGVyXG4gICAgICByZXEub25wcm9ncmVzcyA9IGZ1bmN0aW9uICgpIHt9O1xuXG4gICAgICByZXEuc2VuZChib2R5KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwieGhyUmVxdWVzdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB4aHJSZXF1ZXN0KHJlcSwgbWV0aG9kLCBlbmRQb2ludCwgYWNjZXB0LCBib2R5LCB0aW1lb3V0LCBvbnRpbWVvdXQsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7XG5cbiAgICAgIHJlcS50aW1lb3V0ID0gdGltZW91dDtcbiAgICAgIHJlcS5vcGVuKG1ldGhvZCwgZW5kUG9pbnQsIHRydWUpO1xuICAgICAgcmVxLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgYWNjZXB0KTtcbiAgICAgIHJlcS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhudWxsKTtcbiAgICAgIH07XG4gICAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT09IF90aGlzMTEuc3RhdGVzLmNvbXBsZXRlICYmIGNhbGxiYWNrKSB7XG4gICAgICAgICAgdmFyIHJlc3BvbnNlID0gX3RoaXMxMS5wYXJzZUpTT04ocmVxLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgY2FsbGJhY2socmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgaWYgKG9udGltZW91dCkge1xuICAgICAgICByZXEub250aW1lb3V0ID0gb250aW1lb3V0O1xuICAgICAgfVxuXG4gICAgICByZXEuc2VuZChib2R5KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicGFyc2VKU09OXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlSlNPTihyZXNwKSB7XG4gICAgICByZXR1cm4gcmVzcCAmJiByZXNwICE9PSBcIlwiID8gSlNPTi5wYXJzZShyZXNwKSA6IG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNlcmlhbGl6ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXJpYWxpemUob2JqLCBwYXJlbnRLZXkpIHtcbiAgICAgIHZhciBxdWVyeVN0ciA9IFtdO1xuICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhcmFtS2V5ID0gcGFyZW50S2V5ID8gcGFyZW50S2V5ICsgXCJbXCIgKyBrZXkgKyBcIl1cIiA6IGtleTtcbiAgICAgICAgdmFyIHBhcmFtVmFsID0gb2JqW2tleV07XG4gICAgICAgIGlmICgodHlwZW9mIHBhcmFtVmFsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YocGFyYW1WYWwpKSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIHF1ZXJ5U3RyLnB1c2godGhpcy5zZXJpYWxpemUocGFyYW1WYWwsIHBhcmFtS2V5KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcXVlcnlTdHIucHVzaChlbmNvZGVVUklDb21wb25lbnQocGFyYW1LZXkpICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQocGFyYW1WYWwpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHF1ZXJ5U3RyLmpvaW4oXCImXCIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJhcHBlbmRQYXJhbXNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gYXBwZW5kUGFyYW1zKHVybCwgcGFyYW1zKSB7XG4gICAgICBpZiAoT2JqZWN0LmtleXMocGFyYW1zKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgIH1cblxuICAgICAgdmFyIHByZWZpeCA9IHVybC5tYXRjaCgvXFw/LykgPyBcIiZcIiA6IFwiP1wiO1xuICAgICAgcmV0dXJuIFwiXCIgKyB1cmwgKyBwcmVmaXggKyB0aGlzLnNlcmlhbGl6ZShwYXJhbXMpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBBamF4O1xufSgpO1xuXG5BamF4LnN0YXRlcyA9IHsgY29tcGxldGU6IDQgfTtcblxudmFyIFByZXNlbmNlID0gZXhwb3J0cy5QcmVzZW5jZSA9IHtcbiAgc3luY1N0YXRlOiBmdW5jdGlvbiBzeW5jU3RhdGUoY3VycmVudFN0YXRlLCBuZXdTdGF0ZSwgb25Kb2luLCBvbkxlYXZlKSB7XG4gICAgdmFyIF90aGlzMTIgPSB0aGlzO1xuXG4gICAgdmFyIHN0YXRlID0gdGhpcy5jbG9uZShjdXJyZW50U3RhdGUpO1xuICAgIHZhciBqb2lucyA9IHt9O1xuICAgIHZhciBsZWF2ZXMgPSB7fTtcblxuICAgIHRoaXMubWFwKHN0YXRlLCBmdW5jdGlvbiAoa2V5LCBwcmVzZW5jZSkge1xuICAgICAgaWYgKCFuZXdTdGF0ZVtrZXldKSB7XG4gICAgICAgIGxlYXZlc1trZXldID0gcHJlc2VuY2U7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5tYXAobmV3U3RhdGUsIGZ1bmN0aW9uIChrZXksIG5ld1ByZXNlbmNlKSB7XG4gICAgICB2YXIgY3VycmVudFByZXNlbmNlID0gc3RhdGVba2V5XTtcbiAgICAgIGlmIChjdXJyZW50UHJlc2VuY2UpIHtcbiAgICAgICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgbmV3UmVmcyA9IG5ld1ByZXNlbmNlLm1ldGFzLm1hcChmdW5jdGlvbiAobSkge1xuICAgICAgICAgICAgcmV0dXJuIG0ucGh4X3JlZjtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB2YXIgY3VyUmVmcyA9IGN1cnJlbnRQcmVzZW5jZS5tZXRhcy5tYXAoZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICAgIHJldHVybiBtLnBoeF9yZWY7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIGpvaW5lZE1ldGFzID0gbmV3UHJlc2VuY2UubWV0YXMuZmlsdGVyKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgICByZXR1cm4gY3VyUmVmcy5pbmRleE9mKG0ucGh4X3JlZikgPCAwO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhciBsZWZ0TWV0YXMgPSBjdXJyZW50UHJlc2VuY2UubWV0YXMuZmlsdGVyKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3UmVmcy5pbmRleE9mKG0ucGh4X3JlZikgPCAwO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmIChqb2luZWRNZXRhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBqb2luc1trZXldID0gbmV3UHJlc2VuY2U7XG4gICAgICAgICAgICBqb2luc1trZXldLm1ldGFzID0gam9pbmVkTWV0YXM7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChsZWZ0TWV0YXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbGVhdmVzW2tleV0gPSBfdGhpczEyLmNsb25lKGN1cnJlbnRQcmVzZW5jZSk7XG4gICAgICAgICAgICBsZWF2ZXNba2V5XS5tZXRhcyA9IGxlZnRNZXRhcztcbiAgICAgICAgICB9XG4gICAgICAgIH0pKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBqb2luc1trZXldID0gbmV3UHJlc2VuY2U7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuc3luY0RpZmYoc3RhdGUsIHsgam9pbnM6IGpvaW5zLCBsZWF2ZXM6IGxlYXZlcyB9LCBvbkpvaW4sIG9uTGVhdmUpO1xuICB9LFxuICBzeW5jRGlmZjogZnVuY3Rpb24gc3luY0RpZmYoY3VycmVudFN0YXRlLCBfcmVmMiwgb25Kb2luLCBvbkxlYXZlKSB7XG4gICAgdmFyIGpvaW5zID0gX3JlZjIuam9pbnM7XG4gICAgdmFyIGxlYXZlcyA9IF9yZWYyLmxlYXZlcztcblxuICAgIHZhciBzdGF0ZSA9IHRoaXMuY2xvbmUoY3VycmVudFN0YXRlKTtcbiAgICBpZiAoIW9uSm9pbikge1xuICAgICAgb25Kb2luID0gZnVuY3Rpb24gb25Kb2luKCkge307XG4gICAgfVxuICAgIGlmICghb25MZWF2ZSkge1xuICAgICAgb25MZWF2ZSA9IGZ1bmN0aW9uIG9uTGVhdmUoKSB7fTtcbiAgICB9XG5cbiAgICB0aGlzLm1hcChqb2lucywgZnVuY3Rpb24gKGtleSwgbmV3UHJlc2VuY2UpIHtcbiAgICAgIHZhciBjdXJyZW50UHJlc2VuY2UgPSBzdGF0ZVtrZXldO1xuICAgICAgc3RhdGVba2V5XSA9IG5ld1ByZXNlbmNlO1xuICAgICAgaWYgKGN1cnJlbnRQcmVzZW5jZSkge1xuICAgICAgICB2YXIgX3N0YXRlJGtleSRtZXRhcztcblxuICAgICAgICAoX3N0YXRlJGtleSRtZXRhcyA9IHN0YXRlW2tleV0ubWV0YXMpLnVuc2hpZnQuYXBwbHkoX3N0YXRlJGtleSRtZXRhcywgX3RvQ29uc3VtYWJsZUFycmF5KGN1cnJlbnRQcmVzZW5jZS5tZXRhcykpO1xuICAgICAgfVxuICAgICAgb25Kb2luKGtleSwgY3VycmVudFByZXNlbmNlLCBuZXdQcmVzZW5jZSk7XG4gICAgfSk7XG4gICAgdGhpcy5tYXAobGVhdmVzLCBmdW5jdGlvbiAoa2V5LCBsZWZ0UHJlc2VuY2UpIHtcbiAgICAgIHZhciBjdXJyZW50UHJlc2VuY2UgPSBzdGF0ZVtrZXldO1xuICAgICAgaWYgKCFjdXJyZW50UHJlc2VuY2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIHJlZnNUb1JlbW92ZSA9IGxlZnRQcmVzZW5jZS5tZXRhcy5tYXAoZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgcmV0dXJuIG0ucGh4X3JlZjtcbiAgICAgIH0pO1xuICAgICAgY3VycmVudFByZXNlbmNlLm1ldGFzID0gY3VycmVudFByZXNlbmNlLm1ldGFzLmZpbHRlcihmdW5jdGlvbiAocCkge1xuICAgICAgICByZXR1cm4gcmVmc1RvUmVtb3ZlLmluZGV4T2YocC5waHhfcmVmKSA8IDA7XG4gICAgICB9KTtcbiAgICAgIG9uTGVhdmUoa2V5LCBjdXJyZW50UHJlc2VuY2UsIGxlZnRQcmVzZW5jZSk7XG4gICAgICBpZiAoY3VycmVudFByZXNlbmNlLm1ldGFzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWxldGUgc3RhdGVba2V5XTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gc3RhdGU7XG4gIH0sXG4gIGxpc3Q6IGZ1bmN0aW9uIGxpc3QocHJlc2VuY2VzLCBjaG9vc2VyKSB7XG4gICAgaWYgKCFjaG9vc2VyKSB7XG4gICAgICBjaG9vc2VyID0gZnVuY3Rpb24gY2hvb3NlcihrZXksIHByZXMpIHtcbiAgICAgICAgcmV0dXJuIHByZXM7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm1hcChwcmVzZW5jZXMsIGZ1bmN0aW9uIChrZXksIHByZXNlbmNlKSB7XG4gICAgICByZXR1cm4gY2hvb3NlcihrZXksIHByZXNlbmNlKTtcbiAgICB9KTtcbiAgfSxcblxuICAvLyBwcml2YXRlXG5cbiAgbWFwOiBmdW5jdGlvbiBtYXAob2JqLCBmdW5jKSB7XG4gICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaikubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHJldHVybiBmdW5jKGtleSwgb2JqW2tleV0pO1xuICAgIH0pO1xuICB9LFxuICBjbG9uZTogZnVuY3Rpb24gY2xvbmUob2JqKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7XG4gIH1cbn07XG5cbi8vIENyZWF0ZXMgYSB0aW1lciB0aGF0IGFjY2VwdHMgYSBgdGltZXJDYWxjYCBmdW5jdGlvbiB0byBwZXJmb3JtXG4vLyBjYWxjdWxhdGVkIHRpbWVvdXQgcmV0cmllcywgc3VjaCBhcyBleHBvbmVudGlhbCBiYWNrb2ZmLlxuLy9cbi8vICMjIEV4YW1wbGVzXG4vL1xuLy8gICAgbGV0IHJlY29ubmVjdFRpbWVyID0gbmV3IFRpbWVyKCgpID0+IHRoaXMuY29ubmVjdCgpLCBmdW5jdGlvbih0cmllcyl7XG4vLyAgICAgIHJldHVybiBbMTAwMCwgNTAwMCwgMTAwMDBdW3RyaWVzIC0gMV0gfHwgMTAwMDBcbi8vICAgIH0pXG4vLyAgICByZWNvbm5lY3RUaW1lci5zY2hlZHVsZVRpbWVvdXQoKSAvLyBmaXJlcyBhZnRlciAxMDAwXG4vLyAgICByZWNvbm5lY3RUaW1lci5zY2hlZHVsZVRpbWVvdXQoKSAvLyBmaXJlcyBhZnRlciA1MDAwXG4vLyAgICByZWNvbm5lY3RUaW1lci5yZXNldCgpXG4vLyAgICByZWNvbm5lY3RUaW1lci5zY2hlZHVsZVRpbWVvdXQoKSAvLyBmaXJlcyBhZnRlciAxMDAwXG4vL1xuXG52YXIgVGltZXIgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFRpbWVyKGNhbGxiYWNrLCB0aW1lckNhbGMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGltZXIpO1xuXG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHRoaXMudGltZXJDYWxjID0gdGltZXJDYWxjO1xuICAgIHRoaXMudGltZXIgPSBudWxsO1xuICAgIHRoaXMudHJpZXMgPSAwO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFRpbWVyLCBbe1xuICAgIGtleTogXCJyZXNldFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgIHRoaXMudHJpZXMgPSAwO1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO1xuICAgIH1cblxuICAgIC8vIENhbmNlbHMgYW55IHByZXZpb3VzIHNjaGVkdWxlVGltZW91dCBhbmQgc2NoZWR1bGVzIGNhbGxiYWNrXG5cbiAgfSwge1xuICAgIGtleTogXCJzY2hlZHVsZVRpbWVvdXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2NoZWR1bGVUaW1lb3V0KCkge1xuICAgICAgdmFyIF90aGlzMTMgPSB0aGlzO1xuXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7XG5cbiAgICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMxMy50cmllcyA9IF90aGlzMTMudHJpZXMgKyAxO1xuICAgICAgICBfdGhpczEzLmNhbGxiYWNrKCk7XG4gICAgICB9LCB0aGlzLnRpbWVyQ2FsYyh0aGlzLnRyaWVzICsgMSkpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBUaW1lcjtcbn0oKTtcblxufSkodHlwZW9mKGV4cG9ydHMpID09PSBcInVuZGVmaW5lZFwiID8gd2luZG93LlBob2VuaXggPSB3aW5kb3cuUGhvZW5peCB8fCB7fSA6IGV4cG9ydHMpO1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcGhvZW5peC9wcml2L3N0YXRpYy9waG9lbml4LmpzXG4vLyBtb2R1bGUgaWQgPSAyMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9');
},function(module,exports,__webpack_require__){eval("var EventEmitter = __webpack_require__(13);\r\nmodule.exports = new EventEmitter();\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vKHdlYnBhY2spL2hvdC9lbWl0dGVyLmpzPzgyNGIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSIsImZpbGUiOiIyMS5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKFwiZXZlbnRzXCIpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL2hvdC9lbWl0dGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9")},function(module,exports){eval('/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nmodule.exports = function(updatedModules, renewedModules) {\r\n\tvar unacceptedModules = updatedModules.filter(function(moduleId) {\r\n\t\treturn renewedModules && renewedModules.indexOf(moduleId) < 0;\r\n\t});\r\n\r\n\tif(unacceptedModules.length > 0) {\r\n\t\tconsole.warn("[HMR] The following modules couldn\'t be hot updated: (They would need a full reload!)");\r\n\t\tunacceptedModules.forEach(function(moduleId) {\r\n\t\t\tconsole.warn("[HMR]  - " + moduleId);\r\n\t\t});\r\n\t}\r\n\r\n\tif(!renewedModules || renewedModules.length === 0) {\r\n\t\tconsole.log("[HMR] Nothing hot updated.");\r\n\t} else {\r\n\t\tconsole.log("[HMR] Updated modules:");\r\n\t\trenewedModules.forEach(function(moduleId) {\r\n\t\t\tconsole.log("[HMR]  - " + moduleId);\r\n\t\t});\r\n\t}\r\n};\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vKHdlYnBhY2spL2hvdC9sb2ctYXBwbHktcmVzdWx0LmpzP2Q3NjIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EiLCJmaWxlIjoiMjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxyXG4qL1xyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHVwZGF0ZWRNb2R1bGVzLCByZW5ld2VkTW9kdWxlcykge1xyXG5cdHZhciB1bmFjY2VwdGVkTW9kdWxlcyA9IHVwZGF0ZWRNb2R1bGVzLmZpbHRlcihmdW5jdGlvbihtb2R1bGVJZCkge1xyXG5cdFx0cmV0dXJuIHJlbmV3ZWRNb2R1bGVzICYmIHJlbmV3ZWRNb2R1bGVzLmluZGV4T2YobW9kdWxlSWQpIDwgMDtcclxuXHR9KTtcclxuXHJcblx0aWYodW5hY2NlcHRlZE1vZHVsZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0Y29uc29sZS53YXJuKFwiW0hNUl0gVGhlIGZvbGxvd2luZyBtb2R1bGVzIGNvdWxkbid0IGJlIGhvdCB1cGRhdGVkOiAoVGhleSB3b3VsZCBuZWVkIGEgZnVsbCByZWxvYWQhKVwiKTtcclxuXHRcdHVuYWNjZXB0ZWRNb2R1bGVzLmZvckVhY2goZnVuY3Rpb24obW9kdWxlSWQpIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKFwiW0hNUl0gIC0gXCIgKyBtb2R1bGVJZCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGlmKCFyZW5ld2VkTW9kdWxlcyB8fCByZW5ld2VkTW9kdWxlcy5sZW5ndGggPT09IDApIHtcclxuXHRcdGNvbnNvbGUubG9nKFwiW0hNUl0gTm90aGluZyBob3QgdXBkYXRlZC5cIik7XHJcblx0fSBlbHNlIHtcclxuXHRcdGNvbnNvbGUubG9nKFwiW0hNUl0gVXBkYXRlZCBtb2R1bGVzOlwiKTtcclxuXHRcdHJlbmV3ZWRNb2R1bGVzLmZvckVhY2goZnVuY3Rpb24obW9kdWxlSWQpIHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJbSE1SXSAgLSBcIiArIG1vZHVsZUlkKTtcclxuXHRcdH0pO1xyXG5cdH1cclxufTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL2hvdC9sb2ctYXBwbHktcmVzdWx0LmpzXG4vLyBtb2R1bGUgaWQgPSAyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9')},function(n,t,B){B(7),B(4),B(5),n.exports=B(6)}]);